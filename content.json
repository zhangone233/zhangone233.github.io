{"posts":[{"title":"å¼€ç®±ï¼šç´¢è”¡å®šç„¦ 55mm F1.8","text":"å¿ƒå¿ƒå¿µå¿µçš„å®šç„¦å¤´ç»ˆäºåˆ°è´§äº†~ è¿™æ˜¯å…¥å‘æ‘„å½±ä»¥æ¥çš„ç¬¬äºŒé¢—é•œå¤´ã€‚ ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é¢—é•œå¤´ ç„¦è·ï¼šå®šç„¦å¤´ï¼Œå…¨ç”»å¹…ä¸‹55æ¯«ç±³ã€‚ APS-Cç”»å¹…ä¸‹çš„35mmè§„æ ¼æ¢ç®—ç„¦è·ä¸ºï¼š82.5æ¯«ç±³ å…‰åœˆï¼šæœ€å¤§F1.8 ï¼Œ æœ€å°F22 é‡é‡ï¼š281å…‹ (nice ğŸ˜„ï¼Œè·Ÿæˆ‘çš„A7Cå¾ˆæ­) å°ºå¯¸ï¼š64.4 x 70.5ï¼ˆä½“ç§¯å¾ˆniceï¼é€‚é©¬å¤§ç‚®è­¦å‘Šâš ï¸å“ˆå“ˆ ï¼‰ æ»¤å…‰é•œç›´å¾„ï¼š49æ¯«ç±³ ï¼ˆèµï¼‰ æœ€è¿‘å¯¹ç„¦è·ç¦»çº¦ï¼š50å˜ç±³ ï¼ˆå°±æ˜¯è·ç¦»åŠç±³ä¹‹å†…å¯¹ä¸ä¸Šç„¦ã€‚å·®è¯„ğŸ˜ˆï¼‰ â€¦. ï¼ˆotherï¼‰ Sonnar T* FE 55mm F1.8 ZA å®šç„¦é•œå¤´ã€‚ä¸Šå¸‚æ—¶é—´æ˜¯2013å¹´10æœˆä»½ï¼Œè·ç¦»ç°åœ¨å·²ç»è¿‡å»9å¹´äº†ã€‚ï¼ˆWTH ? å››ä¹å…¥å›½å†›äº†ï¼ï¼ï¼‰è™½è¯´æ•°ç ã€ç”µå­ç±»äº§å“ä¸€å‘ç§‰æ‰¿ä¹°æ–°ä¸ä¹°æ—§ï¼Œä½†è¿™é¢—é•œå¤´ä»ä¸Šå¸‚ä»¥æ¥è‡³ä»Šé¥±å—å¥½è¯„ï¼Œæœ‰å¤ªå¤šäººä½¿ç”¨å®ƒæ‹å‡ºæ¥å¾ˆå¤šéå¸¸æ£’çš„ä½œå“ã€‚æ›´æœ‰äººç§°ä¹‹ä¸ºâ€™å…¥é—¨å¿…å¤‡é•œå¤´â€™ã€‚ç®—æ˜¯ä¸€ä¸ªç»å…¸å¤´äº†ã€‚ ä¸ªäººè®¤ä¸ºçš„ä¸€äº›ä¼˜ç‚¹ï¼šè‰²å½©ä¸é”™ï¼Œç…§ç‰‡ä¸è§†é¢‘è¡¨ç°éƒ½å¾ˆå¥½åŸå‚é•œå¤´ï¼Œè”¡å¸é•€è†œã€‚å¯¹ç„¦é€Ÿåº¦å¿«ä½“éªŒå¥½ã€‚ï¼ˆæ¯•ç«Ÿäº²å„¿å­ï¼‰å¤–è§‚å¥½çœ‹ã€‚ä½“ç§¯å°ï¼Œé‡é‡è½»ï¼Œç›´ç­’è§„æ•´å½¢çŠ¶è¾ƒä¸ºç¬¦åˆä¸ªäººå®¡ç¾ã€‚è”¡å¸å°è“æ ‡ä¿¡ä»°åŠ æˆï¼ï¼ˆé¢œå€¼å³æ­£ä¹‰ğŸ˜‹ï¼‰æ­é…æˆ‘çš„A7Cå°æœºèº«æ¯”è¾ƒåˆé€‚ã€‚è½»ä¾¿ä¼šæ›´æœ‰å¸¦å‡ºå»çš„æ„æ„¿ã€‚â€¦.. å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹: æœ€è¿‘å¯¹ç„¦è·ç¦»50å˜ç±³æœ‰ç‚¹æ— å¥ˆâ€¦ æœ‰ä¸ªå¤–å·ï¼Œæ±Ÿæ¹–äººç§° â€˜ç´«éœä»™å­â€™ ã€‚è‡ªå·±å®æµ‹æŸäº›å…‰çº¿åœºæ™¯ä¸‹ç¡®å®ä¼šæœ‰è¾ƒä¸ºæ˜æ˜¾çš„ç´«è¾¹ã€‚ï¼ˆä¸è¿‡å¯¹äºæˆ‘è¿™ç§éä¸“ä¸šäººå£«æ¥è¯´ï¼Œé‚£éƒ½ä¸æ˜¯äº‹~ï¼‰ æœ‰ç‚¹å°è´µemmm ï¼ˆä¹å¹´è€å¤´äº†ï¼ä»·æ ¼çœŸåšæŒºï¼‰ é•œå¤´å®ç‰©ç…§ç‰‡ æˆ‘çš„æ‰‹æœºæ‹æ‘„ç´ è´¨å¤ªæ¸£äº†â€¦.é•œå¤´å…¶å®å¾ˆå¥½çœ‹ã€‚ å¤–å‡ºå®æ‹ç…§ç‰‡ å‡ºå»æ‰«è¡—å’¯~ï¼ï¼ ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å‘ƒ å—¯emmmâ€¦â€¦ å¥½åƒæ‹çš„æŒºä¸€èˆ¬çš„å‘ƒã€‚ è¿˜æ²¡æœ‰ä¸€äº›ä¸»æ‰“æ‹æ‘„çš„æ‰‹æœºæˆç‰‡å¥½çœ‹å‘¢Ohã€‚ å¼€å¯ç‹¡è¾©æ¨¡å¼ï¼šä¸€å®šæ˜¯ç›´å‡ºçš„åŸå› ï¼æ²¡åæœŸï¼åœºæ™¯ä¸è¡Œï¼æ²¡æœ‰ä¸‰è„šæ¶çš„åŸå› ï¼ä»Šå¤©å¤©æ°”ä¸å¥½ï¼å†»æ‰‹å¤ªæŠ–äº†ï¼è·¯äººä¸é…åˆğŸ˜“ï¼ â€¦â€¦â€¦â€¦ ï¼ˆğŸ¶ä¸æ‰¿è®¤è‡ªå·±æ‹æ‘„æŠ€æœ¯èœğŸ¶ï¼‰ æœ€åæ™šä¸Šé¡¶ç€å¾ˆå†·çš„æ°”æ¸©ï¼Œé¡¶ç€ç¤¾æå¿ƒç†å»æ‰«è¡—æ‹äº†å‡ åå¼ ï¼Œå›åˆ°å®¶å‘ç°ç«Ÿæ²¡ä¸€å¼ è‡ªå·±æ»¡æ„çš„ç…§ç‰‡ã€‚ä½†æˆ‘ä¹Ÿæ²¡æœ‰å¾ˆå¤±è½å§ï¼Œå› ä¸ºæˆ‘çš„æ‹æ‘„ç»å†ä¸€ç›´éƒ½æ˜¯è¿™æ ·ğŸ˜‚ å“ˆå“ˆå“ˆ è‡ªä»æœ‰äº†ç›¸æœºåæ‰å‘ç°æ‘„å½±å¹¶ä¸æ˜¯è‡ªå·±æƒ³è±¡çš„é‚£ä¹ˆç®€å•ï¼Œæœ‰å¾ˆå¤šçš„å‚æ•°çŸ¥è¯†ï¼Œæ„å›¾å®¡ç¾ï¼ŒåæœŸè°ƒè‰²ç­‰çŸ¥è¯†éœ€è¦å»å­¦ä¹ ã€‚ä¸æ˜¯æŒ‰ä¸€ä¸‹å¿«é—¨å°±èƒ½å‡ºå¥½çœ‹çš„ç…§ç‰‡ï¼Œä¹Ÿè®²ç©¶å¤©æ—¶åœ°åˆ©äººå’Œã€‚å°¤å…¶æ˜¯æ‰«è¡—è¿™ç§äººæ–‡æ‘„å½±ï¼Œéšæœºæ€§å¾ˆå¤šã€‚ä¸€äº›ç¾å¥½çš„ç”»é¢å¾€å¾€åªæœ‰ä¸€ç¬é—´ï¼Œæ²¡èƒ½åŠæ—¶æŠ“æ‹åˆ°å°±å¾ˆéš¾å†æœ‰æœºä¼šäº†ï¼ˆåƒæäº†äººç”Ÿæœºé‡ã€‚ ?æ€ä¹ˆçªç„¶æ­£ç»ğŸ™…ğŸ»â€â™€ï¸ï¼Ÿï¼‰ ä¸€ç›´è§‰å¾— â€œæ„ˆæŒ«æ„ˆå‹‡â€ è¿™å¥æˆè¯­æ›´èƒ½ä½“ç°å‡ºä»€ä¹ˆæ˜¯çº¯ç²¹çš„ çƒ­çˆ±æ‘„å½±æ˜¯ä¸€ç§åˆ©ç”¨å…‰çš„è‰ºæœ¯ï¼Œä¿æŒçƒ­çˆ±","link":"/posts/77b658d2/"},{"title":"Walineè¯„è®ºç³»ç»Ÿç»ˆç»ˆç»ˆç»ˆç»ˆäºèƒ½ç”¨äº†~","text":"æŠ˜è…¾äº†è¿™ä¹ˆä¹…çš„åšå®¢è¯„è®ºç³»ç»Ÿï¼Œå¯ç®—æ˜¯èƒ½å‘Šä¸€æ®µè½äº†ã€‚ğŸ˜ˆ ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯Gitalkï¼Œåæ¥ä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯å“ªæ ¹ç­‹æ­é”™äº†ï¼Œè§‰å¾—ä¸å¥½ç”¨åˆå¼€å§‹æŠ˜è…¾äº†èµ·æ¥ã€‚ç„¶åå…ˆè¯•äº†è¯•Valineï¼Œæ­£å½“è§‰å¾—è¿˜ä¸é”™æ—¶ï¼Œå°±æ³¨æ„åˆ°æœ‰å…¶å®ƒç”¨æˆ·å‘ç°ä¸€ä¸ªå­˜åœ¨äºValineè¯„è®ºæ’ä»¶çš„æ¼æ´ä¼šå¯¼è‡´æ­¤è¯„è®ºæœåŠ¡æš´éœ²æ‰€æœ‰è¯„è®ºè€…çš„ IPåœ°å€ (xCss/Valine#336)ã€‚ è¯·åœ¨æ­¤æ¼æ´ä¿®å¤ä¹‹å‰æ¢ç”¨å…¶ä»–è¯„è®ºæœåŠ¡ã€‚so what ï¼Ÿç›´æ¥æ¢ Waline ï¼ çœ‹ä¸€ä¸‹Walineå®˜ç½‘çš„ä¸€äº›ä»‹ç»ï¼š ä¸€æ¬¾ä» valine è¡ç”Ÿçš„å¸¦åç«¯è¯„è®ºç³»ç»Ÿã€‚å¯ä»¥å°† Waline ç­‰ä»·æˆ With backend Valine. ç‰¹æ€§ï¼šå¿«é€Ÿã€çœŸÂ·å®‰å…¨ã€Markdown è¯­æ³•æ”¯æŒã€è½»é‡æ˜“ç”¨ã€å…è´¹éƒ¨ç½²ã€å¤šç§éƒ¨ç½²éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨æœåŠ¡æ”¯æŒï¼Œæ¯åˆ—é€‰æ‹©ä¸€é¡¹å¤šè¾¾ 84 ç§éƒ¨ç½²æ–¹å¼ä»»å›é€‰æ‹©â€¦ ï¼ˆemmmğŸ˜‚ï¼‰ åæ­£çœ‹ç€å®˜æ–¹å¹äº†ä¸€é€šç‰›çš®ï¼Œæœ€è®©æˆ‘æ„Ÿå…´è¶£çš„è¿˜æ˜¯é‚£ä¸ªç‹¬ç«‹æœåŠ¡ç«¯éƒ¨ç½²ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€ææ•´èµ·æ¥ï¼ Waline é…ç½®å…ˆæ˜¯çœ‹ç€å®˜ç½‘çš„ å¿«é€Ÿä¸Šæ‰‹ æ–‡æ¡£å®Œæ•´æ“ä½œæµç¨‹èµ°äº†ä¸€éã€‚LeanCloudæ³¨å†Œã€åˆ›å»ºåº”ç”¨ã€ Vercel éƒ¨ç½²é¡¹ç›®åˆ›å»º+ç¯å¢ƒå˜é‡è®¾ç½®ã€â€¦.ç­‰ç­‰ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ã€‚æœ€åç»ˆäºèµ°å®Œäº†æµç¨‹ï¼Œå…´å¥‹çš„å»ç‚¹å‡»éƒ¨ç½²é¡¹ç›®çš„ Visit æŒ‰é’®å»é¢„è§ˆ â€“ è‡ªå·±æµ‹è¯•äº†ä¸¤æ¡è¯„è®ºä¹‹åï¼šå“å‘¦~ä¸é”™å‘¦ã€‚ç„¶åèµ¶ç´§æŒ‰ç…§æ¥å…¥æµç¨‹å»é…ç½®è‡ªå·±çš„åšå®¢é¡¹ç›®ï¼Œæ­£å½“æˆ‘è‡ªæ»¡æ—¶åˆæ³¨æ„åˆ°äº†ç¬¬ä¸€æ¡æµ‹è¯•è¯„è®ºçš„ä½ç½®ä¿¡æ¯ â€“ ä¸œäº¬éƒ½ğŸ˜“å¥½å®¶ä¼™ï¼Œæˆ‘è¿˜ç¿»ç€å¢™å‘¢ã€‚ å› ä¸ºæˆ‘åˆ›å»ºçš„æ˜¯å›½é™…ç‰ˆï¼Œå…è´¹éƒ¨ç½²æœåŠ¡å™¨å’ŒåŸŸåéƒ½æ˜¯å›½å¤–çš„ï¼ˆæ¯•ç«Ÿå›½å†…å¤§ç¯å¢ƒï¼Œæ‡‚éƒ½éƒ½æ‡‚ï¼‰ã€‚æ¥ç€æˆ‘ä¾¿ä»å¢™ä¸Šä¸‹æ¥è¯•äº†ä¸€é€šï¼Œè™½ç„¶é¡µé¢è¿˜æ˜¯èƒ½æ­£å¸¸æ‰“å¼€ï¼Œä½†æ˜¯æäº¤è¯„è®ºåŠŸèƒ½è¿˜æ˜¯æŒ‚äº†ã€‚ï¼ˆé“ä»”æ­¤æ—¶éå¸¸ä¸æ‚¦ğŸ˜¯ï¼‰ å»ç½‘æœäº†ä¸€ä¸‹ç­”æ¡ˆï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯vercel.appåŸŸååœ¨å›½å†…é­åˆ°æ±¡æŸ“æ— æ³•è®¿é—®ã€‚éšåæ‰¾åˆ°äº†ä¸¤ç§è§£å†³åŠæ³•ï¼š å¦‚æœä½ æœ‰ç”³è¯·è¿‡è‡ªå·±ç‹¬ç«‹çš„åšå®¢åŸŸåï¼Œå¯ä»¥åœ¨åšå®¢é¡¶çº§åŸŸåä¸Šæ·»åŠ ä¸€ä¸ªäºŒçº§å­åŸŸåä½œä¸ºè¯„è®ºç³»ç»Ÿçš„ä½¿ç”¨åŸŸåã€‚ç„¶ååˆ«å¿˜äº†æ·»åŠ ä¸€æ¡DNSè§£æè®°å½•ï¼šCNAME ç±»å‹è§£ææŒ‡å‘ cname.vercel-dns.com è¿™ä¸ªåœ°å€ã€‚ ä¹‹åå†å»verceléƒ¨ç½²æœåŠ¡ä¸Šï¼Œç‚¹å‡»settingsï¼Œæ‰¾åˆ°Domianså°†vercelä¸Šçš„walineåœ°å€æŒ‡å‘ä½ è®¾ç½®çš„å­åŸŸåä¸Šã€‚è¿™æ ·å°±å®Œæˆäº†ï¼Œåé¢é…ç½®åšå®¢çš„æ—¶å€™serverURLå±æ€§é…ç½®åˆšåˆšçš„å­åŸŸåå°±å¥½äº†ã€‚ ä½¿ç”¨å…¶å®ƒçš„éƒ¨ç½²æœåŠ¡å™¨ä»£æ›¿verceléƒ¨ç½²ã€‚ä¹Ÿæ˜¯æˆ‘ç°åœ¨é‡‡ç”¨çš„æ–¹å¼ã€‚è™½ç„¶æˆ‘å·²æœ‰ç‹¬ç«‹åŸŸå+å¤‡æ¡ˆï¼Œä½†å°±æ˜¯æƒ³å°å°é²œğŸ˜‹ ä½¿ç”¨DetaæœåŠ¡ç«¯éƒ¨ç½²DETAå®˜ç½‘ ï¼šhttps://www.deta.sh/ è¿›å…¥å®˜ç½‘åè¿˜æ˜¯è€å¥—è·¯å…ˆæ³¨å†Œï¼Œç„¶åé¡µé¢ä¼šè‡ªåŠ¨å¼•å¯¼ä½ å»åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„éƒ¨ç½²é¡¹ç›®project ç›´æ¥ç‚¹è¿™ä¸ªé“¾æ¥è¿›å…¥ï¼š https://web.deta.sh/deploy?path=https://github.com/walinejs/deta-starter å°†Walineå¿«é€Ÿéƒ¨ç½²åˆ°detaå¹³å° detaå¹³å°éƒ¨ç½²å®Œæˆä»¥åä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºåŸŸåé“¾æ¥ã€‚å°†è¿™ä¸ªé“¾æ¥é…ç½®åˆ°åšå®¢é¡¹ç›®ä¸­serverURLå±æ€§å°±å¯ä»¥æ­£å¸¸è¯„è®ºäº†ã€‚ å‚è€ƒæ–‡æ¡£ï¼šhttps://waline.js.org/guide/deploy/deta.html ï¼~~ end","link":"/posts/c0155143/"},{"title":"Git-ä¸€äº›å‘½ä»¤","text":"2022å¹´æ¥ä¸ªæ›´æ–°ï¼š å‘ç°ä¸€ä¸ªä¸é”™çš„Gitå¸¸ç”¨å‘½ä»¤ä¸­æ–‡æ•™ç¨‹ç½‘ç«™ï¼šhttps://tsejx.github.io/devops-guidebook/code/git Git éšç¬”è®°å½•ä¸€äº›å‘½ä»¤ å¸¸ç”¨æ­¥éª¤æ“ä½œgit init : è®©æœ¬åœ°çš„æ–‡ä»¶å¤¹åˆå§‹åŒ–æˆä¸€ä¸ªgitä»“åº“ï¼›git status : æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ä¸­æ–‡ä»¶çš„çŠ¶æ€ï¼›çº¢è‰²ï¼šæ–‡ä»¶åœ¨å¼€å‘åŒº ç»¿è‰²ï¼šå¼€å‘åŒºå’Œæš‚å­˜åŒºçš„ä»£ç ä¸€è‡´ï¼›git add : æŠŠå¼€å‘åŒºçš„ä»£ç å…‹éš†ä¸€ä»½ä¸Šä¼ åˆ°æš‚å­˜åŒºï¼›git checkout -- æ–‡ä»¶å : æŠŠæš‚å­˜åŒºå­˜å‚¨çš„ä»£ç æŠŠæœ¬åœ°ç»™è¦†ç›–æ‰ï¼›git restore æ–‡ä»¶å : ã€ä¹Ÿæ˜¯å°†æš‚å­˜åŒºçš„æ–‡ä»¶è¦†ç›–æœ¬åœ°ã€‘git rm --cached æ–‡ä»¶åï¼š åˆ é™¤åœ¨æš‚å­˜åŒºçš„æ–‡ä»¶git commit -mâ€œæäº¤æ³¨é‡Šâ€ : å°†æš‚å­˜åŒºçš„ä»£ç ä¸Šä¼ åˆ°å†å²åŒºï¼› ä¸€ä¸ªæœ¬åœ°ä»“åº“å¯ä»¥è¿æ¥å¤šä¸ªè¿œç¨‹ä»“åº“git remote add origin è¿œç¨‹ä»“åº“åœ°å€ï¼›git remote -v : æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“çš„è¿æ¥ï¼›git clone: è¿œç¨‹ä»“åº“åœ°å€ï¼šæŠŠè¿œç¨‹ä»“åº“ä¸‹è½½åˆ°è‡ªå·±ç”µè„‘ä¸Šgit pull origin master : æ‹‰å–æœ€æ–°çš„ä»£ç ï¼› å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitï¼Œéœ€è¦å°†ä»£ç ä»æš‚å­˜åŒºä¸Šä¼ åˆ°å†å²åŒºï¼Œéœ€è¦é…ç½®å…¨å±€çš„é‚®ç®±å’Œç”¨æˆ·åï¼›åœ¨git Bash Hereä¸­æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤git config --global user.email &quot;ä½ çš„é‚®ç®±&quot;git config --global user.name &quot;ç”¨æˆ·å&quot;git commit -m&quot;xxx&quot; åˆå§‹åŒ–é…ç½®é…ç½®ä½¿ç”¨gitä»“åº“çš„äººå‘˜å§“ågit config --global user.name &quot;Your Name Comes Here&quot; é…ç½®ä½¿ç”¨gitä»“åº“çš„äººå‘˜emailgit config --global user.email you@yourdomain.example.com é…ç½®åˆ°ç¼“å­˜ é»˜è®¤15åˆ†é’Ÿgit config --global credential.helper cache ä¿®æ”¹ç¼“å­˜æ—¶é—´git config --global credential.helper 'cache --timeout=3600' é…ç½®åˆ«ågit config --global color.ui true git config --global alias.co checkout git config --global alias.ci commit git config --global alias.st status git config --global alias.br branch è®¾ç½®Editorä½¿ç”¨textmategit config --global core.editor &quot;mate -w&quot;git config -1 # åˆ—ä¸¾æ‰€æœ‰é…ç½® æ‰“å¼€ç”¨æˆ·çš„gité…ç½®æ–‡ä»¶~/.gitconfig æŸ¥çœ‹ã€æ·»åŠ ã€æäº¤ã€åˆ é™¤ã€æ‰¾å›ï¼Œé‡ç½®ä¿®æ”¹æ–‡ä»¶git help # æ˜¾ç¤ºcommandçš„helpgit show # æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å†…å®¹git show $id git co -- # æŠ›å¼ƒå·¥ä½œåŒºä¿®æ”¹git co . # æŠ›å¼ƒå·¥ä½œåŒºä¿®æ”¹git add # å°†å·¥ä½œæ–‡ä»¶ä¿®æ”¹æäº¤åˆ°æœ¬åœ°æš‚å­˜åŒºgit add . # å°†æ‰€æœ‰ä¿®æ”¹è¿‡çš„å·¥ä½œæ–‡ä»¶æäº¤æš‚å­˜åŒºgit rm # ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶git rm --cached # ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶ï¼Œä½†ä¸åˆ é™¤æ–‡ä»¶git reset # ä»æš‚å­˜åŒºæ¢å¤åˆ°å·¥ä½œæ–‡ä»¶git reset -- . # ä»æš‚å­˜åŒºæ¢å¤åˆ°å·¥ä½œæ–‡ä»¶git reset --hard # æ¢å¤æœ€è¿‘ä¸€æ¬¡æäº¤è¿‡çš„çŠ¶æ€ï¼Œå³æ”¾å¼ƒä¸Šæ¬¡æäº¤åçš„æ‰€æœ‰æœ¬æ¬¡ä¿®æ”¹git cigit ci . git ci -a # å°†git add, git rmå’Œgit ciç­‰æ“ä½œéƒ½åˆå¹¶åœ¨ä¸€èµ·åšgit ci -am &quot;some comments&quot; git ci --amend # ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤è®°å½•git revert &lt;$id&gt; # æ¢å¤æŸæ¬¡æäº¤çš„çŠ¶æ€ï¼Œæ¢å¤åŠ¨ä½œæœ¬èº«ä¹Ÿåˆ›å»ºäº†ä¸€æ¬¡æäº¤å¯¹è±¡git revert HEAD # æ¢å¤æœ€åä¸€æ¬¡æäº¤çš„çŠ¶æ€ æŸ¥çœ‹æ–‡ä»¶diffgit diff # æ¯”è¾ƒå½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºæ–‡ä»¶å·®å¼‚git diff git diff &lt;$id1&gt; &lt;$id2&gt; # æ¯”è¾ƒä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚git diff .. # åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´æ¯”è¾ƒgit diff --staged # æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚git diff --cached # æ¯”è¾ƒæš‚å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚git diff --stat # ä»…ä»…æ¯”è¾ƒç»Ÿè®¡ä¿¡æ¯ æŸ¥çœ‹æäº¤è®°å½•git loggit log # æŸ¥çœ‹è¯¥æ–‡ä»¶æ¯æ¬¡æäº¤è®°å½•git log -p # æŸ¥çœ‹æ¯æ¬¡è¯¦ç»†ä¿®æ”¹å†…å®¹çš„diffgit log -p -2 # æŸ¥çœ‹æœ€è¿‘ä¸¤æ¬¡è¯¦ç»†ä¿®æ”¹å†…å®¹çš„diffgit log --stat #æŸ¥çœ‹æäº¤ç»Ÿè®¡ä¿¡æ¯ Tips :Macä¸Šå¯ä»¥ä½¿ç”¨ tig ä»£æ›¿ diff å’Œ log 1brew install tig å–å¾—Gitä»“åº“cdåˆ°æ”¾ç½®æ‰€åœ¨ç›®å½• 1cd &lt;$directory&gt; Cloneè¿œç¨‹ç‰ˆæœ¬åº“git clone git@xbc.me:wordpress.git æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“originï¼Œè¯­æ³•ä¸º git remote add [shortname] [url] git remote add origin git@xbc.me:wordpress.git æŸ¥çœ‹è¿œç¨‹ä»“åº“git remote -v æäº¤ä½ çš„ä¿®æ”¹æ·»åŠ å½“å‰ä¿®æ”¹çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºgit add . å¦‚æœä½ è‡ªåŠ¨è¿½è¸ªæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä½ å·²ç»æ‰‹åŠ¨åˆ é™¤çš„ï¼ŒçŠ¶æ€ä¸º Deleted çš„æ–‡ä»¶git add -u æäº¤ä½ çš„ä¿®æ”¹git commit â€“m &quot;ä½ çš„æ³¨é‡Š&quot; æ¨é€ä½ çš„æ›´æ–°åˆ°è¿œç¨‹æœåŠ¡å™¨,è¯­æ³•ä¸º git push [è¿œç¨‹å] [æœ¬åœ°åˆ†æ”¯]:[è¿œç¨‹åˆ†æ”¯] git push origin master æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€git status è·Ÿè¸ªæ–°æ–‡ä»¶git add readme.txt ä»å½“å‰è·Ÿè¸ªåˆ—è¡¨ç§»é™¤æ–‡ä»¶ï¼Œå¹¶å®Œå…¨åˆ é™¤git rm readme.txt ä»…åœ¨æš‚å­˜åŒºåˆ é™¤ï¼Œä¿ç•™æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼Œä¸å†è·Ÿè¸ªgit rm â€“cached readme.txt é‡å‘½åæ–‡ä»¶git mv reademe.txt readme æŸ¥çœ‹æäº¤çš„å†å²è®°å½•git log ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ³¨é‡Šçš„ï¼Œåˆ©ç”¨â€“amendå‚æ•°git commit --amend å¿˜è®°æäº¤æŸäº›ä¿®æ”¹ï¼Œä¸‹é¢çš„ä¸‰æ¡å‘½ä»¤åªä¼šå¾—åˆ°ä¸€ä¸ªæäº¤ã€‚git commit â€“m &quot;add readme.txt&quot; git add readme_forgotten git commit â€“amend å‡è®¾ä½ å·²ç»ä½¿ç”¨git add .ï¼Œå°†ä¿®æ”¹è¿‡çš„æ–‡ä»¶aã€båŠ åˆ°æš‚å­˜åŒºç°åœ¨ä½ åªæƒ³æäº¤aæ–‡ä»¶ï¼Œä¸æƒ³æäº¤bæ–‡ä»¶ï¼Œåº”è¯¥è¿™æ ·git reset HEAD b å–æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹git checkout â€“- readme.txt æŸ¥çœ‹ã€åˆ‡æ¢ã€åˆ›å»ºå’Œåˆ é™¤åˆ†æ”¯ branchgit br -r # æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git br &lt;new_branch&gt; # åˆ›å»ºæ–°çš„åˆ†æ”¯git br -v # æŸ¥çœ‹å„ä¸ªåˆ†æ”¯æœ€åæäº¤ä¿¡æ¯git br --merged # æŸ¥çœ‹å·²ç»è¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯git br --no-merged # æŸ¥çœ‹å°šæœªè¢«åˆå¹¶åˆ°å½“å‰åˆ†æ”¯çš„åˆ†æ”¯git co # åˆ‡æ¢åˆ°æŸä¸ªåˆ†æ”¯git co -b &lt;new_branch&gt; # åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢è¿‡å»git co -b &lt;new_branch&gt; # åŸºäºbranchåˆ›å»ºæ–°çš„new_branchgit co $id # æŠŠæŸæ¬¡å†å²æäº¤è®°å½•checkoutå‡ºæ¥ï¼Œä½†æ— åˆ†æ”¯ä¿¡æ¯ï¼Œåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ä¼šè‡ªåŠ¨åˆ é™¤git co $id -b &lt;new_branch&gt; # æŠŠæŸæ¬¡å†å²æäº¤è®°å½•checkoutå‡ºæ¥ï¼Œåˆ›å»ºæˆä¸€ä¸ªåˆ†æ”¯git br -d # åˆ é™¤æŸä¸ªåˆ†æ”¯git br -D # å¼ºåˆ¶åˆ é™¤æŸä¸ªåˆ†æ”¯ (æœªè¢«åˆå¹¶çš„åˆ†æ”¯è¢«åˆ é™¤çš„æ—¶å€™éœ€è¦å¼ºåˆ¶) åˆ†æ”¯åˆå¹¶å’Œrebasegit merge # å°†branchåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯git merge origin/master --no-ff # ä¸è¦Fast-Fowardåˆå¹¶ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆmergeæäº¤git rebase master # å°†master rebaseåˆ°branchï¼Œç›¸å½“äºï¼šgit co &amp;&amp; git rebase master &amp;&amp; git co master &amp;&amp; git merge Gitè¡¥ä¸ç®¡ç†(æ–¹ä¾¿åœ¨å¤šå°æœºå™¨ä¸Šå¼€å‘åŒæ­¥æ—¶ç”¨)git diff &gt; ../sync.patch # ç”Ÿæˆè¡¥ä¸git apply ../sync.patch # æ‰“è¡¥ä¸git apply --check ../sync.patch #æµ‹è¯•è¡¥ä¸èƒ½å¦æˆåŠŸ Gitæš‚å­˜ç®¡ç†git stash # æš‚å­˜git stash list # åˆ—æ‰€æœ‰stashgit stash apply # æ¢å¤æš‚å­˜çš„å†…å®¹git stash drop # åˆ é™¤æš‚å­˜åŒº Gitè¿œç¨‹åˆ†æ”¯ç®¡ç†git pull # æŠ“å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ°git pull --no-ff # æŠ“å–è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯æ›´æ–°å¹¶åˆå¹¶åˆ°æœ¬åœ°ï¼Œä¸è¦å¿«è¿›åˆå¹¶git fetch origin # æŠ“å–è¿œç¨‹ä»“åº“æ›´æ–°git merge origin/master # å°†è¿œç¨‹ä¸»åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ°å½“å‰åˆ†æ”¯git co --track origin/branch # è·Ÿè¸ªæŸä¸ªè¿œç¨‹åˆ†æ”¯åˆ›å»ºç›¸åº”çš„æœ¬åœ°åˆ†æ”¯git co -b &lt;local_branch&gt; origin/&lt;remote_branch&gt; # åŸºäºè¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼ŒåŠŸèƒ½åŒä¸Šgit push # pushæ‰€æœ‰åˆ†æ”¯git push origin master # å°†æœ¬åœ°ä¸»åˆ†æ”¯æ¨åˆ°è¿œç¨‹ä¸»åˆ†æ”¯git push -u origin master # å°†æœ¬åœ°ä¸»åˆ†æ”¯æ¨åˆ°è¿œç¨‹(å¦‚æ— è¿œç¨‹ä¸»åˆ†æ”¯åˆ™åˆ›å»ºï¼Œç”¨äºåˆå§‹åŒ–è¿œç¨‹ä»“åº“)git push origin &lt;local_branch&gt; # åˆ›å»ºè¿œç¨‹åˆ†æ”¯ï¼Œ originæ˜¯è¿œç¨‹ä»“åº“ågit push origin &lt;local_branch&gt;:&lt;remote_branch&gt; # åˆ›å»ºè¿œç¨‹åˆ†æ”¯git push origin :&lt;remote_branch&gt; #å…ˆåˆ é™¤æœ¬åœ°åˆ†æ”¯(git br -d )ï¼Œç„¶åå†push åˆ é™¤è¿œç¨‹åˆ†æ”¯åŸºæœ¬çš„åˆ†æ”¯ç®¡ç†åˆ›å»ºä¸€ä¸ªåˆ†æ”¯git branch dev åˆ‡æ¢å·¥ä½œç›®å½•åˆ°devgit chekcout dev å°†ä¸Šé¢çš„å‘½ä»¤åˆåœ¨ä¸€èµ·ï¼Œåˆ›å»ºdevåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°dev git chekcout â€“b dev åˆå¹¶devåˆ†æ”¯ï¼Œå½“å‰å·¥ä½œç›®å½•ä¸ºmaster git merge devåˆå¹¶å®Œæˆåï¼Œæ²¡æœ‰å‡ºç°å†²çªï¼Œåˆ é™¤devåˆ†æ”¯git branch â€“d dev æ‹‰å»è¿œç¨‹ä»“åº“çš„æ•°æ®ï¼Œè¯­æ³•ä¸º git fetch [remote-name]git fetchfetch ä¼šæ‹‰å»æœ€æ–°çš„è¿œç¨‹ä»“åº“æ•°æ®ï¼Œä½†ä¸ä¼šè‡ªåŠ¨åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œè¦è‡ªåŠ¨åˆå¹¶git pull æŸ¥çœ‹è¿œç¨‹ä»“åº“çš„ä¿¡æ¯git remote show origin å»ºç«‹æœ¬åœ°çš„devåˆ†æ”¯è¿½è¸ªè¿œç¨‹ä»“åº“çš„developåˆ†æ”¯git checkout â€“b dev origin/develop Gitè¿œç¨‹ä»“åº“ç®¡ç†git remote -v # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œä»“åº“åç§°git remote show origin # æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨ä»“åº“çŠ¶æ€git remote add origin git@ github:robbin/robbin_site.git # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€git remote set-url origin git@ github.com:robbin/robbin_site.git # è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€(ç”¨äºä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€)git remote rm &lt;repository&gt; # åˆ é™¤è¿œç¨‹ä»“åº“ åˆ›å»ºè¿œç¨‹ä»“åº“git clone --bare robbin_site robbin_site.git # ç”¨å¸¦ç‰ˆæœ¬çš„é¡¹ç›®åˆ›å»ºçº¯ç‰ˆæœ¬ä»“åº“scp -r my_project.git git@ git.csdn.net:~ # å°†çº¯ä»“åº“ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šmkdir robbin_site.git &amp;&amp; cd robbin_site.git &amp;&amp; git --bare init # åœ¨æœåŠ¡å™¨åˆ›å»ºçº¯ä»“åº“git remote add origin git@ github.com:robbin/robbin_site.git # è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€git push -u origin master # å®¢æˆ·ç«¯é¦–æ¬¡æäº¤git push -u origin develop # é¦–æ¬¡å°†æœ¬åœ°developåˆ†æ”¯æäº¤åˆ°è¿œç¨‹developåˆ†æ”¯ï¼Œå¹¶ä¸”track git remote set-head origin master # è®¾ç½®è¿œç¨‹ä»“åº“çš„HEADæŒ‡å‘masteråˆ†æ”¯ ä¹Ÿå¯ä»¥å‘½ä»¤è®¾ç½®è·Ÿè¸ªè¿œç¨‹åº“å’Œæœ¬åœ°åº“git branch --set-upstream master origin/master git branch --set-upstream develop origin/develop å—~~ ç¡äº†ç¡äº† git sleep ~`","link":"/posts/b48aecb5/"},{"title":"CSS-åª’ä½“æŸ¥è¯¢","text":"è§†å£ï¼ˆviewportï¼‰å½“æˆ‘ä»¬ä¸åŠ è§†å£çš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿç§»åŠ¨ç«¯ï¼Œbodyçš„å®½åº¦é»˜è®¤æ˜¯980px,å¹¶ä¸æ˜¯æ‰‹æœºå±å¹•çš„å®½åº¦ï¼Œå¦‚æœæƒ³è¦æŠŠé¡µé¢åœ¨æ‰‹æœºå±å¹•ä¸­æ˜¾ç¤ºå®Œå…¨ï¼Œå°±ä¼šè¿›è¡Œç¼©æ”¾ï¼Œè¿™æ ·çš„è¯ï¼Œé‡Œé¢çš„æ–‡å­—ç­‰å°±ä¼šçœ‹ä¸æ¸…æ¥šï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œé€šå¸¸éƒ½ä¼šåŠ è§†å£ï¼Œè®©é¡µé¢çš„å®½åº¦ç­‰äºæ‰‹æœºå±å¹•çš„å®½åº¦ã€‚ 1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; åª’ä½“æŸ¥è¯¢@media é’ˆå¯¹ä¸åŒåª’ä½“ç±»å‹å¯ä»¥å®šåˆ¶ä¸åŒçš„æ ·å¼è§„åˆ™ã€‚ ä¾‹å¦‚ï¼šä½ å¯ä»¥é’ˆå¯¹ä¸åŒçš„åª’ä½“ç±»å‹(åŒ…æ‹¬æ˜¾ç¤ºå™¨ã€ä¾¿æºè®¾å¤‡ã€ç”µè§†æœºï¼Œç­‰ç­‰)è®¾ç½®ä¸åŒçš„æ ·å¼è§„åˆ™ã€‚ ä½†æ˜¯è¿™äº›å¤šåª’ä½“ç±»å‹åœ¨å¾ˆå¤šè®¾å¤‡ä¸Šæ”¯æŒè¿˜ä¸å¤Ÿå‹å¥½ã€‚ @media not|only mediatype and (expressions) { CSS ä»£ç â€¦; } åª’ä½“ç±»å‹ all ç”¨äºæ‰€æœ‰è®¾å¤‡ print ç”¨äºæ‰“å°æœºå’Œæ‰“å°é¢„è§ˆ screen ç”¨äºç”µè„‘å±å¹•ï¼Œå¹³æ¿ç”µè„‘ï¼Œæ™ºèƒ½æ‰‹æœºç­‰ã€‚ speech åº”ç”¨äºå±å¹•é˜…è¯»å™¨ç­‰å‘å£°è®¾å¤‡ è¿˜æœ‰ä¸€äº›å·²ç»åºŸå¼ƒçš„ç±»å‹å°±ä¸å†åˆ—ä¸¾äº† åª’ä½“åŠŸèƒ½ aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ä¸é«˜åº¦çš„æ¯”ç‡ color å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„ä¸ªæ•°ã€‚å¦‚æœä¸æ˜¯å½©è‰²è®¾å¤‡ï¼Œåˆ™å€¼ç­‰äº0 color-index å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æ¡ç›®æ•°ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨å½©è‰²æŸ¥è¯¢è¡¨ï¼Œåˆ™å€¼ç­‰äº0 device-aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æ¯”ç‡ã€‚ device-height å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§é«˜åº¦ã€‚ device-width å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ã€‚ grid ç”¨æ¥æŸ¥è¯¢è¾“å‡ºè®¾å¤‡æ˜¯å¦ä½¿ç”¨æ …æ ¼æˆ–ç‚¹é˜µã€‚ height å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸé«˜åº¦ã€‚ max-aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å¤§æ¯”ç‡ã€‚ max-color å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„æœ€å¤§ä¸ªæ•°ã€‚ max-color-index å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æœ€å¤§æ¡ç›®æ•°ã€‚ max-device-aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å¤§æ¯”ç‡ã€‚ max-device-height å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§çš„æœ€å¤§é«˜åº¦ã€‚ max-device-width å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•æœ€å¤§å¯è§å®½åº¦ã€‚ max-height å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å¤§å¯è§åŒºåŸŸé«˜åº¦ã€‚ max-monochrome å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„æœ€å¤§å•è‰²åŸä»¶ä¸ªæ•°ã€‚ max-resolution å®šä¹‰è®¾å¤‡çš„æœ€å¤§åˆ†è¾¨ç‡ã€‚ max-width å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å¤§å¯è§åŒºåŸŸå®½åº¦ã€‚ min-aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ä¸é«˜åº¦çš„æœ€å°æ¯”ç‡ã€‚ min-color å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„æœ€å°ä¸ªæ•°ã€‚ min-color-index å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æœ€å°æ¡ç›®æ•°ã€‚ min-device-aspect-ratio å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å°æ¯”ç‡ã€‚ min-device-width å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•æœ€å°å¯è§å®½åº¦ã€‚ min-device-height å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•çš„æœ€å°å¯è§é«˜åº¦ã€‚ min-height å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å°å¯è§åŒºåŸŸé«˜åº¦ã€‚ min-monochrome å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„æœ€å°å•è‰²åŸä»¶ä¸ªæ•° min-resolution å®šä¹‰è®¾å¤‡çš„æœ€å°åˆ†è¾¨ç‡ã€‚ min-width å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å°å¯è§åŒºåŸŸå®½åº¦ã€‚ monochrome å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„å•è‰²åŸä»¶ä¸ªæ•°ã€‚å¦‚æœä¸æ˜¯å•è‰²è®¾å¤‡ï¼Œåˆ™å€¼ç­‰äº0 orientation å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸé«˜åº¦æ˜¯å¦å¤§äºæˆ–ç­‰äºå®½åº¦ã€‚ resolution å®šä¹‰è®¾å¤‡çš„åˆ†è¾¨ç‡ã€‚å¦‚ï¼š96dpi, 300dpi, 118dpcm scan å®šä¹‰ç”µè§†ç±»è®¾å¤‡çš„æ‰«æå·¥åºã€‚ width å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ã€‚ ç›´æ¥ä¸Šä»£ç  åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹1 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; *{ margin:0;padding:0; } .box{ width:200px; height:200px; background:green; } /* å½“å±å¹•çš„å®½åº¦å°äº600pxçš„æ—¶å€™ï¼Œæˆ‘å°±è®©.box è¿™ä¸ªç›’å­èƒŒæ™¯é¢œè‰²pink */ @media screen and (max-width:600px){ .box{ background:pink; } } @media screen and (min-width:700px){ .box{ background:gold; } } /* å¤§äºç­‰300 å°äºç­‰äº800 */ @media screen and (min-width:300px) and (max-width:800){ } /* éœ€æ±‚ï¼šå°äº768pxçš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² å¤§äº768åˆ°1200 æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² å¤§äº1200çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² */ &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹2 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; *{ margin:0;padding:0; } .box{ width:200px; height:200px; background:green; } @media screen and (max-width:768px){ .box{ background:pink; } } @media screen and (min-width:769px) and (max-width:1200px){ .box{ background:gold; } } @media screen and (min-width:1201px){ .box{ background:darkseagreen; } } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- /* éœ€æ±‚ï¼šå°äº768pxçš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² å¤§äº768åˆ°1200 æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² å¤§äº1200çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² */ --&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹3 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; *{ margin:0; padding:0; } ul,ol{ list-style: none; } .box&gt;li{ width:12.5%; height:50px; text-align: center; line-height: 50px; border:1px solid lightgreen; float:left; box-sizing:border-box; } /* å¤§äºç­‰äº1200 çš„æ—¶å€™æ˜¾ç¤º8ä¸ª å¤§äºç­‰äº900 å°äº1200çš„æ—¶å€™æ˜¾ç¤º4ä¸ª å¤§äºç­‰äº768px å°äº900çš„æ—¶å€™æ˜¾ç¤º2ä¸ª å°äº768px çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ª */ @media screen and (min-width:1200px){ .box&gt;li{ width:12.5%; } } @media screen and (min-width:900px) and (max-width:1199px){ .box&gt;li{ width:25%; } } @media screen and (min-width:768px) and (max-width:899px){ .box&gt;li{ width:50%; } } @media screen and (max-width:767px){ .box&gt;li{ width:100%; } } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;ul class=&quot;box&quot;&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt; &lt;li&gt;6&lt;/li&gt; &lt;li&gt;7&lt;/li&gt; &lt;li&gt;8&lt;/li&gt; &lt;/ul&gt;&lt;/body&gt;&lt;/html&gt;","link":"/posts/762ab198/"},{"title":"CSS3-flexå¸ƒå±€","text":"1ã€ flex å¸ƒå±€çš„å‡ºç° å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– display å±æ€§ + position å±æ€§ + float å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚2009å¹´ï¼ŒW3Cæå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flexå¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚ 2ã€flexå¸ƒå±€çš„å…¼å®¹æ€§é—®é¢˜æ³¨æ„ï¼šè®¾ä¸ºFlexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚ 3ã€flex å¸ƒå±€çš„å®šä¹‰Flexæ˜¯Flexible Boxçš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚flex å¸ƒå±€æœ‰ä¸¤ä¸ªå€¼ï¼š display: flex; ä»£è¡¨çš„æ˜¯å—çº§ display: inline-flex; ä»£è¡¨çš„æ˜¯è¡Œå†…å— ä¸‹é¢çš„ä¾‹å­è¯æ˜ï¼Œdisplay:flex; çš„æ—¶å€™ï¼Œä¸¤ä¸ªdivæ˜¯ä¸Šä¸‹æ’åˆ—çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯displayï¼šinline-flex; çš„æ—¶å€™æ˜¯å·¦å³æ’åˆ—çš„ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style&gt; /* flex å¸ƒå±€æœ‰ä¸¤ä¸ªå€¼ï¼š display:flex;ä»£è¡¨çš„æ˜¯å—çº§ display:inline-flex;ä»£è¡¨çš„æ˜¯è¡Œå†…å— */ *{ margin:0; padding:0; } .box1{ width: 100px; height: 100px; background:green; display:inline-flex; } .box2{ width: 100px; height: 100px; background:pink; display:inline-flex; }&lt;/style&gt;&lt;/head&gt; &lt;body&gt; &lt;div class=&quot;box1&quot;&gt;box1&lt;/div&gt; &lt;div class=&quot;box2&quot;&gt;box2&lt;/div&gt;&lt;/body&gt; &lt;/html&gt; 4ã€flex å¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µé‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚ å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹)å«åšmain startï¼Œç»“æŸä½ç½®å«åšmain endï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åšcross startï¼Œç»“æŸä½ç½®å«åšcross endã€‚ 5ã€å®¹å™¨çš„å±æ€§ flex-direction flex-wrap flex-flow justify-content align-items align-content 5.1 flex-directionå±æ€§:è®¾ç½®ä¸»è½´çš„æ–¹å‘ rowï¼šä¸»è½´çš„æ–¹å‘æ˜¯æ°´å¹³ï¼Œä»ä»å·¦åˆ°å³ columnï¼šä¸»è½´çš„æ–¹å‘æ˜¯å‚ç›´çš„ï¼Œä»ä¸Šåˆ°ä¸‹ row-reverseï¼šä¸»è½´çš„æ–¹å‘æ˜¯æ°´å¹³ï¼Œä»å³åˆ°å·¦ column-reverseï¼šä¸»è½´çš„æ–¹å‘æ˜¯å‚ç›´çš„ï¼Œä»ä¸‹åˆ°ä¸Š 12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style&gt; *{ margin:0;padding:0; } ul,ol{ list-style: none; } ul{ display:flex; /* flex-direction: row; */ /* flex-direction: column; */ /* flex-direction: row-reverse; */ flex-direction: column-reverse; } ul&gt;li{ width:100px; height:100px; background:green; margin-left:10px; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt; &lt;li&gt;6&lt;/li&gt; &lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; 5.2 flex-wrap: wrap: æ¢è¡Œ nowrap: ä¸æ¢è¡Œï¼ˆé»˜è®¤ï¼‰ wrap-reverseï¼šæ¢è¡Œï¼Œä¸è¿‡ç¬¬ä¸€è¡Œåœ¨æœ€ä¸‹é¢ 5.3 flex-flowflex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrapã€‚ flex-flow: row wrap; å†™äº†è¿™ä¸ªä¹‹åï¼Œä¸‹é¢çš„æ¡ˆä¾‹æ•ˆæœè·Ÿä¸Šä¸€ä¸ªä¸€æ · 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;&lt;title&gt;flex-flow&lt;/title&gt;&lt;style&gt; * { margin:0; padding:0; } /* flex-flow æ˜¯flex-direction å’Œflex-wrap çš„ç®€å†™ */ ul,ol { list-style: none; } ul { display: flex; flex-flow: row wrap } ul&gt;li { width: 400px; height: 400px; background: green; margin-left: 10px; margin-bottom: 10px; }&lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt; &lt;li&gt;6&lt;/li&gt; &lt;li&gt;7&lt;/li&gt; &lt;/ul&gt;&lt;/body&gt;&lt;/html&gt; 5.4 justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚justify-content: flex-start | flex-end | center | space-between | space-around| space-evenly ; â€‹ space-evenly 5.5 align-itemså±æ€§ï¼šalign-itemså±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚ align-items: flex-start | flex-end | center | baseline | stretch;stretchï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚ 5.6 align-contentå±æ€§align-contentå±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´å¾—æœ‰é¡¹ç›®æ¢è¡Œï¼‰align-content: flex-start | flex-end | center | space-between | space-around | stretch; 6ã€é¡¹ç›®çš„å±æ€§ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚ order flex-grow flex-shrink flex-basis flex align-self 6.1 orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚ 6.2 flex-growå±æ€§flex-growå±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚ å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-growå±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯)ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-growå±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚ 123.item { flex-grow: &lt;number&gt;; /* default 0 */} 6.3 flex-shrinkå±æ€§flex-shrinkå±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚ 123.item { flex-shrink: &lt;number&gt;; /* default 1 */} å¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚ 6.4 flex-basiså±æ€§flex-basiså±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚å®ƒå¯ä»¥è®¾ä¸ºè·Ÿwidthæˆ–heightå±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚ 123.item { flex-basis: &lt;length&gt; | auto; /* default auto */} 6.5 flexå±æ€§flexå±æ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚ 123.item { flex: none | [ &lt;'flex-grow'&gt; &lt;'flex-shrink'&gt;? || &lt;'flex-basis'&gt; ]} flexï¼š0 1 autoï¼›é»˜è®¤å€¼flexï¼šnoneï¼› ä»£è¡¨çš„æ„æ€ç­‰åŒäº flexï¼š0 0 autoï¼›flexï¼šautoï¼›ä»£è¡¨çš„æ„æ€æ˜¯flexï¼š1 1 autoï¼›flexï¼šnumberï¼›å½“flexå–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™è¯¥æ•°å­—ä¸ºflex-growçš„å€¼ï¼Œflex-shrinkçš„å€¼ä¸º1ï¼Œflex-basisçš„å€¼ä¸º0%ï¼› 6.6 align-selfå±æ€§align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚ 123.item { align-self: auto | flex-start | flex-end | center | baseline | stretch;}","link":"/posts/ca7f6989/"},{"title":"CSSä¸¤ç§ç»å…¸å¸ƒå±€","text":"ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½1. å®šä½ï¼šposition static é™æ€å®šä½ relative ç›¸å¯¹å®šä½ absolute ç»å¯¹å®šä½ fixed å›ºå®šå®šä½ 1.1 ç›¸å¯¹å®šä½1234+ æ²¡æœ‰è„±ç¦»æ–‡æ¡£æµï¼Œä½ç½®è¿˜åœ¨+ å±‚çº§é«˜äºæ™®é€šæ–‡æ¡£æµ+ ç»™ç»å¯¹å®šä½çš„å…ƒç´ åšå‚ç…§ç‰©+ ç›¸å¯¹è‡ªèº« 1.2 ç»å¯¹å®šä½12345678+ è„±ç¦»æ–‡æ¡£æµ+ å±‚çº§é«˜äºæ™®é€šæ–‡æ¡£æµçš„å±‚çº§+ ç»å¯¹å®šä½çš„å…ƒç´ åœ¨è®¾ç½®å‚ç…§ç‰©çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯åŒ…å«å…³ç³»çš„ä¸Šçº§å…ƒç´ + æµè§ˆå™¨åœ¨å¯»æ‰¾å‚ç…§ç‰©çš„æ—¶å€™æ˜¯æŒ‰ç…§å°±è¿‘åŸåˆ™è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœéƒ½æ²¡æœ‰è®¾ç½®ï¼Œé‚£å®ƒçš„å‚ç…§ç‰©å°±æ˜¯body+ åŸæœ¬å®½åº¦å¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯å®šä½çš„å…ƒç´ ï¼Œå®½åº¦ä¸å†ç»§æ‰¿äº†ï¼Œæ˜¯ç”±è‡ªèº«å†…å®¹å†³å®šçš„ã€‚å¦‚æœæ˜¯è¡Œå†…å…ƒç´ ï¼Œå®šä½ä¹‹åï¼Œå®½ã€é«˜ä¹Ÿå¯ä»¥èµ·ä½œç”¨ã€‚+ å¦‚æœç»™ç»å¯¹å®šä½å…ƒç´ çš„å®½åº¦è®¾ç½®ç™¾åˆ†æ¯”çš„æ—¶å€™ï¼Œé‚£å®ƒæ˜¯ç›¸å¯¹ä½ å‚ç…§ç‰©æ¥è¯´çš„ï¼Œå¹¶ä¸æ˜¯çˆ¶çº§ã€‚ç»å¯¹å®šä½çš„å‚ç…§ç‰©ï¼špositionï¼šrelativeæˆ–è€…position:absoluteã€position:fixed ,åªè¦æ˜¯ä¸‰è€…ä¹‹ä¸€å³å¯ã€‚ 1.3 å›ºå®šå®šä½12+ å›ºå®šå®šä½æ˜¯ç›¸å¯¹äºæ•´ä¸ªé¡µé¢çª—å£çš„+ CSS3ä¸­å¯ä½¿ç”¨transfromæ”¹å˜å›ºå®šå®šä½çš„å‚ç…§å…ƒç´  2. å¦‚ä½•åˆ©ç”¨å®šä½positionè®©ä¸€ä¸ªå…ƒç´ åœ¨æ•´ä¸ªå±å¹•æˆ–è€…æ˜¯ä¸€ä¸ªç›’å­ä¸­æ°´å¹³å‚ç›´å±…ä¸­123456789101112131415161718è®©è¿™ä¸ªå…ƒç´  positionï¼šabsoluteï¼›+ leftï¼š50%ï¼› topï¼š50%ï¼›+ margin-left: è´Ÿçš„ç›’å­å®½çš„ä¸€åŠï¼›+ margin-top: è´Ÿçš„ç›’å­é«˜åº¦çš„ä¸€åŠ&lt;style&gt; .box{ width:200px; height:200px; background:green; position: absolute; left:50%; top:50%; margin-left:-100px; margin-top:-100px; }&lt;/style&gt; 3. ä¸¤ç§ç»å…¸å¸ƒå±€ï¼š3.1 åœ£æ¯å¸ƒå±€ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; *{ margin: 0; padding: 0; } body { min-width: 600px; } .wrap { height: 500px; padding: 0 200px; box-sizing: border-box; } .wrap&gt;div { height: 100%; float: left; } .main { width: 100%; background-color: darkgreen; } .left { width: 200px; background-color: darkkhaki; margin-left: -100%; position: relative; left: -200px; top: 0; } .right { width: 200px; background-color: lightsalmon; margin-left: -200px; position: relative; left: 200px; top:0; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;wrap&quot;&gt; &lt;div class=&quot;main&quot;&gt;ä¸»ä½“&lt;/div&gt; &lt;div class=&quot;left&quot;&gt;å·¦&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 3.2 åŒé£ç¿¼å¸ƒå±€:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style&gt; * { margin: 0; padding: 0; } body { min-width: 600px; } .wrap { height: 500px; } .wrap div { height: 100%; } .wrap&gt;div { float: left; } .main { width: 100%; background-color: darkkhaki; padding: 0 200px; box-sizing: border-box; } .main&gt;.inner { background-color: darkseagreen; } .left { width: 200px; background-color: saddlebrown; margin-left: -100%; } .right { width: 200px; background-color: darkorange; margin-left: -200px; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;wrap&quot;&gt; &lt;div class=&quot;main&quot;&gt; &lt;div class=&quot;inner&quot;&gt;inner&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;","link":"/posts/a3150240/"},{"title":"ES6-Proxy","text":"åœ¨å³å°†åˆ°æ¥çš„Vue3.0ä¸­ï¼ŒVueæ•°æ®çš„å“åº”å¼ç³»ç»Ÿé‡‡ç”¨äº†ES6çš„Proxyæ¥ä»£æ›¿Object.defineProperty Object.defineProperty ï¼šå…¼å®¹ä¸»æµæµè§ˆå™¨å’Œie9ä»¥ä¸Šçš„ieæµè§ˆå™¨ï¼Œèƒ½å¤Ÿç›‘å¬æ•°æ®å¯¹è±¡çš„å˜åŒ–ï¼Œä½†æ˜¯ç›‘å¬ä¸åˆ°å¯¹è±¡å±æ€§çš„å¢åˆ ã€æ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„å˜åŒ–ï¼ŒåŒæ—¶ä¼šåœ¨vueåˆå§‹åŒ–çš„æ—¶å€™æŠŠæ‰€æœ‰çš„Observeréƒ½å»ºç«‹å¥½ï¼Œæ‰èƒ½è§‚å¯Ÿåˆ°æ•°æ®å¯¹è±¡å±æ€§çš„å˜åŒ–ã€‚ Proxy : å¯ä»¥åšåˆ°ç›‘å¬å¯¹è±¡å±æ€§çš„å¢åˆ å’Œæ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„ä¿®æ”¹ï¼Œè¿˜å¯ä»¥ç›‘å¬Mapã€Setã€WeakSetã€WeakMapï¼ŒåŒæ—¶è¿˜å®ç°äº†æƒ°æ€§çš„ç›‘å¬ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ›å»ºæ‰€æœ‰çš„Observerï¼Œè€Œæ˜¯ä¼šåœ¨ç”¨åˆ°çš„æ—¶å€™æ‰å»ç›‘å¬ã€‚ Proxyè¯­æ³•ï¼šProxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚ 1const p = new Proxy(target, handler) å‚æ•°ï¼š target : è¦ä½¿ç”¨ Proxy åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚ handler: ä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç† p çš„è¡Œä¸ºã€‚ Proxy â€“ api: 12Proxy.revocable()// åˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„Proxyå¯¹è±¡ã€‚ handler å¯¹è±¡çš„æ–¹æ³• å¯¹è±¡æ˜¯ä¸€ä¸ªå®¹çº³ä¸€æ‰¹ç‰¹å®šå±æ€§çš„å ä½ç¬¦å¯¹è±¡ã€‚å®ƒåŒ…å«æœ‰ Proxy çš„å„ä¸ªæ•è·å™¨ï¼ˆtrapï¼‰ã€‚ æ‰€æœ‰çš„æ•æ‰å™¨æ˜¯å¯é€‰çš„ã€‚å¦‚æœæ²¡æœ‰å®šä¹‰æŸä¸ªæ•æ‰å™¨ï¼Œé‚£ä¹ˆå°±ä¼šä¿ç•™æºå¯¹è±¡çš„é»˜è®¤è¡Œä¸ºã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940// Proxy æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€è§ˆï¼Œä¸€å…± 13 ç§ã€‚ get(target, propKey, receiver)ï¼š // æ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œ æ¯”å¦‚proxy.fooå’Œproxy['foo']ã€‚ set(target, propKey, value, receiver)ï¼š // æ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œ æ¯”å¦‚proxy.foo = væˆ–proxy['foo'] = vï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ has(target, propKey)ï¼š // æ‹¦æˆªpropKey in proxyçš„æ“ä½œï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ deleteProperty(target, propKey)ï¼š // æ‹¦æˆªdelete proxy[propKey] çš„æ“ä½œï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ownKeys(target):// æ‹¦æˆªObject.getOwnPropertyNames(proxy)ã€Object.getOwnPropertySymbols(proxy)ã€Object.keys(proxy)ã€for...inå¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€ŒObject.keys()çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚ getOwnPropertyDescriptor(target, propKey)ï¼š // æ‹¦æˆªObject.getOwnPropertyDescriptor(proxy, propKey)ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚ defineProperty(target, propKey, propDesc)ï¼š // æ‹¦æˆªObject.defineProperty(proxy, propKey, propDescï¼‰ã€Object.defineProperties(proxy, propDescs)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ preventExtensions(target)ï¼š // æ‹¦æˆªObject.preventExtensions(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ getPrototypeOf(target)ï¼š // æ‹¦æˆªObject.getPrototypeOf(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ isExtensible(target)ï¼š // æ‹¦æˆªObject.isExtensible(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ setPrototypeOf(target, proto)ï¼š // æ‹¦æˆªObject.setPrototypeOf(proxy, proto)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚ apply(target, object, args)ï¼š // æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚proxy(...args)ã€proxy.call(object, ...args)ã€proxy.apply(...)ã€‚ construct(target, args)ï¼š// æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚new proxy(...args)ã€‚ å…³äº Refect Reflectå¯¹è±¡ä¸Proxyå¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ ES6 ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° API Reflectä¸Proxy--handlerå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„; å…³äºReflectçš„è¯¦æƒ…äº†è§£ ç‚¹å‡»äº†è§£ES6 =&gt; Reflect get() ä¸ set() get=&gt; æ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œï¼Œå¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åå’Œ proxy å®ä¾‹æœ¬èº«ï¼ˆä¸¥æ ¼åœ°è¯´ï¼Œæ˜¯æ“ä½œè¡Œä¸ºæ‰€é’ˆå¯¹çš„å¯¹è±¡ï¼‰ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚ set =&gt; æ–¹æ³•ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œï¼Œå¯ä»¥æ¥å—å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åã€å±æ€§å€¼å’Œ Proxy å®ä¾‹æœ¬èº«ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637// new Proxy(target, handler);// target ==&gt; è¦è¿›è¡Œæ‹¦æˆªçš„å¯¹è±¡// handler ==&gt; è¦æ±‚æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šåˆ¶æ‹¦æˆªçš„è¡Œä¸ºï¼ŒåŠé€»è¾‘å¤„ç†// å¦‚æœhandleræ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•çš„æ‹¦æˆªå¤„ç†ï¼Œè®¿é—® py è¿™ä¸ªå®ä¾‹æ•ˆæœåŒäºè®¿é—® targetã€‚let obj = { name: &quot;Proxy&quot;,};let py = new Proxy(obj, { get(target, key, example) { // target =&gt; obj:{name:&quot;Proxy&quot;} // key =&gt; æ¯æ¬¡è¦è·å–çš„å±æ€§å propKey // example =&gt; å½“å‰ py è¿™ä¸ªå®ä¾‹ return Reflect.get(target, key); // return &quot;default&quot;; æ¯æ¬¡éƒ½ä¼šè·å–åˆ°å›ºå®šè¿”å›å€¼ }, set(target, key, newValue, example) { // console.log(target, key, value, example); // newValue =&gt; å°†è¦è®¾ç½®çš„æ–°å€¼ if (Reflect.get(target, key) !== newValue) { Reflect.set(target, key, newValue); } }});// getconsole.log(py.name); //=&gt; &quot;Proxy&quot;console.log(py.age); //=&gt; undefined// setpy.age = &quot;20&quot;;py.name = &quot;newProxy&quot;;console.log(py);console.log(obj); Proxy å®ä¾‹ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚1234567891011121314let py = new Proxy({}, { get(target, key, example) { // if (key === &quot;__proto__&quot;) return example; return &quot;default&quot;; }, set(target, key, newValue) { Reflect.set(target, key, newValue); }});let obj = Object.create(py);console.log(obj.df); //=&gt; &quot;default&quot;console.log(obj.__proto__); //=&gt; &quot;default&quot;console.log(obj.prototype); //=&gt; &quot;default&quot; é˜®ä¸€å³°ES6-Proxy æ–‡æ¡£ä¸­ï¼Œä½¿ç”¨getæ‹¦æˆªï¼Œå®ç°æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼• 123456789101112131415161718function createArray(...elements) { let handler = { get(target, propKey, receiver) { let index = Number(propKey); if (index &lt; 0) { propKey = String(target.length + index); } return Reflect.get(target, propKey, receiver); } }; let target = []; target.push(...elements); return new Proxy(target, handler);}let arr = createArray('a', 'b', 'c');arr[-1] // ==&gt; c ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„çš„ä½ç½®å‚æ•°æ˜¯-1ï¼Œå°±ä¼šè¾“å‡ºæ•°ç»„çš„å€’æ•°ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚ åˆ©ç”¨ Proxyï¼Œå¯ä»¥å°†è¯»å–å±æ€§çš„æ“ä½œï¼ˆgetï¼‰ï¼Œè½¬å˜ä¸ºæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä»è€Œå®ç°å±æ€§çš„é“¾å¼æ“ä½œã€‚ 12345678910111213141516171819202122var pipe = function (value) { var funcStack = []; var oproxy = new Proxy({}, { get: function (pipeObject, fnName) { if (fnName === 'get') { return funcStack.reduce(function (val, fn) { return fn(val); },value); } funcStack.push(window[fnName]); return oproxy; } }); return oproxy;}var double = n =&gt; n * 2;var pow = n =&gt; n * n;var reverseInt = n =&gt; n.toString().split(&quot;&quot;).reverse().join(&quot;&quot;) | 0;pipe(3).double.pow.reverseInt.get; // ==&gt; 63 ä¸Šé¢ä»£ç è®¾ç½® Proxy ä»¥åï¼Œè¾¾åˆ°äº†å°†å‡½æ•°åé“¾å¼ä½¿ç”¨çš„æ•ˆæœã€‚ å®ä¾‹ï¼šä½¿ç”¨ Proxy å®ç°è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver modeï¼‰æŒ‡çš„æ˜¯å‡½æ•°è‡ªåŠ¨è§‚å¯Ÿæ•°æ®å¯¹è±¡ï¼Œä¸€æ—¦å¯¹è±¡æœ‰å˜åŒ–ï¼Œå‡½æ•°å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ 12345678910111213const person = observable({ name: 'å¼ ä¸‰', age: 20});function print() { console.log(`${person.name}, ${person.age}`)}observe(print);person.name = 'æå››';// è¾“å‡º// æå››, 20 ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°æ®å¯¹è±¡personæ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œå‡½æ•°printæ˜¯è§‚å¯Ÿè€…ã€‚ä¸€æ—¦æ•°æ®å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œprintå°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ ä¸‹é¢ï¼Œä½¿ç”¨ Proxy å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„æœ€ç®€å•å®ç°ï¼Œå³å®ç°observableå’Œobserveè¿™ä¸¤ä¸ªå‡½æ•°ã€‚æ€è·¯æ˜¯observableå‡½æ•°è¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„ Proxy ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œè§¦å‘å……å½“è§‚å¯Ÿè€…çš„å„ä¸ªå‡½æ•°ã€‚ 12345678910const queuedObservers = new Set();const observe = fn =&gt; queuedObservers.add(fn);const observable = obj =&gt; new Proxy(obj, {set});function set(target, key, value, receiver) { const result = Reflect.set(target, key, value, receiver); queuedObservers.forEach(observer =&gt; observer()); return result;} ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ªSeté›†åˆï¼Œæ‰€æœ‰è§‚å¯Ÿè€…å‡½æ•°éƒ½æ”¾è¿›è¿™ä¸ªé›†åˆã€‚ç„¶åï¼Œobservableå‡½æ•°è¿”å›åŸå§‹å¯¹è±¡çš„ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œã€‚æ‹¦æˆªå‡½æ•°setä¹‹ä¸­ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è§‚å¯Ÿè€…ã€‚ äº†è§£æ›´å¤šçš„å®ä¾‹ä»‹ç»ï¼Œå’Œå…¶ä»–æ‹¦æˆªæ“ä½œçš„æ–¹æ³•ä»‹ç» =&gt; ES6-Proxy","link":"/posts/adb531e4/"},{"title":"ES6-Reflect","text":"ç®€å•äº†è§£Reflect12console.log(new Reflect); // Error ==&gt; Reflect is not a constructor// =&gt; è™½ç„¶æ˜¯å¤§å†™å¼€å¤´ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œä¸å¯ä»¥è¢«newï¼› æ¦‚è¿°ï¼š å°†Objectå¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.definePropertyï¼‰ï¼Œæ”¾åˆ°Reflectå¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨Objectå’ŒReflectå¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨Reflectå¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»Reflectå¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚ ä¿®æ”¹æŸäº›Objectæ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼ŒObject.defineProperty(obj, name, desc)åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€ŒReflect.defineProperty(obj, name, desc)åˆ™ä¼šè¿”å›falseã€‚ è®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›Objectæ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚name in objå’Œdelete obj[name]ï¼Œè€ŒReflect.has(obj, name)å’ŒReflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚123456789let obj = { a: 1, b: 2};&quot;a&quot; in obj // =&gt; true ä¹‹å‰çš„æ—§è¯­æ³•ï¼Œç”¨å…³é”®å­— in åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå¯¹è±¡Reflect.has(obj, &quot;a&quot;); // =&gt; true Reflect.has(); å‡½æ•°å½¢å¼çš„æ–°è¯­æ³•ï¼Œä½œç”¨ç­‰åŒäºä¸Š// åˆ—å¦‚ï¼šè¿˜æœ‰åƒåˆ é™¤å±æ€§çš„å…³é”®å­— delete obj[key] ==&gt; Reflect.deleteProperty(obj,key); Reflectå¯¹è±¡çš„æ–¹æ³•ä¸Proxyå¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯Proxyå¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨Reflectå¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©Proxyå¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡Proxyæ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨Reflectä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚ ç®€å•ç²—æš´ï¼šç›´æ¥æ‰“å°å®ƒ12345678910111213141516171819console.log(Reflect); // çœå¼ å›¾ç‰‡ï¼Œæ§åˆ¶å°ç»“æœç²˜è¿‡æ¥{defineProperty: Æ’, deleteProperty: Æ’, apply: Æ’, construct: Æ’, get: Æ’, â€¦}apply: Æ’ apply()construct: Æ’ construct()defineProperty: Æ’ defineProperty()deleteProperty: Æ’ deleteProperty()get: Æ’ ()getOwnPropertyDescriptor: Æ’ getOwnPropertyDescriptor()getPrototypeOf: Æ’ getPrototypeOf()has: Æ’ has()isExtensible: Æ’ isExtensible()ownKeys: Æ’ ownKeys()preventExtensions: Æ’ preventExtensions()set: Æ’ ()setPrototypeOf: Æ’ setPrototypeOf()__proto__: Object... Reflectå¯¹è±¡ç›®å‰ä¸€å…±æœ‰ 13 ä¸ªé™æ€æ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738Reflect.apply(target, thisArg, args) //=&gt; Reflect.applyæ–¹æ³•ç­‰åŒäºFunction.prototype.apply.call(func, thisArg, args)ï¼Œç”¨äºç»‘å®šthiså¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè¦ç»‘å®šä¸€ä¸ªå‡½æ•°çš„thiså¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·å†™fn.apply(obj, args)ï¼Œä½†æ˜¯å¦‚æœå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„applyæ–¹æ³•ï¼Œå°±åªèƒ½å†™æˆFunction.prototype.apply.call(fn, obj, args)ï¼Œé‡‡ç”¨Reflectå¯¹è±¡å¯ä»¥ç®€åŒ–è¿™ç§æ“ä½œã€‚Reflect.construct(target, args) //=&gt; ä»¥ new æ–¹å¼å»æ‰§è¡Œä¸€ä¸ªæ„é€ å‡½æ•° new Fn() ==&gt; Reflect.construct(Fn,å®å‚)Reflect.get(target, name, receiver) //=&gt; è·å–å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å€¼ ==&gt; obj.keyReflect.set(target, name, value, receiver) //=&gt; è®¾ç½®å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å€¼ ==&gt; obj.key = &quot;new value&quot;Reflect.defineProperty(target, name, desc) // =&gt; Reflect.definePropertyæ–¹æ³•åŸºæœ¬ç­‰åŒäºObject.definePropertyï¼Œç”¨æ¥ä¸ºå¯¹è±¡å®šä¹‰å±æ€§ã€‚æœªæ¥ï¼Œåè€…ä¼šè¢«é€æ¸åºŸé™¤ï¼Œè¯·ä»ç°åœ¨å¼€å§‹å°±ä½¿ç”¨Reflect.definePropertyä»£æ›¿å®ƒã€‚Reflect.deleteProperty(target, name) // =&gt; Reflect.deletePropertyæ–¹æ³•ç­‰åŒäºdelete obj[name]ï¼Œç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚Reflect.has(target, name) // =&gt; Reflect.hasæ–¹æ³•å¯¹åº”name in objé‡Œé¢çš„inè¿ç®—ç¬¦ã€‚Reflect.ownKeys(target) // =&gt; Reflect.ownKeysæ–¹æ³•ç”¨äºè¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ŒåŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNamesä¸Object.getOwnPropertySymbolsä¹‹å’Œã€‚Reflect.isExtensible(target) // =&gt; Reflect.isExtensibleæ–¹æ³•å¯¹åº”Object.isExtensibleï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•ã€‚Reflect.preventExtensions(target) // =&gt; Reflect.preventExtensionså¯¹åº”Object.preventExtensionsæ–¹æ³•ï¼Œç”¨äºè®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ“ä½œæˆåŠŸã€‚Reflect.getOwnPropertyDescriptor(target, name) // =&gt; Reflect.getOwnPropertyDescriptoråŸºæœ¬ç­‰åŒäºObject.getOwnPropertyDescriptorï¼Œç”¨äºå¾—åˆ°æŒ‡å®šå±æ€§çš„æè¿°å¯¹è±¡ï¼Œå°†æ¥ä¼šæ›¿ä»£æ‰åè€…ã€‚Reflect.getPrototypeOf(target) // =&gt; Reflect.getPrototypeOfæ–¹æ³•ç”¨äºè¯»å–å¯¹è±¡çš„__proto__å±æ€§ï¼Œå¯¹åº”Object.getPrototypeOf(obj)ã€‚Reflect.setPrototypeOf(target, prototype) // =&gt; Reflect.setPrototypeOfæ–¹æ³•ç”¨äºè®¾ç½®ç›®æ ‡å¯¹è±¡çš„åŸå‹ï¼ˆprototypeï¼‰ï¼Œå¯¹åº”Object.setPrototypeOf(obj, newProto)æ–¹æ³•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®æˆåŠŸã€‚ ä¸Šé¢è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œ å¤§éƒ¨åˆ†ä¸Objectå¯¹è±¡çš„åŒåæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œ è€Œä¸”å®ƒä¸Proxyå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ æœªæ¥Objectä¸Šçš„ä¸€äº›æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å¯¹è±¡çš„æ“ä½œè¯­æ³•ï¼Œéƒ½ä¼šè¿›è¡Œè§„èŒƒå¼çš„å¤„ç†ï¼Œæœ‰çš„å¯èƒ½ä¼šç¨å¾®æ”¹åŠ¨ã€‚ å¹¶ä¸”ä¼šé€æ¸åºŸå¼ƒObjectä¸Šçš„æŸäº›æ–¹æ³•ï¼Œä½†ä¼šè½¬ç§»åˆ°æ–°çš„ Reflect è¿™ä¸ªå¯¹è±¡ä¸Šé¢ã€‚ æ›´åŠ è¯¦æƒ…äº†è§£â€“ES6-Reflect","link":"/posts/7db6df7e/"},{"title":"ES6-Promise.then","text":"ç®€å•äº†è§£ä¸€ä¸‹Promiseåœ¨é˜®ä¸€å³°å¤§ç¥çš„ES6å…¥é—¨æ–‡ç« ä¸­ï¼Œå…³äºå¯¹Promiseçš„ä»‹ç»ï¼š Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†Promiseå¯¹è±¡ã€‚ æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Promiseå¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚ ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰å’Œrejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯Promiseè¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚ ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»pendingå˜ä¸ºfulfilledå’Œä»pendingå˜ä¸ºrejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœï¼Œè¿™æ—¶å°±ç§°ä¸º resolvedï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹Promiseå¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚ æœ‰äº†Promiseå¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromiseå¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚ Promiseä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆPromiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äºpendingçŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚ å¦‚æœæŸäº›äº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨ Stream æ¨¡å¼æ˜¯æ¯”éƒ¨ç½²Promiseæ›´å¥½çš„é€‰æ‹©ã€‚ å›è°ƒåœ°ç‹±ä»€ä¹ˆæ˜¯ å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªæ˜¾å¾—å¾ˆéœ¸æ°”å´æä¸ºä»¤æ‰€æœ‰JSå¼€å‘è€…æ„Ÿåˆ°æ— æ¯”åŒçƒ¦çš„åå­—â€”â€” å„è¿é‡‘å­—å¡”ï¼ˆPyramid of doomï¼‰ã€‚ä¹‹æ‰€ä»¥å…ˆäº†è§£è¿™äº›ï¼Œè¿™æ˜¯å› ä¸ºPromiseæœ¬æ¥å°±æ˜¯ä¸ºäº†é¿å…åœ¨å¤šé‡å¼‚æ­¥æ“ä½œæ—¶äº§ç”Ÿæ·±å±‚æ¬¡çš„åµŒå¥—å›è°ƒæå‡ºçš„ä¸€ç§æ–°å‹å¼‚æ­¥è§£å†³æ–¹æ¡ˆã€‚ ä¸¾ä¸ªåˆ—å­ï¼š 123456789101112131415function load (src,cb) { let es = document.createElement('script') es.src = src document.body.append(es) es.onload = () =&gt; { cb() } es.onerror = () =&gt; { cb(new Error('failed to load '+src )) }}load('./t1.js', err =&gt; { if(err === undefined) { f1(); // t1å†…éƒ¨çš„å‡½æ•° } else { console.log(err.message); }}) ä¸Šé¢çš„ä»£ç æ˜¯å¾ˆå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œéšä¾¿æ·»åŠ ä¸€ä¸ªjsï¼Œç„¶åæ‰§è¡Œé‡Œé¢çš„å†…å®¹ã€‚ ä½†æ˜¯ä¹Ÿä¼šéœ€è¦åŠ è½½å¤šä¸ªè„šæœ¬ï¼ŒåŒæ—¶æ‰§è¡Œä¸€äº›å‡½æ•°ï¼š 123456789101112131415161718192021load('./t1.js', err =&gt; { if(err === undefined) { f1(); // t1å†…éƒ¨çš„å‡½æ•° load('./t2.js', err =&gt; { if(err === undefined) { f2(); // t2å†…éƒ¨çš„å‡½æ•° load('./t3.js', err =&gt; { if(err === undefined) { f3(); // t3å†…éƒ¨çš„å‡½æ•° } else { console.log(err.message); } }) } else { console.log(err.message); } }) } else { console.log(err.message); }}) è¿™æ ·çš„å¤šé‡æ“ä½œï¼Œä¼šéšç€åµŒå¥—å±‚æ•°å˜æ·±é€æ¸å¤±æ§ï¼Œäºæ˜¯ä¾¿å½¢æˆäº†è‡­åæ˜­è‘—çš„å„è¿é‡‘å­—å¡”ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯Promiseä¾¿åº”è¿è€Œç”Ÿâ€”â€”ä¸»è¦æ˜¯å°†æ·±å±‚å›è°ƒå˜æˆäº†é“¾å¼è°ƒç”¨ï¼Œè¿™æ ·èƒ½æ›´ç¬¦åˆäººç±»é€»è¾‘ï¼š ç¬¬ä¸€æ­¥ï¼šå…ˆè®©loadè¿”å›ä¸€ä¸ªPromiseï¼š 1234567891011// æ¯ä¸ª load è¿”å›ä¸€ä¸ª Promise å¯¹è±¡// æ¯ä¸ªPromiseå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª then æ–¹æ³•ã€‚function load (src) { let es = document.createElement('script') es.src = src document.body.append(es) return new Promise((resolve, reject) =&gt; { es.onload = () =&gt; { resolve('success '+ src) } es.onerror = () =&gt; { reject(new Error('failed to load '+src )) } })} ç¬¬äºŒæ­¥ï¼š é“¾å¼è°ƒç”¨ï¼š 123456789101112131415161718load('./t1.js') .then(str =&gt; { console.log(str); f1(); return load('./t2.js') //è¿™é‡Œè¿”å›ä¸€ä¸ªPromise }) // ç›´æ¥å°±èƒ½ç”¨ then .then(str =&gt; { console.log(str); f2(); return load('./t3.js') // å†è¿”å›ä¸€ä¸ªPromise }) .then(str =&gt; { console.log(str); f3(); }) .catch(er =&gt; { console.log(er.message); }) è¿™æ ·çš„ä»£ç çœ‹ç€å°±å¾ˆèˆ’æœ~ Promiseæå…¶é‡è¦çš„ç‰¹å¾æ˜¯é“¾å¼è°ƒç”¨ï¼Œæ¯ä¸ªloadå‡½æ•°è¿”å›ä¸€ä¸ªPromiseï¼Œè¯¥Promiseåœ¨ç¡®å®šæ˜¯å¼‚æ­¥åŠ è½½æˆåŠŸè¿˜æ˜¯å¤±è´¥ä¹‹åå°±ä¼šè¢«è¿”å›ç„¶åæä¾›ç»™ä¸‹ä¸€ä¸ªæ“ä½œä½¿ç”¨ã€‚ ä¸€ä¸ªPromiseé˜Ÿåˆ—å°±åƒæ˜¯ä½¿ç”¨åŒæ­¥ä»£ç æ¥å®ç°å¼‚æ­¥æ“ä½œä¸€æ ·ã€‚ å¼•ç”¨ MDN ä¸Šçš„Promiseæ¦‚å¿µï¼š Promise å¯¹è±¡æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆä»£ç†ä¸€ä¸ªå€¼ï¼‰ï¼Œè¢«ä»£ç†çš„å€¼åœ¨Promiseå¯¹è±¡åˆ›å»ºæ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„ã€‚å®ƒå…è®¸ä½ ä¸ºå¼‚æ­¥æ“ä½œçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚ è¿™è®©å¼‚æ­¥æ–¹æ³•å¯ä»¥åƒåŒæ­¥æ–¹æ³•é‚£æ ·è¿”å›å€¼ï¼Œä½†å¹¶ä¸æ˜¯ç«‹å³è¿”å›æœ€ç»ˆæ‰§è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ä»£è¡¨æœªæ¥å‡ºç°çš„ç»“æœçš„Promiseå¯¹è±¡ 1Javascript ä¸­çš„ Promise ä¹Ÿå‚è€ƒäº† Promise/A+ è§„èŒƒã€‚ ES6ä¸­çš„PromiseåŸç†å®ç°Promiseçš„ç”¨æ³•å°±ä¸å¤šä»‹ç»äº†ã€‚å¯ä»¥å» MDNçš„å®˜æ–¹æ–‡æ¡£ æˆ–è€… é˜®ä¸€å³°çš„ES6å…¥é—¨æ•™ç¨‹è¯¦æƒ…äº†è§£ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// Promise principle// å‘å¸ƒè®¢é˜…class MyPromise { constructor(excutor) { this.PromiseStatus = &quot;pending&quot;; this.resolveEvent = []; this.rejectEvent = []; const resolve = (...arg) =&gt; { // Promiseå®ä¾‹çŠ¶æ€åªèƒ½æ”¹å˜ä¸€æ¬¡ if (this.PromiseStatus !== &quot;pending&quot;) return; this.PromiseStatus = &quot;fulfilled&quot;; clearTimeout(this.timer); this.timer = setTimeout(() =&gt; { this.resolveEvent.forEach(item =&gt; { typeof item === &quot;function&quot; ? item(arg) : void 0; }); }, 0); }; const reject = (...arg) =&gt; { if (this.PromiseStatus !== &quot;pending&quot;) return; this.PromiseStatus = &quot;rejected&quot;; clearTimeout(this.timer); this.timer = setTimeout(() =&gt; { this.rejectEvent.forEach(item =&gt; { typeof item === &quot;function&quot; ? item(arg) : void 0; }); }); }; // å¦‚æœç”¨functionå®šä¹‰çš„resolve/reject, å¯ä»¥ç”¨bindå®šå‘ä¸€ä¸‹thisæŒ‡å‘ try { excutor(resolve, reject); } catch (e) { reject(e); } } // prototype then(resolveFn, rejectFn) { if (typeof resolveFn !== &quot;function&quot;) { resolveFn = Function.prototype; } if (typeof rejectFn !== &quot;function&quot;) { rejectFn = Function.prototype; } // é“¾å¼è°ƒç”¨thenï¼Œé»˜è®¤è¿”å›çš„æ˜¯ä¸€ä¸ªæˆåŠŸæ€çš„Promiseå®åˆ— // å¦‚æœä¸Šä¸€ä¸ªthenå…¶å›è°ƒæ‰§è¡Œè¿”å›çš„æ˜¯Promiseå®åˆ—ï¼Œé‚£ä¹ˆé»˜è®¤è¿”å›çš„çŠ¶æ€å—åˆ°å…¶å½±å“ return new MyPromise((resolve, reject) =&gt; { this.resolveEvent.push((arg) =&gt; { // push ä¸€ä¸ªåŒ¿åç®­å¤´å‡½æ•°ï¼Œå¼‚æ­¥æ‰§è¡Œçš„æ˜¯è¿™ä¸ªåŒ¿åå‡½æ•°ã€ // é€šè¿‡ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾åˆ°thençš„å›è°ƒè®©å…¶æ‰§è¡Œï¼Œåˆ¤æ–­å…¶è¿”å›å€¼ const result = resolveFn(...arg); result instanceof MyPromise ? result.then(resolve, reject) : resolve(); }); this.rejectEvent.push((arg) =&gt; { const result = rejectFn(...arg); result instanceof MyPromise ? result.then(resolve, reject) : resolve(); }); }); }} ä¸€ä¸ªç®€æ˜“ç‰ˆçš„Promiseå®ç°äº†ï¼ŒPromiseåŸå‹ä¸Šçš„æ–¹æ³•è¿˜æœ‰å¥½å‡ ä¸ªï¼Œè¿™é‡Œåªç®€å•å®ç°äº†æœ€å¸¸ç”¨çš„ then 1234567891011121314151617181920212223let mp1 = new MyPromise((resolve, reject) =&gt; { console.log(&quot;Promise callback&quot;); resolve(&quot;resolve ok&quot;); // reject(&quot;reject not&quot;);});mp1.then(str =&gt; { console.log(str); return new MyPromise((resolve, reject) =&gt; { reject(); });}, str =&gt; { console.log(str);}).then(str =&gt; { // å¦‚æœä¸Šä¸€ä¸ªthenå›è°ƒæ‰§è¡Œæ—¶æ²¡æœ‰è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œé‚£ä¹ˆä¼šé»˜è®¤è¿”å›ä¸€ä¸ªæˆåŠŸæ€çš„Promiseå®åˆ— console.log(str); // undefined}, () =&gt; { console.log(&quot;rejected callback 2&quot;); // é»˜è®¤æˆåŠŸæ€ï¼Œè¿™é‡Œçš„rejectedå›è°ƒä¸ä¼šæ‰§è¡Œ}).then(() =&gt; { console.log(&quot;resolve callback 3&quot;); // æ‰§è¡Œ});console.log(&quot;synchronization&quot;); è¯•äº†å‡ ä¸‹ï¼Œå®Œç¾å®ç°~ å— ~~","link":"/posts/dfe13b31/"},{"title":"HTML5-CSS3-æ–°å±æ€§","text":"1. æ ‡ç­¾ç±»1.1 mapï¼š ä»¥å‰ï¼Œæˆ‘ä»¬è¦æƒ³ç‚¹å‡»æŸä¸€å¼ å›¾ç‰‡çš„æ—¶å€™ï¼Œè¿›è¡Œè·³è½¬ï¼Œå¤§å®¶çŸ¥é“ç”¨aæ ‡ç­¾å³å¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘æƒ³è®©ç”¨æˆ·ç‚¹å‡»å›¾ç‰‡ä¸­çš„æŸä¸€éƒ¨åˆ†æ‰èƒ½å®ç°è·³è½¬ï¼Œè¿™ä¸ªæ€ä¹ˆå®ç°å‘¢ï¼Ÿæ¯”å¦‚ï¼šåªèƒ½ç‚¹å‡»å°±å¯ä»¥ç”¨map ç»“åˆarea æ¥å®Œæˆè¿™ä¸ªéœ€æ±‚ &lt;map&gt;æ ‡ç­¾è¢«ç”¨äºå®šä¹‰å®¢æˆ·ç«¯å›¾åƒåœ°å›¾ï¼Œå³ä¸€ä¸ªå…·æœ‰å¯ç‚¹å‡»åŒºåŸŸçš„å›¾åƒã€‚map çš„ name å±æ€§å’Œ id ç”¨äºå®šä¹‰å›¾åƒåœ°å›¾çš„åç§°ï¼Œå®ƒæ˜¯&lt;map&gt;å…ƒç´ çš„å¿…é€‰å±æ€§(ä¸ºäº†è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæ‰€ä»¥ id å’Œ name æˆ‘ä»¬éƒ½å†™)ã€‚é€šè¿‡å°†å›¾åƒåœ°å›¾ï¼ˆ&lt;map&gt;)çš„åç§°èµ‹å€¼ç»™&lt;img&gt;çš„usemapå±æ€§ï¼Œä»¥åœ¨äºŒè€…ä¹‹é—´å»ºç«‹èµ·è”ç³»ã€‚ 1234&lt;img src=&quot;images/ball.jpg&quot; alt=&quot;&quot; usemap=&quot;ballMap&quot;&gt;&lt;map name=&quot;ballMap&quot; id=&quot;ballMap&quot;&gt; &lt;area shape=&quot;circle&quot; coords=&quot;142.5,142.5,142.5&quot; href=&quot;http://www.baidu.com&quot; alt=&quot;&quot;&gt;&lt;/map&gt; 1.2 areaå®šä¹‰å’Œç”¨æ³• coords å±æ€§è§„å®šåŒºåŸŸçš„ x å’Œ y åæ ‡ã€‚ coords å±æ€§ä¸ shape å±æ€§ é…åˆä½¿ç”¨ï¼Œæ¥è§„å®šåŒºåŸŸçš„å°ºå¯¸ã€å½¢çŠ¶å’Œä½ç½®ã€‚å›¾åƒå·¦ä¸Šè§’çš„åæ ‡æ˜¯ â€œ0,0â€ã€‚ è¯¦ç»†è§£é‡Šï¼š &lt;area&gt; æ ‡ç­¾çš„ coords å±æ€§å®šä¹‰äº†å®¢æˆ·ç«¯å›¾åƒæ˜ å°„ä¸­å¯¹é¼ æ ‡æ•æ„Ÿçš„åŒºåŸŸçš„åæ ‡ã€‚åæ ‡çš„æ•°å­—åŠå…¶å«ä¹‰å–å†³äº shape å±æ€§ä¸­å†³å®šçš„åŒºåŸŸå½¢çŠ¶ã€‚å¯ä»¥å°†å®¢æˆ·ç«¯å›¾åƒæ˜ å°„ä¸­çš„è¶…é“¾æ¥åŒºåŸŸå®šä¹‰ä¸ºçŸ©å½¢ã€åœ†å½¢æˆ–å¤šè¾¹å½¢ç­‰ã€‚ä¸‹é¢åˆ—å‡ºäº†æ¯ç§å½¢çŠ¶çš„é€‚å½“å€¼ï¼š åœ†å½¢ï¼šshape=&quot;circle&quot;ï¼Œcoords=&quot;x,y,z&quot; è¿™é‡Œçš„ x å’Œ y å®šä¹‰äº†åœ†å¿ƒçš„ä½ç½®ï¼ˆâ€0,0â€ æ˜¯å›¾åƒå·¦ä¸Šè§’çš„åæ ‡ï¼‰ï¼Œr æ˜¯ä»¥åƒç´ ä¸ºå•ä½çš„åœ†å½¢åŠå¾„ã€‚ å¤šè¾¹å½¢ï¼šshape=&quot;polygon&quot;ï¼Œcoords=&quot;x1,y1,x2,y2,x3,y3,...â€œ æ¯ä¸€å¯¹ â€œx,yâ€ åæ ‡éƒ½å®šä¹‰äº†å¤šè¾¹å½¢çš„ä¸€ä¸ªé¡¶ç‚¹ï¼ˆâ€0,0â€ æ˜¯å›¾åƒå·¦ä¸Šè§’çš„åæ ‡ï¼‰ã€‚å®šä¹‰ä¸‰è§’å½¢è‡³å°‘éœ€è¦ä¸‰ç»„åæ ‡ï¼›é«˜çº¬å¤šè¾¹å½¢åˆ™éœ€è¦æ›´å¤šæ•°é‡çš„é¡¶ç‚¹ã€‚å¤šè¾¹å½¢ä¼šè‡ªåŠ¨å°é—­ï¼Œå› æ­¤åœ¨åˆ—è¡¨çš„ç»“å°¾ä¸éœ€è¦é‡å¤ç¬¬ä¸€ä¸ªåæ ‡æ¥é—­åˆæ•´ä¸ªåŒºåŸŸã€‚ çŸ©å½¢ï¼šshape=&quot;rectangle&quot;ï¼Œcoords=&quot;x1,y1,x2,y2&quot; ç¬¬ä¸€ä¸ªåæ ‡æ˜¯çŸ©å½¢çš„ä¸€ä¸ªè§’çš„é¡¶ç‚¹åæ ‡ï¼Œå¦ä¸€å¯¹åæ ‡æ˜¯å¯¹è§’çš„é¡¶ç‚¹åæ ‡ï¼Œâ€0,0â€ æ˜¯å›¾åƒå·¦ä¸Šè§’çš„åæ ‡ã€‚è¯·æ³¨æ„ï¼Œå®šä¹‰çŸ©å½¢å®é™…ä¸Šæ˜¯å®šä¹‰å¸¦æœ‰å››ä¸ªé¡¶ç‚¹çš„å¤šè¾¹å½¢çš„ä¸€ç§ç®€åŒ–æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ XHTML ç‰‡æ®µåœ¨ä¸€ä¸ª 100x100 åƒç´ å›¾åƒçš„å³ä¸‹æ–¹å››åˆ†ä¹‹ä¸€å¤„ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯¹é¼ æ ‡æ•æ„Ÿçš„åŒºåŸŸï¼Œå¹¶åœ¨å›¾åƒçš„æ­£ä¸­é—´å®šä¹‰äº†ä¸€ä¸ªåœ†å½¢åŒºåŸŸã€‚ 1.3 datalistdatalist æ ‡ç­¾å®šä¹‰å¯é€‰æ•°æ®çš„åˆ—è¡¨ã€‚ä¸ input å…ƒç´ é…åˆä½¿ç”¨ï¼Œå°±å¯ä»¥åˆ¶ä½œå‡ºè¾“å…¥å€¼çš„ä¸‹æ‹‰åˆ—è¡¨ã€‚å’Œselectæ§ä»¶ä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸ªè¾“å…¥æ¡†é™¤äº†å¯ä»¥é€‰æ‹©é€‰é¡¹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥è¾“å…¥å†…å®¹ã€‚ä¸å—é€‰é¡¹çš„å½±å“ã€‚æ‰€ä»¥å½“ä½ çš„è¾“å…¥æ¡†éœ€è¦æä¾›ä¸€äº›é€‰é¡¹ç»™ç”¨æˆ·é€‰æ‹©ï¼Œä½†åˆä¸é™åˆ¶ç”¨æˆ·çš„è¾“å…¥å†…å®¹æ—¶ï¼Œä¸å¯ä»¥ç”¨è¿™ä¸ªdatalist+inputçš„ç»„åˆæ¥å®ç°äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼š1ã€datalist å’Œinputéœ€è¦é…åˆä½¿ç”¨ï¼ˆå¦‚æœä¸å†™input çœ‹ä¸åˆ°æ•ˆæœï¼‰2ã€datalist çš„idå’Œinputçš„list å±æ€§ç›¸å…³è” 123456&lt;input type=&quot;text&quot; list=&quot;luckyColor&quot; &gt;&lt;datalist id=&quot;luckyColor&quot;&gt; &lt;option value=&quot;pink&quot;&gt; &lt;option value=&quot;green&quot;&gt; &lt;option value=&quot;blue&quot;&gt;&lt;/datalist&gt; 1.4 svgsvg æ˜¯çŸ¢é‡å›¾ï¼Œæ”¾å¤§ç¼©å°éƒ½ä¸ä¼šå¤±çœŸã€‚ 1.4.1ï¼‰ç”»ä¸€ä¸ªçŸ©å½¢xï¼šçŸ©å½¢çš„èµ·å§‹xè½´åæ ‡yï¼šçŸ©å½¢çš„èµ·å§‹yè½´åæ ‡rxï¼šæ°´å¹³æ–¹å‘ä¸Šçš„åœ†è§’å¼§åº¦ryï¼šå‚ç›´å¹³æ–¹å‘ä¸Šçš„åœ†è§’å¼§åº¦widthï¼šçŸ©å½¢çš„å®½åº¦heightï¼šçŸ©å½¢çš„é«˜åº¦cssæ ·å¼strokeï¼šè¾¹æ¡†çš„é¢œè‰²css æ ·å¼stroke-widthï¼šè¾¹æ¡†çš„å®½åº¦cssæ ·å¼fill: å¡«å……çš„é¢œè‰² 123&lt;svg width=&quot;200&quot; height=&quot;200&quot; style=&quot;background-color: green;&quot;&gt; &lt;rect x=&quot;50&quot; y=&quot;50&quot; rx=&quot;10&quot; ry=&quot;50&quot; width=&quot;100&quot; height=&quot;100&quot; style=&quot;stroke:blue;stroke-width:5;fill:aquamarine&quot; &gt;&lt;/rect&gt;&lt;/svg&gt; 1.4.2ï¼‰ç”»ä¸€ä¸ªæ¤­åœ† cx ã€cy åœ†ç‚¹åæ ‡ rxã€ry xè½´å’Œyè½´çš„åŠå¾„123&lt;svg style=&quot;background:blue;&quot;&gt; &lt;ellipse cx=&quot;120&quot; cy=&quot;80&quot; rx=&quot;100&quot; ry=&quot;50&quot; style=&quot;stroke-width:5;fill:blue;stroke:pink;&quot;&gt;&lt;/ellipse&gt;&lt;/svg&gt; 1.4.3ï¼‰åœ†å¦‚æœä¸Šé¢çš„æ¤­åœ†ä¸­çš„rxå’Œryå€¼ç›¸ç­‰å°±æ˜¯æ­£åœ† 123&lt;svg style=&quot;background:blue;&quot;&gt; &lt;ellipse cx=&quot;120&quot; cy=&quot;80&quot; rx=&quot;50&quot; ry=&quot;50&quot; style=&quot;stroke-width:5;fill:blue;stroke:pink;&quot;&gt;&lt;/ellipse&gt;&lt;/svg&gt; 1.4.4)çº¿æ¡ x1ã€y1 æŠ˜çº¿çš„èµ·ç‚¹ x2ã€y2 æŠ˜çº¿çš„ç»ˆç‚¹123456&lt;svg&gt; &lt;line x1=&quot;0&quot; y1=&quot;0&quot; x2=&quot;100&quot; y2=&quot;100&quot; style=&quot;stroke:pink;stroke-width:5px;&quot;&gt; &lt;/line&gt;&lt;/svg&gt; 1.4.5ï¼‰æŠ˜çº¿ points é‡Œé¢æ˜¯å„ä¸ªç‚¹çš„åæ ‡ï¼Œæ¯ä¸ªç‚¹çš„åæ ‡ç”¨ï¼Œè¿›è¡Œåˆ†å‰²123&lt;svg&gt; &lt;polyline points=&quot;0 0,100 100,300 100&quot; style=&quot;stroke:pink;stroke-width:5px;fill:#fff&quot;&gt;&lt;/polyline&gt; &lt;/svg&gt; 1.4.6)å¤šè¾¹å½¢ 123&lt;svg&gt; &lt;polygon points=&quot;0 0,100 0,100 100, 0 100&quot; style=&quot;stroke:pink;stroke-width:1px;fill:#fff&quot;&gt;&lt;/polygon&gt;&lt;/svg&gt; 2. æ¸å˜2.1 å¾„å‘æ¸å˜è¯­æ³•ï¼š shapeï¼šå½¢çŠ¶ cricle åœ† ellipse æ¤­åœ† sizeï¼šå°ºå¯¸ï¼ˆé‡Œé¢æœ‰ä¸¤ä¸ªå€¼ï¼šx yï¼‰ xè½´çš„å˜å¾„ yè½´çš„åŠå¾„ positionï¼šåœ†å¿ƒçš„ä½ç½®ï¼Œé»˜è®¤æ˜¯center 1radial-gradient:(shape size at position,color1,color2,....) 2.2 shape&amp;&amp;sizeæ¤­åœ†å½¢çŠ¶ï¼Œxè½´çš„åŠå¾„æ˜¯100px yè½´çš„åŠå¾„æ˜¯200pxï¼ˆä¹Ÿå¯ä»¥æŠŠå®šä¹‰çš„å½¢çŠ¶çœå»ï¼‰ 1background:radial-gradient(ellipse 100px 200px,red,green); å¦‚æœæ˜¯circle åœ†å½¢ï¼Œxè½´å’Œyè½´çš„åŠå¾„å¦‚æœéƒ½å†™å°±ä¼šå‡ºé”™ï¼Œå› ä¸ºæ—¢ç„¶å®šä¹‰äº†åœ†circleï¼Œå°±è¯´æ˜æ˜¯åœ†äº†ï¼Œxå’Œyåº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥ä»¥ä¸‹æ˜¯é”™è¯¯çš„ï¼Œå†™ä¸€ä¸ªå€¼å³å¯ 1background:radial-gradient(circle 100px 100px,red,green); æ­£ç¡® 1background:radial-gradient(circle 100px,red,green); å¦‚æœè®°è¿™äº›ï¼Œè§‰å¾—éº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å»å†™å½¢çŠ¶ï¼Œå› ä¸ºå®šä¹‰çš„åŠå¾„å°±å†³å®šäº†æ˜¯åœ†è¿˜æ˜¯æ¤­åœ† 1234background:radial-gradient(100px 100px,red,green); // åœ†background:radial-gradient(100px,red,green);// åœ†background:radial-gradient(100px 200px,red,green); // æ¤­åœ† 2.3 sizeå‡ ä¸ªç‰¹æ®Šçš„å€¼ï¼š closest-sideï¼šæŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„ä¸ºåˆ°æœ€è¿‘è¾¹çš„è·ç¦» closest-cornerï¼šæŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„åˆ°æœ€è¿‘çš„è§’çš„è·ç¦» fasest-sideï¼šæŒ‡å®šå¾„å‘æ¸å˜çš„åŠå¾„ä¸ºåˆ°æœ€è¿œè¾¹çš„è·ç¦» 1background:radial-gradient(closest-side at 100px 100px,red,green); 1background:radial-gradient(farthest-side at 100px 100px,red,yellow); 1background:radial-gradient(farthest-corner at 0px 0px,red,yellow); 2.4 positioné»˜è®¤åœ†å¿ƒæ˜¯åœ¨ä¸­å¿ƒçš„ä½ç½® 1background:radial-gradient(100px at center center,red,green); åœ†å¿ƒxè½´æ–¹å‘åœ¨æœ€å³è¾¹ï¼Œyè½´æ–¹å‘åœ¨ä¸­å¿ƒ 1background:radial-gradient(100px at right center,red,green); è¿˜å¯ä»¥æ˜¯å…·ä½“çš„åƒç´ å€¼æˆ–è€…ç™¾åˆ†æ¯” 1background:radial-gradient(100px at 10px 10px,red,green); 3. clip-path MDN å®šä¹‰ï¼šclip-pathå±æ€§å¯ä»¥é˜²æ­¢éƒ¨åˆ†å…ƒç´ é€šè¿‡å®šä¹‰çš„å‰ªåˆ‡åŒºåŸŸæ¥æ˜¾ç¤ºï¼Œä»…é€šè¿‡æ˜¾ç¤ºçš„ç‰¹æ®ŠåŒºåŸŸã€‚å‰ªåˆ‡åŒºåŸŸæ˜¯è¢«URLå®šä¹‰çš„è·¯å¾„ä»£æ›¿è¡Œå†…æˆ–è€…å¤–éƒ¨svgï¼Œæˆ–è€…å®šä¹‰è·¯çº¿çš„æ–¹æ³•ä¾‹å¦‚circle().ã€‚clip-pathå±æ€§ä»£æ›¿äº†ç°åœ¨å·²ç»å¼ƒç”¨çš„å‰ªåˆ‡ clipå±æ€§ã€‚ ç®€å•çš„è¯´ï¼Œå°±æ˜¯è‡ªå·±å¯ä»¥ç”»ä¸€ä¸ªåŒºåŸŸï¼Œè¶…å‡ºæ­¤åŒºåŸŸçš„éƒ¨åˆ†éšè— åŸºæœ¬è¯­æ³•ï¼š &lt;clip-source&gt; | [ &lt;basic-shape&gt; || &lt;geometry-box&gt; ] | noneå±æ€§è¯´æ˜&lt;clip-source&gt; = &lt;url&gt;&lt;basic-shape&gt; = &lt;inset()&gt; | &lt;circle()&gt; | &lt;ellipse()&gt; | &lt;polygon()&gt;&lt;geometry-box&gt; = &lt;shape-box&gt; | fill-box | stroke-box | view-box 3.1ï¼‰ ç”»ä¸€ä¸ªçŸ©å½¢ inset()å¯ä»¥ä¼ å…¥5ä¸ªå‚æ•°ï¼Œåˆ†åˆ«å¯¹åº”top,right,bottom,leftçš„è£å‰ªä½ç½®,round radiusï¼ˆå¯é€‰ï¼Œåœ†è§’ï¼‰ç¤ºä¾‹clip-path: inset(2em 3em 2em 1em round 2em); 12345678.box{ width: 200px; height: 200px; background:aliceblue; border:1px solid red; clip-path: inset(30px 30px 30px 30px round 30px); background:url(&quot;https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=234380990,2754321816&amp;fm=26&amp;gp=0.jpg&quot;);} 3.2ï¼‰åœ†criclecircle()å¯ä»¥ä¼ äºº2ä¸ªå¯é€‰å‚æ•°ï¼›1. åœ†çš„åŠå¾„ï¼Œé»˜è®¤å…ƒç´ å®½é«˜ä¸­çŸ­çš„é‚£ä¸ªä¸ºç›´å¾„ï¼Œæ”¯æŒç™¾åˆ†æ¯”2. åœ†å¿ƒä½ç½®ï¼Œé»˜è®¤ä¸ºå…ƒç´ ä¸­å¿ƒç‚¹ 123.box2{ clip-path: circle(100px at center center);} 123.box2{ clip-path: circle(100px at right center);} 3.3) ellipse æ¤­åœ†ellipse()å¯ä»¥ä¼ äºº3ä¸ªå¯é€‰å‚æ•°ï¼›1. æ¤­åœ†çš„Xè½´åŠå¾„ï¼Œé»˜è®¤æ˜¯å®½åº¦çš„ä¸€åŠï¼Œæ”¯æŒç™¾åˆ†æ¯”2. æ¤­åœ†çš„Yè½´åŠå¾„ï¼Œé»˜è®¤æ˜¯é«˜åº¦çš„ä¸€åŠï¼Œæ”¯æŒç™¾åˆ†æ¯”3. æ¤­åœ†ä¸­å¿ƒä½ç½®ï¼Œé»˜è®¤æ˜¯å…ƒç´ çš„ä¸­å¿ƒç‚¹ 123.box3{ clip-path: ellipse(100px 50px at center center);} 3.4) å¤šè¾¹å½¢polygonè¿™ç‚¹çš„ä½ç½® 123.box4{ clip-path:polygon(0 100px,100px 0,100px 100px) ;} 4. å˜é‡å†™å±æ€§å€¼var() å‡½æ•°ç”¨äºæ’å…¥è‡ªå®šä¹‰çš„å±æ€§å€¼ï¼Œå¦‚æœä¸€ä¸ªå±æ€§å€¼åœ¨å¤šå¤„è¢«ä½¿ç”¨ï¼Œè¯¥æ–¹æ³•å°±å¾ˆæœ‰ç”¨ã€‚ 1234567891011121314151617181920&lt;style&gt;:root{ --color:pink; --color2:blue;}.box{ width: 100px; height: 100px;}.box1{ background:var(--color);}.box2{ background:var(--color2);}&lt;/style&gt; 12&lt;div id=&quot;div1&quot; class=&quot;box box1&quot;&gt;box&lt;/div&gt;&lt;div id=&quot;div2&quot; class=&quot;box box2&quot;&gt;box&lt;/div&gt;","link":"/posts/cf29c013/"},{"title":"HTML4-HTML5æ–°å¢æ ‡ç­¾","text":"è‡³HTML4.01 ä¸€äº›æ ‡ç­¾ p æ ‡ç­¾ h1-h6æ ‡é¢˜ a è¶…é“¾æ¥ img å›¾ç‰‡ div å¤§ç›’å­æ ‡ç­¾ span å°ç›’å­æ ‡ç­¾ strong / b åŠ ç²— i / em æ–œä½“ del åˆ é™¤çº¿ small å° big å¤§ é¢„æ ¼å¼åŒ– : pre åˆ—è¡¨ï¼š æ— åºåˆ—è¡¨ ul li æœ‰åºåˆ—è¡¨ ol li è‡ªå®šä¹‰åˆ—è¡¨ dl dt dd table è¡¨æ ¼ ï¼š caption è¡¨æ ¼çš„æ ‡é¢˜ tr td th thead tbody tfoot label input: type ç±»å‹ text æ–‡æœ¬è¾“å…¥æ¡† password å¯†ç  buttonï¼ˆ: value=â€œæ”¯ä»˜â€ï¼‰ submit æäº¤ reset é‡ç½® radio å•é€‰ checkbox å¤šé€‰ button æŒ‰é’® textarea æ–‡æœ¬åŸŸ select ä¸‹æ‹‰æ¡† form è¡¨å• HTML5 æ–°å¢çš„ä¸€äº›æ ‡ç­¾ video è§†é¢‘ audio éŸ³é¢‘ header é¡µé¢å¤´éƒ¨ footer é¡µé¢åº•éƒ¨ main é¡µé¢ä¸»å†…å®¹ aside é¡µé¢ä¾§åŒºåŸŸ section å¸ƒå±€æ¨¡å—ï¼Œç±»ä¼¼div nav å¯¼èˆª figure figcaption article æ–‡ç«  input : type ç±»å‹ number æ•°å­— tel ç”µè¯å·ç  search æœç´¢ email é‚®ç®± color é¢œè‰²æ‹¾å–å™¨ range èŒƒå›´ file ä¸Šä¼ æ–‡ä»¶ date æ—¥æœŸ æ ‡ç­¾çš„åˆ’åˆ† å—çº§å…ƒç´  ç‹¬å ä¸€è¡Œ å¯ä»¥è®¾ç½®å®½å’Œé«˜ æ’åˆ—æ–¹å¼ï¼šä»ä¸Šåˆ°ä¸‹ è¡Œå†…å— å¯ä»¥å…±å ä¸€è¡Œ è®¾ç½®å®½å’Œé«˜èµ·ä½œç”¨ æ’åˆ—æ–¹å¼ï¼šä»å·¦åˆ°å³ è¡Œå†…å…ƒç´  å¯ä»¥å…±å ä¸€è¡Œ å†™å®½é«˜ä¸èµ·ä½œç”¨ æ’åˆ—æ–¹å¼ä»å·¦åˆ°å³ ç®€å•åˆ’åˆ†ä¸€ä¸‹ å—çº§ï¼šp h1-h6 div åˆ—è¡¨ è¡¨æ ¼ header footer main aside nav figure figcaptionã€articleã€pre ..... è¡Œå†…å—å…ƒç´  img button input textarea video audio select ... è¡Œå†…å…ƒç´  a span label b strong i em del big small ...","link":"/posts/40c3e27/"},{"title":"JS-ES3-ES5-ç»å…¸ä¸‰ç§è®¾è®¡æ¨¡å¼","text":"JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// åœ¨æ²¡æœ‰å¯¹è±¡å’Œå‡½æ•°ç­‰å¼•ç”¨æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½åŸºäºåˆ›å»ºå˜é‡çš„æ–¹å¼æ¥æè¿°æŸä¸€ä»¶äº‹åŠ¡ï¼ŒæŸä¸€ä¸ªä¸ªä½“çš„ç›¸å…³ä¿¡æ¯ // è¿™æ ·ä¼šå¤§é‡åˆ›å»ºå…¨å±€å˜é‡ï¼Œæœ€åå¯¼è‡´å…¨å±€å˜é‡çš„å†²çªï¼ˆå…¨å±€å˜é‡æ±¡æŸ“ï¼‰var name = &quot;å¼ ä¸‰&quot;;var age = 25;var height = &quot;180cm&quot;;var name = &quot;æå››&quot;;var age = 28;var height = &quot;175cm&quot;;// æˆ‘ä»¬æœŸæœ›èƒ½å¤ŸæŠŠæè¿°ä¸€ä¸ªäº‹åŠ¡çš„ç›¸å…³ä¿¡æ¯èƒ½å¤Ÿåˆ†ç»„ï¼ˆæˆ–åˆ†ç±»ï¼‰æ¥ç®¡ç†ï¼Œæ­¤æ—¶å¯¹è±¡æ•°æ®ç±»å‹å°±èµ·åˆ°äº†å¾ˆå¤§çš„ä½œç”¨// åˆ†ç»„ä¹‹åï¼Œæ¯ä¸€ç»„ä¸­çš„é”®å€¼å¯¹éƒ½æ˜¯ç§æœ‰çš„ï¼Œå³ä½¿ä¸¤ç»„ä¹‹é—´æœ‰ç›¸åŒåå­—çš„å±æ€§ï¼Œä¹Ÿä¸ä¼šå†²çªï¼Œå¤§å¤§è§£å†³äº†å…¨å±€å˜é‡æ±¡æŸ“çš„é—®é¢˜ =&gt; â€œè¿™ç§åˆ†ç»„ç®¡ç†çš„æ¦‚å¿µï¼Œå°±æ˜¯JSä¸­æœ€æ—©çš„å•ä¾‹è®¾è®¡æ¨¡å¼æ€æƒ³â€var person1 = { name:'å¼ ä¸‰', age:25, ...};var person2 = { name:'æå››', age:28, ...};/* * åŸºäºå¯¹è±¡æ•°æ®ç±»å‹ï¼ŒæŠŠæè¿°å½“å‰äº‹åŠ¡çš„å±æ€§å’Œæ–¹æ³•ç»Ÿä¸€æ”¾åœ¨ä¸€èµ·åˆ†ç»„ç®¡ç†ï¼Œèƒ½å¤Ÿå‡å°‘å…¨å±€å˜é‡æ±¡æŸ“ï¼Œè¿™ç§JSè®¾è®¡æ¨¡å¼å°±æ˜¯â€œå•ä¾‹è®¾è®¡æ¨¡å¼â€ * 1. æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„å®ä¾‹ï¼ˆå•ç‹¬çš„å †å†…å­˜ï¼‰ï¼Œå­˜å‚¨çš„é”®å€¼å¯¹éƒ½æ˜¯å †ä¸­ç§æœ‰çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸¤ä¸ªå®ä¾‹ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•çš„å†²çª * 2. åœ¨å•ä¾‹è®¾è®¡æ¨¡å¼ä¸­ï¼Œæœ‰ä¸€äº›æ–°çš„æ¦‚å¿µï¼Œåœ¨ä¸‹è¿°æ¡ˆä¾‹ä¸­ï¼šobjä¸ä»…ä»…æ˜¯ä¸€ä¸ªå˜é‡å­˜å‚¨å¯¹è±¡ï¼ˆå¯¹è±¡åï¼‰ï¼Œä¹Ÿè¢«æˆä¸ºâ€œå‘½åç©ºé—´â€ï¼ˆå…¶å®å°±æ˜¯ç»™å¯¹è±¡çš„å †å†…å­˜è®¾ç½®ä¸€ä¸ªobjçš„åå­—ï¼Œå †å†…å­˜æ˜¯ç©ºé—´ï¼Œobjæ˜¯åå­—ï¼‰ï¼ŒæŠŠæè¿°å½“å‰äº‹åŠ¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ”¾åˆ°ç©ºé—´ä¸­è¿›è¡Œåˆ†ç»„ç®¡ç† * var obj = { xxx:xxx , ...}; * * åœ¨å…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¤ä¸ºåªæœ‰åŸºäºæ„é€ å‡½æ•°æ„é€ å‡ºæ¥çš„å®ä¾‹æ‰èƒ½è¢«ç§°ä¸ºâ€œå•ä¾‹è®¾è®¡æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ var xxx = new xxx; ä½†æ˜¯åœ¨JSä¸­ï¼Œvar obj={...}; æœ¬èº«å°±æ˜¯åŸºäº new Object() æ„å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥æ˜¯æ ‡å‡†çš„å•ä¾‹è®¾è®¡æ¨¡å¼ï¼› */// + å•ä¾‹è®¾è®¡æ¨¡å¼ä¹Ÿæ˜¯æœ€åŸºç¡€çš„æ¨¡å—åŒ–æ€æƒ³// + AMD/CMDï¼ˆrequireJSå’ŒseaJSï¼‰// + UMD// + CommonJS// + ES6Module// åŸºäºå•ä¾‹è®¾è®¡æ¨¡å¼æ€æƒ³ + é—­åŒ…æ€æƒ³ + æ¨¡å—ç®¡ç†æ€æƒ³ (é«˜çº§å•ä¾‹æ¨¡å¼)var utils = (function(){ function queryElement(){} function deleteElement(){} ... // å¯¼å‡ºå½“å‰ç‰ˆå—ä¸­éœ€è¦ä¾›åˆ«äººè°ƒå–çš„å±æ€§æ–¹æ³•ï¼ˆä¹Ÿç›¸å½“äºæŠŠè¿™äº›å±æ€§æ–¹æ³•æ”¾åˆ°utilså‘½åç©ºé—´ä¸‹è¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œé¿å…å’Œåˆ«äººçš„å†²çªï¼‰ return { queryElement:queryElement, deleteElement:deleteElement };})();var searchModule = (function(){ function queryData(){} function bindHTML(){ //=&gt;éœ€è¦è°ƒå–utilsæ¨¡å—ï¼ˆå‘½åç©ºé—´ä¸­çš„æ–¹æ³•ï¼‰ utils.queryElement(); } return { init:function(){ } };})(); å·¥å‚è®¾è®¡æ¨¡å¼123456789101112131415161718192021222324252627282930313233343536373839404142// åŸºäº â€œå•ä¾‹è®¾è®¡æ¨¡å¼â€ è®°å½•äººå‘˜ä¿¡æ¯ï¼šåˆ›å»ºå•ç‹¬çš„å®ä¾‹æˆ–è€…å‘½åç©ºé—´ï¼ŒæŠŠæè¿°æ¯ä¸ªäººçš„ä¿¡æ¯åˆ†ç»„ç®¡ç†å³å¯å®ç°// ç¼ºé™·ï¼šæ¯å½“æè¿°ä¸€ä¸ªäº‹åŠ¡çš„ä¿¡æ¯ï¼Œéœ€è¦æŠŠå¯¹åº”çš„é”®å€¼å¯¹éƒ½å»ç¼–å†™ä¸€ä¸‹ï¼Œå¦‚æœé‡å¤æè¿°ç›¸ä¼¼äº‹åŠ¡çš„ä¿¡æ¯ï¼Œä¸ä»…éœ€è¦é‡å¤åšå¾ˆå¤šäº‹æƒ…ï¼Œè€Œä¸”è¿˜ä¼šå¯¼è‡´ä»£ç çš„å†—ä½™.var person1 = { name:'å¼ ä¸‰', age:92, sex:'ç”·', score:90};var person2 = { name:'æå››', age:62, sex:'ç”·', score:85};var person3 = { name:'ç‹äºŒ', age:18, sex:'å¥³', score:100ï¼Œ qunzi:'red'};// æ‰€è°“å·¥å‚è®¾è®¡æ¨¡å¼ï¼Œæ˜¯åœ¨éœ€è¦åˆ›å»ºå¾ˆå¤šâ€œç›¸ä¼¼å®ä¾‹â€çš„æƒ…å¢ƒä¸‹ï¼Œè®©æˆ‘ä»¬å‘Šåˆ«æ‰‹åŠ¨åˆ›å»ºï¼Œè€Œå®ç°å·¥ä¸šåŒ–æ‰¹é‡ç”Ÿäº§ï¼ˆæé«˜å¼€å‘æ•ˆç‡ã€å‡å°‘äº†é¡µé¢ä¸­çš„å†—ä½™ä»£ç  =&gt; â€œä½è€¦åˆé«˜å†…èšâ€ =&gt; å‡½æ•°å°è£…ï¼‰function createPerson(name, age, sex, score, qunzi) { var person = {}; person.name = name; person.age = age; person.sex = sex; person.score = score; if(typeof qunzi !== &quot;undefined&quot;) { // ä¼ é€’äº†qunzi å½¢å‚å¯¹åº”çš„å®å‚å€¼ person.qunzi = qunzi; } return person;}var person1 = createPerson('å¼ ä¸‰',92,'ç”·',90);var person2 = createPerson('æå››',62,'ç”·',85);var person3 = createPerson('ç‹äºŒ',18,'å¥³',100,'red'); é¢å‘å¯¹è±¡ ç¼–ç¨‹è¯­è¨€ï¼š OOPï¼ˆObject Oriented Programmingï¼‰é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ JAVA PHP PYTHON / GO / RUBY JAVASCRIPT / NODE.JS â€¦ POPï¼ˆProcedure Orientedï¼‰ é¢å‘è¿‡ç¨‹ç¨‹åºè®¾è®¡ Cè¯­è¨€ é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ä¸‰å¤§æ¦‚å¿µï¼š å¯¹è±¡ï¼šæ³›æŒ‡ï¼ŒJSä¸­æˆ‘ä»¬æ“ä½œå’Œç ”ç©¶çš„äº‹åŠ¡éƒ½æ˜¯å¯¹è±¡ ç±»ï¼šæŠŠæŠ½è±¡çš„å¯¹è±¡ï¼ŒæŒ‰ç…§åŠŸèƒ½ç‰¹ç‚¹ï¼Œè¿›è¡Œçš„è¯¦ç»†åˆ’åˆ†ï¼Œåˆ’åˆ†æˆä¸ºå¾ˆå¤šçš„ç±»åˆ« å®ä¾‹ï¼šæ¯ä¸€ç§ç±»åˆ«ä¸­å…·ä½“çš„äº‹åŠ¡ JSä¸­å†…ç½®ç±» æ ¹æ®JSä¸­äº‹åŠ¡çš„ç‰¹å¾ï¼Œè¿›è¡Œç±»åˆ«åˆ’åˆ†ï¼Œè€Œé»˜è®¤åˆ’åˆ†å¥½çš„ç±»åˆ«ï¼Œå°±æ˜¯å†…ç½®ç±» æ•°æ®ç±»å‹ä¸­çš„å†…ç½®ç±» Numberç±»ï¼šæ¯ä¸€ä¸ªæ•°å­—éƒ½æ˜¯è¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹ String ç±» Boolean ç±» Null ç±» / Undefined ç±»ï¼ˆæµè§ˆå™¨ä¸­è¿›åˆ¶æˆ‘ä»¬è‡ªå·±è®¿é—®è¿™ä¸¤ä¸ªç±»ï¼‰ Symbol ç±» Object å¯¹è±¡æ•°æ®ç±»å‹ç±»ï¼šæ‰€æœ‰çš„å¯¹è±¡æ•°æ®ç±»å‹éƒ½æ˜¯è¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹ Object {}æ™®é€šå¯¹è±¡å°±æ˜¯å®ƒçš„å®ä¾‹ Array æ•°ç»„ç±» æ¯ä¸€ä¸ªæ•°ç»„æ˜¯Arrayç±»çš„å®ä¾‹ä¹Ÿæ˜¯Objectç±»çš„å®ä¾‹ RegExpæ­£åˆ™ç±» Dateæ—¥æœŸç±» â€¦ Functionç±»ï¼šæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ â€¦ å…¶å®ƒ DOMå…ƒç´ å¯¹è±¡æˆ–è€…DOMå…ƒç´ é›†åˆä¹Ÿéƒ½æœ‰è‡ªå·±çš„å†…ç½®ç±» â€¦ Node èŠ‚ç‚¹ç±» Element å…ƒç´ æ ‡ç­¾ç±» HTMLElement HTMLå…ƒç´ æ ‡ç­¾ç±» HTMLDivElement æ¯ä¸€ä¸ªDIVå…ƒç´ å¯¹è±¡æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹ HTMLAnchorElement æ¯ä¸ªAå…ƒç´ å¯¹è±¡æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹ æ¯ä¸€ä¸ªå…ƒç´ æ ‡ç­¾å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè‡ªå·±å¯¹åº”çš„å†…ç½®ç±» XMLElement â€¦ Text æ–‡æœ¬èŠ‚ç‚¹ç±» Document æ–‡æ¡£èŠ‚ç‚¹ç±» HTMLDocument æ¯ä¸€ä¸ªdocumentéƒ½æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹ â€¦ HTMLCollection å…ƒç´ é›†åˆç±»ï¼šåŸºäºgetElementsByTagNameç­‰æ–¹æ³•è·å–åˆ°çš„å…ƒç´ é›†åˆéƒ½æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹ NodeList èŠ‚ç‚¹é›†åˆç±» â€¦ JSæœ¬èº«å°±æ˜¯æŒ‰ç…§â€œé¢å‘å¯¹è±¡æ€æƒ³ï¼ˆç±»å’Œå®ä¾‹ï¼‰â€è®¾è®¡å‡ºæ¥çš„è¯­è¨€ï¼Œæ‰€ä»¥ä¸è®ºæ˜¯ç ”ç©¶æˆ–æ˜¯å­¦ä¹ JSï¼Œè¿˜æ˜¯åœ¨å·¥ä½œä¸­è¿›è¡Œå¼€å‘ï¼Œä¹Ÿéƒ½åº”è¯¥æŒ‰ç…§é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥å­¦ä¹ å’Œå¼€å‘ï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718192021/* æˆ‘æƒ³ç ”ç©¶æ•°ç»„ */// 1.æ¯ä¸€ä¸ªæ•°ç»„éƒ½æ˜¯Arrayè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æ˜¯å•ç‹¬çš„ä¸€ä¸ªä¸ªä½“ï¼ˆäº’ç›¸æ˜¯ä¸å†²çªçš„ï¼Œç±»ä¼¼äºæ²¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„ä¸¤ä¸ªäººï¼Œåœ¨JSä¸­ä¹ŸåŸºæœ¬ä¸Šæ²¡æœ‰å®Œå…¨ä¸€æ ·çš„ä¸¤ä¸ªå®ä¾‹[ä¼šæœ‰ç‰¹æ®Šæƒ…å†µ]ï¼‰// 2.æˆ‘ä»¬æ‹¿å‡ºæŸä¸€ä¸ªå®ä¾‹å»åˆ†æå…¶ç‰¹ç‚¹å’Œç»“æ„ï¼Œé‚£ä¹ˆArrayçš„å…¶å®ƒå®ä¾‹ä¹Ÿå…·å¤‡ç›¸åŒçš„ç‰¹ç‚¹å’Œç»“æ„// 3.æ•°ç»„ä¸­æœ‰å¾ˆå¤šæµè§ˆå™¨å†…ç½®çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯ç±»æä¾›ç»™å®ä¾‹çš„ï¼Œæ¯ä¸€ä¸ªå®ä¾‹éƒ½èƒ½å…·å¤‡å’Œä½¿ç”¨è¿™äº›æ–¹æ³•ï¼ˆå‰ææ˜¯å½“å‰ç±»çš„å®ä¾‹æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚æœä¸æ˜¯å®ƒçš„å®ä¾‹ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨ï¼‰let arr1 = [12,23];let arr2 = [12,23];console.log(arr1 === arr2); // false ä¸åŒçš„å †å†…å­˜åœ°å€// push æ˜¯ Array è¿™ä¸ªç±»æä¾›çš„æ–¹æ³•ï¼Œåªè¦æ˜¯ Array ç±»çš„å®ä¾‹ï¼ˆæ•°ç»„æ˜¯å®ƒçš„å®ä¾‹ï¼‰éƒ½å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•let arr = [10, 20];arr.push(30);console.log(arr); //=&gt;[10,20,30]// arguments ä¸æ˜¯ Array çš„å®ä¾‹ï¼Œä¸èƒ½è°ƒå®ƒæä¾›çš„æ–¹æ³•function func() { // arguments å®å‚é›†åˆä¸­å­˜å‚¨äº†ä¼ é€’çš„å®å‚ä¿¡æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ï¼ˆç±»ä¼¼äºæ•°ç»„çš„ç»“æ„ï¼Œä½†æ˜¯å®ƒä¸æ˜¯æ•°ç»„ï¼Œä¸æ˜¯Arrayç±»çš„å®ä¾‹ï¼‰ arguments.push(30); // Uncaught TypeError: arguments.push is not a function console.log(arguments);}func(10, 20); æ„é€ å‡½æ•°æ¨¡å¼ï¼šåŸºäºæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç±»å’Œåˆ›å»ºç±»çš„ç›¸å…³å®ä¾‹1234567891011121314151617181920212223242526// çº¦å®šè§„èŒƒï¼šç±»åçš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸€èˆ¬éƒ½æ˜¯å¤§å†™çš„// 1.æ„é€ å‡½æ•°æ‰§è¡Œï¼Œç”±äºå…·å¤‡æ™®é€šå‡½æ•°ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨ç§æœ‰ä¸Šä¸‹æ–‡ä¸­å¯èƒ½ä¼šå‡ºç°ä¸€äº›ç§æœ‰å˜é‡ï¼Œä½†æ˜¯è¿™äº›ç§æœ‰å˜é‡å’Œå®ä¾‹æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œç§æœ‰ä¸Šä¸‹æ–‡ä¸­çš„ this æ‰æ˜¯å®ä¾‹ï¼Œæ‰€ä»¥åªæœ‰å†™ this.xxx = xxx çš„æ“ä½œï¼Œæ‰æ˜¯ç»™å®ä¾‹è®¾ç½®ç§æœ‰å±æ€§ï¼› å®ä¾‹çš„ç§æœ‰å±æ€§å’Œä¸Šä¸‹æ–‡ä¸­çš„ç§æœ‰å˜é‡ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿// 2. å½“å‰ç±»çš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯å•ç‹¬çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ä¾‹å’Œå®ä¾‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„// 3. åœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­ï¼ŒåŸºäº this.xxx = xxx ç»™å®ä¾‹è®¾ç½®çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯è‡ªå·±ç§æœ‰çš„ï¼Œå’Œå…¶å®ƒå®ä¾‹ä¸­çš„å±æ€§å’Œæ–¹æ³•ä¸å†²çªfunction Fn(x) { let y = 20; this.total = x + y; this.say = function () { console.log(`${x} + ${y} = ${this.total}`); };}let f1 = Fn(10); // f1=undefinedlet f2 = new Fn(10); // f2å®ä¾‹å¯¹è±¡let f3 = new Fn(20); // f3å®ä¾‹å¯¹è±¡console.log(f2.total); // 30console.log(f2.x); // undefinedconsole.log(f3.y); // undefinedconsole.log(f1 === f2); // falseconsole.log(f2 === f3); // falsef2.say(); // &quot;10+20=30&quot;console.log(f2.say === f3.say); // false éƒ½æ˜¯å½“å‰å®ä¾‹çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼ˆæ‰€æœ‰å‡ºç°åœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­çš„ this.xxx = xxx æ“ä½œï¼Œéƒ½æ˜¯è®¾ç½®ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼‰console.log(f1.total); // Uncaught TypeError: Cannot read property 'total' of undefined f1ä¸æ˜¯å¯¹è±¡ï¼Œåªæœ‰å¯¹è±¡æ‰èƒ½æ“ä½œé”®å€¼å¯¹console.log(window.total); // 30window.say(); // &quot;10 + 20 = 30&quot; æ¯ä¸€ä¸ªå‡½æ•°éƒ½å†…ç½®å…·å¤‡ä¸€ä¸ªå±æ€§ï¼šprototypeï¼ˆåŸå‹ï¼‰ï¼Œprototypeçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šç»™å…¶ä¸€ä¸ªå †å†…å­˜ï¼‰ =&gt; â€œåŸå‹å¯¹è±¡ä¸Šæ‰€å­˜å‚¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±æ˜¯ä¾›å½“å‰ç±»å®ä¾‹æ‰€è°ƒç”¨çš„å…¬æœ‰çš„å±æ€§å’Œæ–¹æ³•â€ æ™®é€šå‡½æ•° ç±»ä¹Ÿæ˜¯å‡½æ•°ç±»å‹çš„å€¼ åœ¨ç±»çš„prototypeåŸå‹å¯¹è±¡ä¸­ï¼Œé»˜è®¤å­˜åœ¨ä¸€ä¸ªå†…ç½®çš„å±æ€§ï¼šconstructorï¼ˆæ„é€ å‡½æ•°ï¼‰ï¼Œå±æ€§å€¼å°±æ˜¯å½“å‰ç±»(å‡½æ•°)æœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹ŸæŠŠç±»ç§°ä¸ºæ„é€ å‡½æ•° æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¤©ç”Ÿå…·å¤‡ä¸€ä¸ªå±æ€§ï¼š__proto__ï¼ˆåŸå‹é“¾æŒ‡å‘ï¼‰ï¼Œå±æ€§å€¼æ˜¯å½“å‰å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰æ‰€å±ç±»çš„prototypeåŸå‹ å¯¹è±¡æ•°æ®ç±»å‹å€¼ æ™®é€šå¯¹è±¡ æ•°ç»„å¯¹è±¡ æ­£åˆ™å¯¹è±¡ â€¦ å®ä¾‹ä¹Ÿæ˜¯å¯¹è±¡ç±»å‹å€¼ï¼ˆé™¤åŸºæœ¬å€¼å¤–ï¼‰ ç±»çš„prototypeåŸå‹å±æ€§å€¼ä¹Ÿæ˜¯å¯¹è±¡ å‡½æ•°ä¹Ÿå…·å¤‡å¯¹è±¡çš„ç‰¹å¾ï¼ˆå®ƒæœ‰ä¸€é‡èº«ä»½å°±æ˜¯å¯¹è±¡ç±»å‹ï¼‰ â€¦ æ‰€æœ‰çš„å¯¹è±¡æ•°æ®ç±»å‹å€¼ï¼Œéƒ½æ˜¯å†…ç½®ç±»Objectçš„ä¸€ä¸ªå®ä¾‹ äº†è§£ES6-Class ==&gt; é˜®ä¸€å³°ES6æ•™ç¨‹â€“å…³äº Classå®šä¹‰ç±»","link":"/posts/baa6c12d/"},{"title":"JS-å‡½æ•°é˜²æŠ–(debounce)å’ŒèŠ‚æµ(throttling)","text":"é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ èŠ‚æµï¼ˆthrottlingï¼‰ é˜²æŠ–å’ŒèŠ‚æµå‡ºç°çš„åŸå›  é˜²æŠ–å’ŒèŠ‚æµæ˜¯é’ˆå¯¹å“åº”è·Ÿä¸ä¸Šè§¦å‘é¢‘ç‡è¿™ç±»é—®é¢˜çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚ åœ¨ç»™DOMç»‘å®šäº‹ä»¶æ—¶ï¼Œæœ‰äº›äº‹ä»¶æˆ‘ä»¬æ˜¯æ— æ³•æ§åˆ¶è§¦å‘é¢‘ç‡çš„ã€‚ å¦‚é¼ æ ‡ç§»åŠ¨äº‹ä»¶onmousemove, æ»šåŠ¨æ»šåŠ¨æ¡äº‹ä»¶onscrollï¼Œçª—å£å¤§å°æ”¹å˜äº‹ä»¶onresizeï¼Œç¬é—´çš„æ“ä½œéƒ½ä¼šå¯¼è‡´è¿™äº›äº‹ä»¶ä¼šè¢«é«˜é¢‘è§¦å‘ã€‚ å¦‚æœäº‹ä»¶çš„å›è°ƒå‡½æ•°è¾ƒä¸ºå¤æ‚ï¼Œå°±ä¼šå¯¼è‡´å“åº”è·Ÿä¸ä¸Šè§¦å‘ï¼Œå‡ºç°é¡µé¢å¡é¡¿ï¼Œå‡æ­»ç°è±¡ã€‚ åœ¨å®æ—¶æ£€æŸ¥è¾“å…¥æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç»‘å®šonkeyupäº‹ä»¶å‘è¯·æ±‚å»æœåŠ¡ç«¯æ£€æŸ¥ï¼Œç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œäº‹ä»¶çš„è§¦å‘é¢‘ç‡ä¹Ÿä¼šå¾ˆé«˜ï¼Œä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚å‘å‡ºï¼Œå“åº”é€Ÿåº¦ä¼šå¤§å¤§è·Ÿä¸ä¸Šè§¦å‘ã€‚ â€¦. å®ç°é˜²æŠ– é˜²æŠ–å’ŒèŠ‚æµçš„ä½œç”¨éƒ½æ˜¯é˜²æ­¢å‡½æ•°å¤šæ¬¡è°ƒç”¨ã€‚åŒºåˆ«åœ¨äºï¼Œå‡è®¾ä¸€ä¸ªç”¨æˆ·ä¸€ç›´è§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä¸”æ¯æ¬¡è§¦å‘å‡½æ•°çš„é—´éš”å°äºwaitï¼Œé˜²æŠ–çš„æƒ…å†µä¸‹åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè€ŒèŠ‚æµçš„ æƒ…å†µä¼šæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆå‚æ•°waitï¼‰è°ƒç”¨å‡½æ•°ã€‚ 123456789101112131415161718192021222324/* * debounce:å‡½æ•°é˜²æŠ– * @params * func:è¦æ‰§è¡Œçš„å‡½æ•° * wait:é—´éš”ç­‰å¾…æ—¶é—´ * immediate:åœ¨å¼€å§‹è¾¹ç•Œè¿˜æ˜¯ç»“æŸè¾¹ç•Œè§¦å‘æ‰§è¡Œ(true =&gt; åœ¨å¼€å§‹è¾¹ç•Œ) * @return * å¯è¢«è°ƒç”¨çš„å‡½æ•° */ function debounce(func, wait, immediate) { let result = null, timeout = null; return function (...args) { let context = this, now = immediate &amp;&amp; !timeout; clearTimeout(timeout); // é‡è¦ï¼šåœ¨è®¾ç½®æ–°çš„å®šæ—¶å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰è®¾ç½®çš„å®šæ—¶å™¨éƒ½å¹²æ‰ï¼Œå› ä¸ºé˜²æŠ–çš„ç›®çš„æ˜¯ç­‰å¾…æ—¶é—´å†…ï¼Œåªæ‰§è¡Œä¸€æ¬¡ timeout = setTimeout(() =&gt; { timeout = null; if (!immediate) result = func.call(context, ...args); }, wait); if (now) result = func.call(context, ...args); return result; } } å®ç°èŠ‚æµ é˜²æŠ–åŠ¨å’ŒèŠ‚æµæœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ã€‚é˜²æŠ–åŠ¨æ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œï¼ŒèŠ‚æµæ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜æˆæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526272829303132/* * throttleï¼šå‡½æ•°èŠ‚æµæ˜¯ä¸ºäº†ç¼©å‡æ‰§è¡Œé¢‘ç‡ï¼Œå½“è¾¾åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”å°±ä¼šæ‰§è¡Œä¸€æ¬¡ * @params * func:éœ€è¦æ‰§è¡Œçš„å‡½æ•° * wait:è®¾ç½®çš„é—´éš”æ—¶é—´ * @return * è¿”å›å¯è¢«è°ƒç”¨çš„å‡½æ•°*/ let throttle = function (func, wait) { let timeout = null, result = null, previous = 0; // ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ç‚¹ return function (...args) { let now = new Date, context = this; // remainingå°äºç­‰äº0ï¼Œè¡¨ç¤ºä¸Šæ¬¡æ‰§è¡Œè‡³æ­¤æ‰€é—´éš”æ—¶é—´å·²ç»è¶…è¿‡ä¸€ä¸ªæ—¶é—´é—´éš” let remaining = wait - (now - previous); if (remaining &lt;= 0) { clearTimeout(timeout); previous = now; timeout = null; result = func.apply(context, args); } else if (!timeout) { timeout = setTimeout(() =&gt; { previous = new Date; timeout = null; result = func.apply(context, args); }, remaining); } return result; }; };","link":"/posts/fd252af5/"},{"title":"JS-æ·±æµ…æ‹·è´","text":"JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»åœ¨JSä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ä¸¤ç§ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œå®ƒçš„å€¼ç›´æ¥å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œå®ƒåœ¨æ ˆå†…å­˜ä¸­ä»…ä»…å­˜å‚¨äº†ä¸€ä¸ªå¼•ç”¨ï¼Œè€ŒçœŸæ­£çš„æ•°æ®å­˜å‚¨åœ¨å †å†…å­˜ä¸­ å½“æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä¸¤ç§æƒ…å†µ åŸºæœ¬æ•°æ®ç±»å‹ï¼š 12345let a = 3;let b = a;b = 5console.log(a); // 3console.log(b); // 5 å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œå˜é‡ a å’Œå˜é‡ b å„è‡ªä¸ºå€¼ï¼Œå˜é‡ b çš„å€¼æ”¹å˜ä¸ä¼šå½±å“å˜é‡ a çš„å€¼ã€‚ å¼•ç”¨æ•°æ®ç±»å‹ : 123456789var obj1 = { a: 1, b: 2, c: 3}var obj2 = obj1;obj2.a = 5;console.log(obj1.a); // 5console.log(obj2.a); // 5 å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å€¼å…¨éƒ¨è¢«ä¿®æ”¹äº† å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œæˆ‘ä»¬å°† obj1 èµ‹äºˆ obj2 çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®ä»…ä»…åªæ˜¯å°† obj1 å­˜å‚¨åœ¨æ ˆå †ä¸­çš„çš„å¼•ç”¨èµ‹äºˆäº† obj2 ï¼Œè€Œä¸¤ä¸ªå¯¹è±¡æ­¤æ—¶æŒ‡å‘çš„æ˜¯åœ¨å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¿®æ”¹ä»»æ„ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œä¿®æ”¹çš„éƒ½æ˜¯å †å†…å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥åªè¦ä¿®æ”¹äº†ï¼ŒåŒæ ·å¼•ç”¨çš„å¯¹è±¡çš„å€¼ä¹Ÿè‡ªç„¶è€Œç„¶çš„å‘ç”Ÿäº†æ”¹å˜ ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­åªæ˜¯æ­£å¸¸çš„èµ‹å€¼æ“ä½œ æµ…æ‹·è´ ä»…ä»…æ˜¯å¤åˆ¶äº†å¯¹è±¡ä¸­æœ€å¤–å±‚é”®å€¼å¯¹ï¼Œå¯¹äºæ·±å±‚æ¬¡çš„å±æ€§ï¼Œå¦‚æœå­˜å‚¨çš„å€¼æ˜¯ä¹Ÿæ˜¯å¼•ç”¨ç±»å‹çš„, å½¼æ­¤ä¹‹é—´ä¿®æ”¹çš„æ“ä½œä¼šäº’ç›¸å½±å“ å®ç°æµ…æ‹·è´çš„æ–¹æ³•æœ‰å¤šç§ï¼Œä¾‹å¦‚ï¼š æ•°ç»„çš„æµ…æ‹·è´ï¼šArray.slice 12345678let log = console.log;let ary = [1, [2, [3]]];let newAry = ary.slice();newAry[0] = &quot;A&quot;; // æ›´æ”¹ç¬¬ä¸€å±‚çš„æ•°ç»„æˆå‘˜newAry[1][0] = &quot;B&quot;; // æ›´æ”¹ç¬¬äºŒå±‚çš„æˆå‘˜log(ary); // [1,[&quot;B&quot;,[3]]]log(newAry); // [&quot;A&quot;,[&quot;B&quot;,[3]]] å¯¹è±¡çš„æµ…æ‹·è´ï¼šObject.assign 1234567let obj = {name:&quot;AA&quot;,child:{name:&quot;BB&quot;,child:{name: &quot;CC&quot;}}};let newObj = Object.assign({}, obj);newObj.name = &quot;DD&quot;;newObj.child.name = &quot;EE&quot;log(obj); // {name:&quot;AA&quot;,child:{name:&quot;EE&quot;,child:{name:&quot;CC&quot;}}}log(newObj); // {name:&quot;DD&quot;,child:{name:&quot;EE&quot;,child:{name:&quot;CC&quot;}}} æ·±æ‹·è´åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œè‚¯å®šä¸èƒ½è®©æ¯ä¸ªå¯¹è±¡çš„å€¼éƒ½æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜ï¼Œè¿™æ ·çš„è¯ä¸ä¾¿äºæˆ‘ä»¬åšæ“ä½œï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶çš„è¯ç”Ÿäº†æ·±æ‹·è´ æ·±æ‹·è´ä½œç”¨åœ¨å¼•ç”¨ç±»å‹ä¸Šï¼ä¾‹å¦‚ï¼šObjectï¼ŒArrayæ·±æ‹·è´ä¸ä¼šæ‹·è´å¼•ç”¨ç±»å‹çš„å¼•ç”¨ï¼Œè€Œæ˜¯å°†å¼•ç”¨ç±»å‹çš„å€¼å…¨éƒ¨æ‹·è´ä¸€ä»½ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å¼•ç”¨ç±»å‹ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿå¼•ç”¨é”™ä¹±çš„é—®é¢˜ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¤šæ¬¡ä½¿ç”¨åŒæ ·çš„æ•°æ®ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ•°æ®ä¹‹é—´ä¼šèµ·å†²çª å…ˆçœ‹ä¸€ä¸‹åˆ©ç”¨JSONå¯¹è±¡ä¸­çš„æ–¹æ³•æ¥å®ç°çš„æ·±æ‹·è´ï¼š JSON.stringify()ä»¥åŠJSON.parse() 12345678let obj = {name:&quot;AA&quot;,child:{name:&quot;BB&quot;,child:{name: &quot;CC&quot;}}}; let deepObj = JSON.parse(JSON.stringify(obj)); deepObj.name = &quot;DD&quot;; deepObj.child.child.name = &quot;XX&quot;; log(obj); // {name:&quot;AA&quot;,child:{name:&quot;BB&quot;,child:{name:&quot;CC&quot;}}} log(deepObj); // {name:&quot;DD&quot;,child:{name:&quot;BB&quot;,child:{name:&quot;XX&quot;}}} å¯ä»¥çœ‹åˆ°æ²¡æœ‰å‘ç”Ÿå¼•ç”¨é—®é¢˜ï¼Œä¿®æ”¹deepObjçš„æ•°æ®ï¼Œå¹¶ä¸ä¼šå¯¹objé€ æˆä»»ä½•å½±å“ä½†æ˜¯ä½¿ç”¨JSON.stringify()ä»¥åŠJSON.parse()å®ƒæ˜¯ä¸å¯ä»¥æ‹·è´ undefinedã€ functionã€RegExpç­‰ç­‰ç±»å‹çš„ï¼›ä¸”å¯¹äºDateå®ä¾‹åœ¨æ‹·è´åçš„æ–°å¯¹è±¡ä¸­è‡ªåŠ¨æŠŠå®ä¾‹å¯¹è±¡è½¬æˆäº†å­—ç¬¦ä¸² å†™ä¸€ä¸ªæ·±æ‹·è´çš„æ–¹æ³•ï¼Œåˆ©ç”¨å‡½æ•°é€’å½’æ¥è§£å†³æ·±æ‹·è´ 12345678910111213141516171819202122232425262728293031let obj = [ {name: &quot;AA&quot;, age: undefined, arr: [{reg: /^\\d+$/g}]}, {name: &quot;BB&quot;, age: function(){}, arr: [{time: new Date()}]}, {count: 666}, 1, 2, 3];function deepClone(target) { let result; let targetType = {}.toString.call(target); if (targetType === &quot;[object Object]&quot; || targetType === &quot;[object Array]&quot;) { targetType = Array.isArray(target); result = targetType ? [] : {}; for (let key in target) { targetType ? result.push(deepClone(target[key])) : (result[key] = deepClone(target[key])); } } else { result = target; } return result;}let deepObj = deepClone(obj);console.log(obj);console.log(&quot;------------------------&quot;);console.log(deepObj); æ§åˆ¶å°çœ‹ä¸‹æ•ˆæœï¼š ä¿®æ”¹ä¸‹æ•°æ®è¯•ä¸€è¯• 123deepObj[0].name = &quot;CC&quot;;deepObj[1].age = null;deepObj[2].count = 888; æ„Ÿè§‰è¿˜è¡Œï¼Œå¯ä»¥çœ‹åˆ°æœ€ç»ˆæ‹·è´çš„ç»“æœæ˜¯nullã€undefindeã€functionã€RegExpç­‰ç‰¹æ®Šçš„å€¼ä¹Ÿå…¨éƒ¨æ‹·è´æˆåŠŸäº†ï¼Œè€Œä¸”ä¿®æ”¹é‡Œè¾¹çš„å€¼ä¹Ÿä¸ä¼šæœ‰ä»»ä½•é—®é¢˜çš„ åˆ°è¿™é‡Œå°±å®ç°äº†ä¸€ä¸ªç®€å•çš„æ·±æ‹·è´ï¼Œå½“ç„¶ï¼Œæˆ‘ä¹Ÿåªæ˜¯ç®€å•å®ç°ä¸€ä¸‹ï¼Œè¿˜æœ‰å¾ˆå¤šé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œåªæ˜¯ä¸€ä¸ªæ€è·¯ å—~","link":"/posts/474f02db/"},{"title":"JS-è´ªåƒè›‡å°æ¸¸æˆ","text":"è®¾å®šè§„åˆ™éœ€æ±‚ ç‚¹å‡»å¼€å§‹æ¸¸æˆ åˆå§‹åŒ–ä¸€ä¸ªè›‡å¤´+ä¸¤ä¸ªèº«ä½“ï¼Œé»˜è®¤å‘å³ç§»åŠ¨ é£Ÿç‰©ä½ç½®éšæœºåæ ‡ï¼Œæ¯æ¬¡é£Ÿç‰©ç”Ÿæˆæ—¶çš„åæ ‡ä¸èƒ½å’Œè›‡èº«åæ ‡é‡å¤ é”®ç›˜å››ä¸ªæ–¹å‘é”®æ§åˆ¶è›‡å¤´ç§»åŠ¨æ–¹å‘ æ’åˆ°å¢™(åœ°å›¾è¾¹ç•Œ)ã€æ’åˆ°è‡ªå·±(è›‡èº«)æ¸¸æˆå¤±è´¥ æ’åˆ°é£Ÿç‰©ï¼Œåƒæ‰ï¼Œè›‡èº«åŠ ä¸€ã€‚é‡æ–°ç”Ÿæˆé£Ÿç‰© ES5-æ„é€ å‡½æ•°æ¨¡å¼ é¢å‘å¯¹è±¡OOPï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ ä½¿ç”¨JSçš„ES5ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚ JS â€”â€“ é¢å‘å¯¹è±¡æ€æƒ³ã€‚è¿™ä¸ªæ¸¸æˆä¸»è¦åˆ©ç”¨åˆ°äº†å°è£…ã€‚ã€‚ jsä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256// map-size : 100 * 100 = 12 * 9 || 50 * 50 = 24 * 18var map = document.getElementById('snakeWrap'), startBtn = document.getElementById('start');var snakeGame = (function () { var sw = 50, sh = 50, row = 1200 / sw, col = 900 / sh; // create Food function Food() { this.foodPos = this.randomPos(); this.foodView = new CreateDiv(this.foodPos.x, this.foodPos.y, 'food').create(); }; Food.prototype.randomPos = function () { var foodPos; var include = true; while (include) { foodPos = { x: Math.floor(Math.random() * row), y: Math.floor(Math.random() * col) } include = snake.includePos(foodPos); }; return foodPos; } // create div function CreateDiv(x, y, name) { this.x = x * sw; this.y = y * sh; this.class = name; this.viewEle = document.createElement('div'); this.viewEle.className = this.class; this.parent = document.getElementById('snakeWrap'); } CreateDiv.prototype.create = function () { this.viewEle.style.width = sw + 'px'; this.viewEle.style.height = sh + 'px'; this.viewEle.style.position = 'absolute'; this.viewEle.style.left = this.x + 'px'; this.viewEle.style.top = this.y + 'px'; this.parent.appendChild(this.viewEle); return this; } CreateDiv.prototype.remove = function () { this.parent.removeChild(this.viewEle); } // snake function Snake() { this.head = null; this.tail = null; // x,y all position this.pos = [ [2, 0], [1, 0], [0, 0] ]; // direction change this.directionStorage = { right: { x: 1, y: 0 }, left: { x: -1, y: 0 }, up: { x: 0, y: -1 }, down: { x: 0, y: 1 } }; // storage view this.snakeViewEle = []; } // test next position Snake.prototype.PosTesting = function () { if (!game.timer) return; var nextPos = { x: this.head[0] + this.direction.x, y: this.head[1] + this.direction.y }; // console.log(nextPos); // test food if (nextPos.x === this.curFood.foodPos.x &amp;&amp; nextPos.y === this.curFood.foodPos.y) { this.eat(); return true; } // test self if (this.includePos(nextPos)) { game.gameOver(); return; } // test boundary if (nextPos.x &gt;= row || nextPos.y &gt;= col || nextPos.x &lt; 0 || nextPos.y &lt; 0) { game.gameOver(); return; } // GO this.pos.unshift([nextPos.x, nextPos.y]); this.play(); return true; } // Snake start Snake.prototype.play = function (eat) { // for (var i = 0; i &lt; this.snakeViewEle.length; i++) { var curView = this.snakeViewEle[i]; var curPos = this.pos[i]; curView.viewEle.style.left = curPos[0] * sw + 'px'; curView.viewEle.style.top = curPos[1] * sh + 'px'; } this.head = this.pos[0]; if (eat) { this.curFood = new Food; game.score++; return; } this.pos.pop(); } // eat food Snake.prototype.eat = function () { this.pos.unshift([this.curFood.foodPos.x, this.curFood.foodPos.y]); this.curFood.foodView.viewEle.className = 'snakeBody'; this.snakeViewEle.push(this.curFood.foodView); this.play(true); } Snake.prototype.includePos = function (objPos) { for (var i = 0; i &lt; this.pos.length; i++) { var item = this.pos[i]; if (item[0] === objPos.x &amp;&amp; item[1] === objPos.y) { return true; } else if (i == this.pos.length - 1) { return false; } } } Snake.prototype.init = function () { // init snake var head = new CreateDiv(this.pos[0][0], this.pos[0][1], 'snakeHead').create(), body1 = new CreateDiv(this.pos[1][0], this.pos[0][1], 'snakeBody').create(), body2 = new CreateDiv(this.pos[2][0], this.pos[0][1], 'snakeBody').create(); // init food &amp;&amp; storage position this.curFood = new Food; // init direction this.direction = this.directionStorage.right; // pos relation this.head = this.pos[0]; this.snakeViewEle.push(head, body1, body2); } // control direction function control(e) { if (e.keyCode === 37 &amp;&amp; snake.direction !== snake.directionStorage.right) { snake.direction = snake.directionStorage.left; game.snakeTurnHead(); } else if (e.keyCode === 38 &amp;&amp; snake.direction !== snake.directionStorage.down) { snake.direction = snake.directionStorage.up; game.snakeTurnHead(); } else if (e.keyCode === 39 &amp;&amp; snake.direction !== snake.directionStorage.left) { snake.direction = snake.directionStorage.right; game.snakeTurnHead(); } else if (e.keyCode === 40 &amp;&amp; snake.direction !== snake.directionStorage.up) { snake.direction = snake.directionStorage.down; game.snakeTurnHead(); } } // define game function Game() { this.timer = null; this.score = 0; } // reset map Game.prototype.gameOver = function () { clearInterval(this.timer); alert(&quot;å¾—åˆ† : &quot; + this.score); // remove onkeydown document.body.removeEventListener('keydown', control, false); startBtn.parentNode.style.display = &quot;block&quot;; snake.snakeViewEle = []; map.innerHTML = ''; snake.pos = [ [2, 0], [1, 0], [0, 0] ]; this.score = 0; } // turn direction Game.prototype.snakeTurnHead = function () { this.stop(); snake.PosTesting() &amp;&amp; this.start(); } // stop Game.prototype.stop = function () { clearInterval(this.timer); this.timer = true; } // start Game.prototype.start = function () { this.timer = setInterval(function () { // PosTest &amp;&amp; play snake.PosTesting(); }, 250); } // init game Game.prototype.init = function () { clearInterval(this.timer); snake.init(); this.start(); // monitor onkeydown document.body.addEventListener('keydown', control, false); } // create example var snake = new Snake; var game = new Game; // return example return { snake, game } // End})();// start gamestartBtn.onclick = function () { this.parentNode.style.display = 'none'; snakeGame.game.init();}; cssä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657*{margin: 0; padding: 0;}body{background-color: #f3f3f3;}.content{ width: 1200px; height: 900px; margin: 10px 0 0 10px; position: relative;}/* btn */.content .btn{ width: 100%; height: 100%; background-color: rgba(255, 255, 255, .3); position: absolute; left: 0; top: 0; display: none;}.content .btn:last-child{ display: block;}.content .btn button{ width: 120px; height: 80px; font-size: 42px; display: block; margin: 35% auto;}/* 12 * 9 *//* snakeWrap */#snakeWrap{ width: 1200px; height: 900px; background-color: #000; position: absolute; top: 0; left: 0;}#snakeWrap div{ width: 100px; height: 100px; background-repeat: no-repeat; background-size: cover;}/* snake style */#snakeWrap .snakeHead{ background-color: #ff0000;}#snakeWrap .snakeBody{ background-color: #e0de43;}#snakeWrap .food{ background-color: #fff;} htmlä»£ç 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;snake&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;./snake.css&quot;&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;content&quot;&gt; &lt;div id=&quot;snakeWrap&quot;&gt;&lt;/div&gt; &lt;div class=&quot;btn&quot;&gt;&lt;button id=&quot;start&quot;&gt;å¼€å§‹&lt;/button&gt;&lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;./snake.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å°ç»“ï¼šæ¸¸æˆæ•ˆæœå›¾ï¼š å¤§æ¦‚å®ç°çš„å·®ä¸å¤šäº†ã€‚ ä½†è¿˜æœ‰ä¸€äº›åœ°æ–¹å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œä¾‹å¦‚è›‡çš„ç§»åŠ¨æ–¹å¼ï¼Œä¸Šé¢é‡‡ç”¨çš„æ˜¯å¾ªç¯åæ ‡ï¼Œè®©è›‡èº«æŒ¨ä¸ªå‰è¿›ã€‚è¿™æ ·çš„æ–¹å¼ä¸å…æœ‰äº› â€˜ç¬¨é‡â€™ã€‚éšè›‡èº«è¶Šæ¥è¶Šé•¿ï¼Œä»£ç æ€§èƒ½ä¸é«˜ã€‚ å¯ä»¥é‡‡ç”¨çš„ä¼˜åŒ–æ–¹å¼ï¼šåˆ©ç”¨ â€˜æå¤´å»å°¾â€™ å®ç°ç§»åŠ¨åŠ¨ä½œã€‚å³åœ¨æ’åˆ°é£Ÿç‰©æ—¶ï¼Œåˆ é™¤é£Ÿç‰©ï¼Œä¸”æ–°å»ºä¸€ä¸ªè›‡å¤´ï¼Œåæ ‡ä¸ºé£Ÿç‰©çš„åæ ‡ã€‚ éšä¹‹åˆ é™¤è›‡èº«å°¾éƒ¨ï¼Œæ–°å»ºä¸€ä¸ªè›‡èº« ï¼Œè¦†ç›–æ—§è›‡å¤´çš„ä½ç½®ã€‚ è¿™æ ·æ¯æ¬¡æ’åˆ°é£Ÿç‰©åªéœ€æ“ä½œè›‡å¤´å’Œè›‡å°¾å°±å¯ä»¥äº†ã€‚ å…ˆä¸ä¼˜åŒ–äº†ï¼Œç¡äº†ç¡äº†~","link":"/posts/ba633e46/"},{"title":"JavaScript - æ¨¡å—çš„å¾ªç¯åŠ è½½","text":"ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½? â€œå¾ªç¯åŠ è½½â€ï¼ˆcircular dependencyï¼‰ æŒ‡çš„æ˜¯ï¼šå¦‚aè„šæœ¬æ‰§è¡Œä¸­ä¾èµ–(å¯¼å…¥)äº†bè„šæœ¬ï¼Œè€Œbè„šæœ¬æ‰§è¡Œä¸­åˆä¾èµ–äº†aè„šæœ¬ 12345// a.jsconst b = require('b');// b.jsconst a = require('a'); ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¾ªç¯åŠ è½½ è¡¨ç¤ºå­˜åœ¨ å¼ºè€¦åˆ ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œå¯èƒ½ä¼šå¯¼è‡´é€’å½’å¼•ç”¨æ— é™åŠ è½½ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸ç»§ç»­è¿è¡Œã€‚ äºŒã€CommonJS åŠ è½½è§„èŒƒ1. CommonJSæ¨¡å—çš„åŠ è½½åŸç†CommonJSçš„ä¸€ä¸ªæ¨¡å—ï¼Œå°±æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ã€‚requireå‘½ä»¤ç¬¬ä¸€æ¬¡åŠ è½½è¯¥è„šæœ¬ï¼Œå°±ä¼šæ‰§è¡Œæ•´ä¸ªè„šæœ¬ï¼Œç„¶ååœ¨å†…å­˜ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚ 123456{ id: '...', // æ¨¡å—å exports: { ... }, // æ¨¡å—è¾“å‡ºçš„å„ä¸ªæ¥å£(å³å¯¼å‡ºçš„å±æ€§) loaded: true, // å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„è„šæœ¬æ˜¯å¦æ‰§è¡Œå®Œæ¯• ... // æ›´å¤šå±æ€§...} å½“ loaded ä¸ºtrueæ—¶ï¼Œåˆ™è¡¨ç¤ºæ­¤æ¨¡å—å·²åŠ è½½å®Œæˆï¼Œè¿›å…¥æ¨¡å—ç¼“å­˜åŒºã€‚ä»¥åéœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šåˆ°exportså±æ€§ä¸Šé¢å–å€¼ã€‚å³ä½¿å†æ¬¡æ‰§è¡Œrequireå‘½ä»¤ï¼Œä¹Ÿä¸ä¼šå†æ¬¡æ‰§è¡Œè¯¥æ¨¡å—ï¼Œè€Œæ˜¯åˆ°ç¼“å­˜ä¹‹ä¸­å–å€¼ã€‚ CommonJS è¾“å‡ºå€¼çš„æ‹·è´ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´(åŸå§‹å€¼çš„æ‹·è´)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚ 12345678910111213141516// a.jsvar b = require('./b');console.log(b.foo);setTimeout(() =&gt; { console.log(b.foo); console.log(require('./b').foo);}, 1000);// b.jslet foo = 1;setTimeout(() =&gt; { foo = 2;}, 500);module.exports = { foo: foo,}; æ‰§è¡Œ a.js 1234$ node a.js&gt; 1&gt; 1&gt; 1 ä¸Šé¢ä»£ç è¯´æ˜ï¼Œb æ¨¡å—åŠ è½½ä»¥åï¼Œå®ƒçš„å†…éƒ¨ foo å˜åŒ–å°±å½±å“ä¸åˆ°è¾“å‡ºçš„ exports.foo äº†ã€‚è¿™æ˜¯å› ä¸º foo æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦åœ¨ CommonJS ä¸­åŠ¨æ€è·å–æ¨¡å—ä¸­çš„å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦å€ŸåŠ©äºå‡½æ•°å»¶æ—¶æ‰§è¡Œçš„ç‰¹æ€§ã€‚ 123456789101112131415161718// a.jsvar b = require('./b');console.log(b.foo());setTimeout(() =&gt; { console.log(b.foo()); console.log(require('./b').foo());}, 1000);// b.jslet foo = 1;setTimeout(() =&gt; { foo = 2;}, 500);module.exports = { foo: () =&gt; { return foo; },}; æ‰§è¡Œ a.js 1234$ node a.js&gt; 1&gt; 2&gt; 2 æ€»ç»“ä¸€ä¸‹ï¼š CommonJS è¢«é‡å¤å¼•å…¥çš„æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œä¼šç›´æ¥è·å–åˆ°è¯¥æ¨¡å—æš´éœ²å‡ºçš„ module.exports å¯¹è±¡ å¦‚æœè¦å®æ—¶è·å–æ¨¡å—ä¸­çš„æœ€æ–°å€¼ï¼Œåˆ™éœ€è¦ç”¨å…¶ä»–çš„æ–¹å¼å»æ›´æ–° module.exports ä¸Šçš„å€¼ å¦‚æœ module.exports æš´éœ²å‡ºçš„å±æ€§éƒ½æ˜¯ å¼•ç”¨ç±»å‹ çš„å€¼ã€‚é‚£ä¹ˆå°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº† 2. CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½CommonJSçš„é‡è¦ç‰¹æ€§æ˜¯è¾¹æ‰§è¡Œä»£ç ï¼Œè¾¹åŠ è½½(åŒæ­¥)requireå¯¼å…¥æ¨¡å—ã€‚å³è„šæœ¬ä»£ç åœ¨requireçš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚CommonJSçš„åšæ³•æ˜¯ï¼Œä¸€æ—¦å‡ºç°æŸä¸ªæ¨¡å—è¢«â€å¾ªç¯åŠ è½½â€ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚ è¯¦ç»†å¯æŸ¥çœ‹ å®˜æ–¹æ–‡æ¡£ é‡Œé¢çš„ä¾‹å­ã€‚ ä¸‹é¢å°†å‚ç…§æ–‡æ¡£ä¸­çš„ä¾‹å­ï¼Œè¯•ä¸€è¯•ã€‚ è„šæœ¬æ–‡ä»¶a.jsä»£ç å¦‚ä¸‹ã€‚ 1234567exports.done = false;const B = require('./b.js');console.log('åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ doneå€¼ä¸ºï¼š', B.done);exports.done = true;exports.done2 = 'done2'; è„šæœ¬æ–‡ä»¶b.jsä»£ç å¦‚ä¸‹ã€‚ 12345const A = require('./a.js');exports.done = true;console.log('åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ doneå€¼ä¸ºï¼š', A.done);console.log('åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š', A.done2); æ‰§è¡Œ a.js : 1234$ node a.js&gt; åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ doneå€¼ä¸ºï¼š false&gt; åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š undefined&gt; åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ doneå€¼ä¸ºï¼š true å¯ä»¥çœ‹åˆ°ï¼Œåœ¨aè„šæœ¬ä¸­æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œç«‹å³å°±å»åŠ è½½æ‰§è¡Œäº†bè„šæœ¬ã€‚åœ¨bè„šæœ¬ä¸­åˆå»è¯»å–äº†aè„šæœ¬ï¼Œä½†æ­¤æ—¶aè„šæœ¬åªæ‰§è¡Œåˆ°äº†ç¬¬äºŒè¡Œã€‚æ‰€ä»¥bè„šæœ¬ä¸­å°±åªèƒ½å¯¼å…¥aè„šæœ¬å·²æ‰§è¡Œçš„éƒ¨åˆ†ã€‚æ•…æ­¤è¾“å‡ºAæ¨¡å—çš„doneå€¼ä¸ºfalseï¼Œè€Œdone2æ˜¯undefinedã€‚ å½“bè„šæœ¬æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œaè„šæœ¬æ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ æ¥ç€å†™ä¸€ä¸ªè„šæœ¬main.jsï¼ŒéªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚ è„šæœ¬æ–‡ä»¶main.jsä»£ç å¦‚ä¸‹ã€‚ 1234567const A = require('./a.js');const B = require('./b.js');console.log('A.done:', A.done); console.log('A.done2:', A.done2); console.log('B.done:', B.done); æ‰§è¡Œ main.js 1234567$ node main.js&gt; åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ doneå€¼ä¸ºï¼š false&gt; åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š undefined&gt; åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ doneå€¼ä¸ºï¼š true&gt; A.done: true&gt; A.done2: done2&gt; B.done: true ä¸Šé¢çš„ä»£ç è¯æ˜äº†ä¸¤ä»¶äº‹: åœ¨b.jsä¹‹ä¸­ï¼Œa.jsæ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåªæ‰§è¡Œäº†éƒ¨åˆ†ã€‚ main.jsæ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œb.jsï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„b.jsçš„æ‰§è¡Œç»“æœã€‚å³ï¼š 1exports.done = true; ä¸‰ã€ES6æ¨¡å—çš„å¾ªç¯åŠ è½½1. babel-nodeæä¾›ä¸€ä¸ªè‡ªå·±åœ¨æœ¬åœ°è°ƒè¯• js ä»£ç æ—¶å¸¸ä½¿ç”¨çš„æ–¹å¼ï¼šä½¿ç”¨ babel-node å‘½ä»¤ï¼Œæ¥è¿è¡Œå«æœ‰ import/export è¯­æ³•çš„ js ä»£ç ã€‚ æ³¨æ„ï¼šbabel-node ä¸èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒï¼å› ä¸º babel-node ä¼šåŠ è½½æ›´å¤šèµ„æºå’Œæ¨¡å—ï¼Œä½¿å¾—è¿è¡Œç¯å¢ƒå˜ã€Œé‡ã€ã€‚ babel @7.x ~ 1$ npm i -g @babel/core @babel/node é¡¹ç›®æ ¹ç›®å½•ä¸­ä¸‹æ‰§è¡Œï¼š 1$ npm i @babel/preset-env â€“save-dev .babelrc æ–‡ä»¶é…ç½® 123{ &quot;presets&quot;: [&quot;@babel/preset-env&quot;]} 2. ES6æ¨¡å—çš„åŠ è½½æœºåˆ¶ES6 æ¨¡å—è·Ÿ CommonJS æ¨¡å—çš„ä¸åŒï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š ES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼å¾—å¼•ç”¨ï¼Œè¾“å‡ºæ¥å£åŠ¨æ€ç»‘å®šã€‚è€Œ CommonJS è¾“å‡ºçš„åˆ™æ˜¯å€¼å¾—æ‹·è´ ES6 æ¨¡å—ç¼–è¯‘æ—¶æ‰§è¡Œï¼Œè€Œ CommonJS æ¨¡å—æ€»æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡ŒåŠ è½½ ES6æ¨¡å—æœºåˆ¶ï¼šåœ¨é‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤importæ—¶ï¼Œä¸ä¼šå»æ‰§è¡Œæ¨¡å—ï¼Œè€Œæ˜¯åªç”Ÿæˆä¸€ä¸ªå¼•ç”¨ã€‚ç­‰åˆ°çœŸçš„éœ€è¦ç”¨åˆ°æ—¶ï¼Œå†åˆ°æ¨¡å—é‡Œé¢å»å–å€¼ã€‚ 123456789101112131415// a.jsimport { foo } from './b';console.log(foo);setTimeout(() =&gt; { console.log(foo); import('./b').then(({ foo }) =&gt; { console.log(foo); });}, 1000);// b.jsexport let foo = 1;setTimeout(() =&gt; { foo = 2;}, 500); æ‰§è¡Œå‘½ä»¤ï¼šbabel-node a.js 1234$ babel-node a.js&gt; 1&gt; 2&gt; 2 å¯ä»¥å‡æƒ³ä¸º ES6æ¨¡å—æœºåˆ¶æŠŠ â€œæ•´ä¸ªæ¨¡å—å½“ä½œäº†ä¸€ä¸ªå¼•ç”¨é—­åŒ…â€ ES6 é™æ€ç¼–è¯‘ import å‘½ä»¤ä¼šè¢« JavaScript å¼•æ“é™æ€åˆ†æï¼Œä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œã€‚ export å‘½ä»¤ä¼šæœ‰å˜é‡å£°æ˜æå‰çš„æ•ˆæœã€‚ å…³äº export å˜é‡å£°æ˜æå‡: æ­£å¸¸çš„å¼•å…¥æ¨¡å—æ˜¯æ²¡åŠæ³•çœ‹å‡ºå˜é‡å£°æ˜æå‡çš„ç‰¹æ€§ï¼Œéœ€è¦é€šè¿‡å¾ªç¯ä¾èµ–åŠ è½½æ‰èƒ½çœ‹å‡ºã€‚ 123456789101112131415// a.jsimport { foo } from './b';console.log('a.js');export const bar = 1;export const bar2 = () =&gt; { console.log('bar2');};export function bar3() { console.log('bar3');}// b.jsexport let foo = 1;import * as a from './a';console.log(a); æ‰§è¡Œ 123$ babel-node a.js&gt; { bar3: [Function: bar3], bar: undefined, bar2: undefined }&gt; a.js export å¯¼å‡ºæå‡ç±»ä¼¼äº es5 æœºåˆ¶ä¸­çš„å˜é‡æå‡æœºåˆ¶ã€‚ ç”±functionå£°æ˜çš„å‡½æ•°ä¼šåœ¨æå‡å‘½åçš„åŒæ—¶ä¸€å¹¶èµ‹å€¼ (es5æœºåˆ¶) 3. ES6 æ¨¡å—å¾ªç¯ä¾èµ–è·Ÿ CommonJS æ¨¡å—ä¸€æ ·ï¼ŒES6 ä¸ä¼šå†å»æ‰§è¡Œé‡å¤åŠ è½½çš„æ¨¡å—ï¼Œåˆç”±äº ES6 åŠ¨æ€è¾“å‡ºç»‘å®šçš„ç‰¹æ€§ï¼Œèƒ½ä¿è¯ ES6 åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½è·å–å…¶å®ƒæ¨¡å—å½“å‰çš„æœ€æ–°å€¼ã€‚ 12345678910111213141516// a.jsconsole.log('a starting')import {foo} from './b';console.log('in b, foo:', foo);export const bar = 2;console.log('a done');// b.jsconsole.log('b starting');import {bar} from './a';export const foo = 'foo';console.log('in a, bar:', bar);setTimeout(() =&gt; { console.log('in a, setTimeout bar:', bar);})console.log('b done'); æ‰§è¡Œ a.js 1234567$ babel-node a.js&gt; in a, bar: undefined&gt; b done&gt; a starting&gt; in b, foo: foo&gt; a done&gt; in a, setTimeout bar: 2 ES6æ¨¡å—ä¸ä¼šç¼“å­˜è¿è¡Œç»“æœï¼Œè€Œæ˜¯åŠ¨æ€åœ°å»è¢«åŠ è½½çš„æ¨¡å—å–å€¼ï¼Œä»¥åŠå˜é‡æ€»æ˜¯ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚ è¿™å¯¼è‡´ES6å¤„ç†â€å¾ªç¯åŠ è½½â€ä¸CommonJSæœ‰æœ¬è´¨çš„ä¸åŒã€‚ES6æ ¹æœ¬ä¸ä¼šå…³å¿ƒæ˜¯å¦å‘ç”Ÿäº†â€å¾ªç¯åŠ è½½â€ï¼Œåªæ˜¯ç”Ÿæˆä¸€ä¸ªæŒ‡å‘è¢«åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±ä¿è¯ï¼ŒçœŸæ­£å–å€¼çš„æ—¶å€™èƒ½å¤Ÿå–åˆ°å€¼ã€‚","link":"/posts/41c7d5fc/"},{"title":"VUE-component","text":"VUEä¸­çš„ç»„ä»¶ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼š æ¯ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾ å¯å¤ç”¨ æ–¹ä¾¿ç»´æŠ¤ æ–¹ä¾¿æ‹†åˆ† æ¯ä¸ªç»„ä»¶ä½œç”¨åŸŸéš”ç¦»ï¼ˆäº’ä¸å¹²æ‰°ï¼‰ æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ æœ‰è‡ªå·±çš„å“åº”å¼æ•°æ®å’Œå„ç§æ–¹æ³•ï¼ˆäº‹ä»¶ï¼‰ â€¦ ç»„ä»¶çš„ç»„ç»‡ é€šå¸¸ä¸€ä¸ªåº”ç”¨ä¼šä»¥ä¸€æ£µåµŒå¥—çš„ç»„ä»¶æ ‘çš„å½¢å¼æ¥ç»„ç»‡ï¼š 1. å…¨å±€ç»„ä»¶ &amp; ç»„ä»¶çš„åŸºæœ¬è¯­æ³• åœ¨ä»»ä½•ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆä¸éœ€è¦å¼•å…¥ï¼Œç›´æ¥åœ¨ç»„ä»¶æ¨¡æ¿ä¸­è°ƒç”¨å³å¯ï¼‰Vue.component(componentName,options) ç»„ä»¶åå­—ä¸­çš„ä¸€ç‚¹è§„èŒƒ kebab-caseï¼šåªèƒ½&lt;kebab-case&gt;è°ƒç”¨ PasalCaseï¼šæ—¢å¯ç±»ä¼¼å‰ç§æ–¹å¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥&lt;pasalcase&gt;æ–¹å¼è°ƒç”¨ï¼ˆæ¸²æŸ“çš„æ—¶å€™ä¼šæŠŠæ‰€æœ‰å•è¯å­—æ¯éƒ½æ¸²æŸ“ä¸ºå°å†™ï¼Œä½†æ˜¯åœ¨ç»„ä»¶ä¸­å¯ä»¥å¤§å†™ï¼‰ è°ƒç”¨ç»„ä»¶çš„ç»†èŠ‚è§„èŒƒ é‡‡ç”¨åŒé—­åˆæ–¹å¼ å•é—­åˆæ–¹å¼ä¸ç¬¦åˆw3cè§„èŒƒï¼ˆåªèƒ½è¯†åˆ«ä¸€ä¸ªï¼‰ template æ¯ä¸ªç»„ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´  æ¨¡æ¿å­—ç¬¦ä¸²æ–¹å¼ templateæ ‡è®°æ–¹å¼ slotæ’æ§½å¤„ç† åŸºç¡€æ“ä½œ å¤šæ’æ§½çš„æŒ‡å®š dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¿è¯ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®äº’ä¸å¹²æ‰°ï¼ˆè¿”å›çš„å¯¹è±¡ä¸­åˆå§‹åŒ–æ•°æ®ï¼‰ â€¦ 2. å±€éƒ¨ç»„ä»¶ åˆ›å»ºç»„ä»¶ï¼šlet componenName={â€¦} åŸºäºcomponentså±æ€§å£°æ˜ç»„ä»¶ï¼šæƒ³ç”¨å“ªä¸ªç»„ä»¶éœ€è¦å…ˆå£°æ˜ ä½¿ç”¨ç»„ä»¶ 3. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹çˆ¶ä¼ å­ï¼špropså±æ€§ä¼ é€’ çˆ¶ç»„ä»¶è°ƒç”¨åˆ°çš„æ—¶å€™ 1&lt;my-component aa='AAAA' :bb='xxx'&gt;&lt;/my-component&gt; å­ç»„ä»¶ä¸­åŸºäºpropså£°æ˜éœ€è¦æ¥æ”¶çš„å±æ€§å€¼ 1234Vue.component('my-component',{ props:['aa','bb'], ...}) propsä¸­å£°æ˜çš„å±æ€§å’Œdataä¸€æ ·ï¼Œæ˜¯å“åº”å¼æ•°æ®ï¼ŒæŒ‚è½½åˆ°vmå®ä¾‹ä¸Šï¼Œå¯æ§åˆ¶è§†å›¾æ¸²æŸ“ propsä¸­çš„ä¸€äº›ç»†èŠ‚é—®é¢˜ å‘½åå¤§å°å†™ï¼šä¼ é€’çš„æ˜¯kebab-caseæ ¼å¼ï¼Œpropsä¸­è·å–çš„æ˜¯camelCaseé©¼å³°å‘½å æŒ‡å®šå±æ€§çš„ç±»å‹ï¼šprops:{xxx:String,â€¦} æŒ‡å®šå±æ€§çš„é»˜è®¤å€¼ï¼šprops:{xxx:{type:String,default:â€™xxxâ€™,required:true}} typeå¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ„ä¸ºæŒ‡å®šçš„å¤šç±»å‹çš†å¯ä»¥ defaultå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›å€¼æ˜¯é»˜è®¤å€¼ validatorè‡ªå®šä¹‰éªŒè¯è§„åˆ™å‡½æ•°ï¼šå¿…é¡»ç¬¦åˆå‡½æ•°ä¸­æŒ‡å®šçš„è§„åˆ™ï¼Œè¿”å›true/false ä¼ é€’çš„å±æ€§å€¼é»˜è®¤éƒ½æ˜¯å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¦‚æœæƒ³è¦è®©ä¼ é€’çš„å€¼æ˜¯æ•°å­—ã€å¸ƒå°”ã€æ•°ç»„ã€å¯¹è±¡ç­‰æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨v-bindå¤„ç† æ ·å¼å’Œclassè‡ªåŠ¨åˆå¹¶é—®é¢˜ 4. Vueçš„å•å‘æ•°æ®æµæ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚ Vue çš„çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ‰§è¡Œé¡ºåºå¯ä»¥å½’ç±»ä¸ºä»¥ä¸‹ 4 éƒ¨åˆ†ï¼š åŠ è½½æ¸²æŸ“è¿‡ç¨‹ï¼šçˆ¶ beforeCreate -&gt; çˆ¶ created -&gt; çˆ¶ beforeMount -&gt; å­ beforeCreate -&gt; å­ created -&gt; å­beforeMount-&gt; å­ mounted -&gt; çˆ¶ mounted å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼šçˆ¶ beforeUpdate -&gt; å­beforeUpdate -&gt; å­ updated -&gt; çˆ¶ updated çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼šçˆ¶ beforeUpdate -&gt; çˆ¶ updated é”€æ¯è¿‡ç¨‹ï¼šçˆ¶ beforeDestroy -&gt; å­ beforeDestroy -&gt; å­ destroyed -&gt; çˆ¶ destroyed æ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ propã€‚å¦‚æœè¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚å­ç»„ä»¶æƒ³ä¿®æ”¹æ—¶ï¼Œåªèƒ½é€šè¿‡ $emit æ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚æœ‰ä¸¤ç§å¸¸è§çš„è¯•å›¾æ”¹å˜ä¸€ä¸ª prop çš„æƒ…å½¢ : è¿™ä¸ª prop ç”¨æ¥ä¼ é€’ä¸€ä¸ªåˆå§‹å€¼ï¼›è¿™ä¸ªå­ç»„ä»¶æ¥ä¸‹æ¥å¸Œæœ›å°†å…¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°çš„ prop æ•°æ®æ¥ä½¿ç”¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªæœ¬åœ°çš„ data å±æ€§å¹¶å°†è¿™ä¸ª prop ç”¨ä½œå…¶åˆå§‹å€¼ è¿™ä¸ª prop ä»¥ä¸€ç§åŸå§‹çš„å€¼ä¼ å…¥ä¸”éœ€è¦è¿›è¡Œè½¬æ¢ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨è¿™ä¸ª prop çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§ 5. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹å­æ”¹çˆ¶ï¼šthis.$emit è®¢é˜…è‡ªå®šä¹‰äº‹ä»¶ï¼šè°ƒç”¨ç»„ä»¶çš„æ—¶å€™åŸºäºå±æ€§ä¼ é€’ä¸€ä¸ªæ–¹æ³• ï¼ˆçˆ¶ï¼‰123456789&lt;my-component @func='xxx'&gt;&lt;/my-component&gt;new Vue({ methods:{ xxx(value){ //=&gt; valueæ˜¯this.$emitæ—¶å€™ä¼ é€’çš„ç¬¬äºŒä¸ªå‚æ•°å€¼ } }}); é€šçŸ¥è‡ªå®šä¹‰äº‹ä»¶æ‰§è¡Œ ï¼ˆå­ï¼‰1234567{ methods:{ xxx(){ this.$emit('func',10); } }} ä¹Ÿå¯ä»¥åŸºäºæ­¤æ–¹æ³•å®ç°å…„å¼Ÿç»„ä»¶ï¼ˆçˆ¶å­ç»„ä»¶ã€éš”ä»£ç»„ä»¶ï¼‰ä¹‹é—´çš„ä¿¡æ¯é€šä¿¡1234567let eventBus=new Vue; //=&gt;åˆ›å»ºäº‹ä»¶æ€»çº¿//Aç»„ä»¶eventBus.$on('xxxA',this.func);//Bç»„ä»¶eventBus.$emit('xxxA'); 6. åŸºäºrefå®ç°çˆ¶å­ç»„ä»¶ä¿¡æ¯é€šä¿¡ ref å¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼ŒåŸºäºæ­¤å¯ä»¥å¿«é€Ÿè·å–å’Œæ“ä½œå­ç»„ä»¶ä¸­çš„æ•°æ® $parentå’Œ$childrenæ˜¯è·å–çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„å®ä¾‹ï¼Œåªä¸è¿‡$childrenæ˜¯ä¸€ä¸ªæ•°ç»„é›†åˆï¼Œéœ€è¦è®°ä½ç»„ä»¶é¡ºåºæ‰å¯ä»¥ 7. åŸºäºprovideå’Œinjectå®ç°ç¥–å…ˆä¸åä»£çš„é€šä¿¡ ç¥–å…ˆç»„ä»¶åŸºäºprovideæ³¨å†Œéœ€è¦ä¾›åä»£ç»„ä»¶ä½¿ç”¨çš„æ•°æ®1234567{ provide:{ //=&gt;å¯¹è±¡æˆ–è€…è¿”å›å¯¹è±¡çš„å‡½æ•°éƒ½å¯ä»¥ï¼ˆå±æ€§å€¼å¦‚æœæ˜¯dataä¸­çš„æ•°æ®ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å‡½æ•°çš„æ–¹æ³•è¿›è¡Œå¤„ç†ï¼‰ name:'zhangsan', year:10 }, ...} åä»£ç»„ä»¶åŸºäºinjectå£°æ˜éœ€è¦ä½¿ç”¨çš„æ•°æ®å¹¶è°ƒå–ä½¿ç”¨12345678{ inject:['name'], methods:{ func(){ let name=this.name; } }} æ›´å¤šVueå®˜æ–¹æ–‡æ¡£ ==&gt; æ·±å…¥äº†è§£ç»„ä»¶","link":"/posts/b0880b06/"},{"title":"redux-compose.js","text":"reduxæ˜¯jsæ¨¡å—å¼€å‘ä¸­çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Œä¸å…¶ä»–æ¡†æ¶æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œå¦‚ï¼šreactã€‚ æ‰€ä»¥reduxå¯ä»¥ç›´æ¥åœ¨åˆ«çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ç”±äºæ²¡æœ‰å’Œreact ç›¸å…³é€»è¾‘è€¦åˆï¼Œæ‰€ä»¥ redux çš„æºç å¾ˆçº¯ç²¹ï¼Œç›®çš„å°±æ˜¯æŠŠå¦‚ä½•æ•°æ®ç®¡ç†å¥½ã€‚è€ŒçœŸæ­£åœ¨ react é¡¹ç›®ä¸­ä½¿ç”¨ redux æ—¶ï¼Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ªreact-reduxå½“ä½œè¿æ¥å™¨ï¼Œå»è¿æ¥reactå’Œ redux ã€‚ compose.jsreduxåŸºæœ¬çš„äº”ä¸ªAPIä¸­ï¼Œcompose.jsæ˜¯å”¯ä¸€ä¸€ä¸ªèƒ½å•ç‹¬æ‹¿å‡ºæ¥ä½¿ç”¨çš„å‡½æ•°ã€‚å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸ç”¨çš„ç»„åˆå‡½æ•°ï¼Œå’Œreduxæœ¬èº«è”ç³»ä¸å¤§ å…ˆçœ‹ä¸€ä¸‹ compose.js æºç  1234567891011export default function compose(...funcs) { if (funcs.length === 0) { return arg =&gt; arg } if (funcs.length === 1) { return funcs[0] } return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)))} å…¶å® compose å‡½æ•°åšçš„äº‹å°±æ˜¯æŠŠ A(B(C(10))); è¿™ç§åµŒå¥—çš„è°ƒç”¨æ–¹å¼æ”¹æˆ compose(A, B, C)(10); çš„æ–¹å¼è°ƒç”¨ã€‚ 123456789101112131415function A(x) { return x + 10;}function B(y) { return y - 10;}function C(z) { return z;}// æŠŠä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„ç»“æœå½“ä½œå¦å¤–ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„å®å‚// A(B(C(10))); // --&gt; 10 â¬‡// compose(A, B, C)(10); å…ˆç®€å•äº†è§£ä¸‹æ•°ç»„æ–¹æ³• reduce 12345678arr.reduce(function(prev,cur,index,arr){ // å‚æ•°ä»‹ç» arr è¡¨ç¤ºåŸæ•°ç»„ï¼› prev è¡¨ç¤ºä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ init; cur è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼› index è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ çš„ç´¢å¼•ï¼Œè‹¥æä¾› init å€¼ï¼Œåˆ™ç´¢å¼•ä¸º0ï¼Œå¦åˆ™ç´¢å¼•ä¸º1ï¼› init è¡¨ç¤ºåˆå§‹å€¼}, init); åˆ©ç”¨reduceåšä¸€ä¸ªnumberæ±‚å’Œ 123456[10, 20, 30, 40, 50].reduce((a, b) =&gt; { console.log(a, b); return a + b; // a : æ¯ä¸€æ¬¡å¾ªç¯å¤„ç†è¿”å›çš„ç»“æœï¼›å¦‚æœè®¾ç½®äº†initåˆå§‹å€¼ï¼Œç¬¬ä¸€è½®aå°±æ˜¯init // b : ä¾æ¬¡å¾ªç¯ä¸­æ•°ç»„çš„æ¯ä¸€é¡¹}); æ‹†åˆ†reduceæ‰§è¡Œæ­¥éª¤ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹å¤„ç†æµç¨‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253function compose(...funcs) { if (funcs.length === 0) return; if (funcs.length === 1) return funcs[0]; // ç®­å¤´å‡½æ•°è½¬æˆfunctionå½¢å¼ return funcs.reduce(function (a, b) { return function (...args) { return a(b(...args)); } }); // [A, B, C, D, E, F] ï¼š å‡è®¾æœ‰å…­ä¸ªå‡½æ•° // ç¬¬ä¸€è½® a = A, b = B return function (...args) { return A(b(...args)) } // ç¬¬äºŒè½® a = function (...args) { return A(b(...args)) }, b = C return function (...args) { return function (...args) { return A(b(...args)) }(C(...args)) } ==&gt; return function (...args) { ...args ==&gt; [C(...args)] return A(b(C(...args)) } // ç¬¬ä¸‰è½® a = function (...args) { return function (...args) { return A(b(...args)) }(C(...args)) }, b = D return function (...args) { return function (...args) { return function (...args) { return A(b(...args)) }(C(...args)) }(D(...args)) } ==&gt; return function (...args) { ...args ==&gt; [D(...args)] return A(b(C(D(...args))) } // ............è‡³æ•°ç»„æœ€åä¸€é¡¹ä¹‹åç»“æŸå¾ªç¯ --&gt; // ===&gt; A(B(C(D(E(F(...args)))))) --&gt; (10) --&gt; A(B(C(D(E(F(10)))))) return funcs.reduce((a, b) =&gt; (...args) =&gt; a(b(...args)));}// compose(A, B, C)(10);console.log(compose(A, B, C)(10)); // --&gt; 10 æ€»ç»“compose å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆå¸¸è§ã€‚è¿™é‡Œreduxçš„å¯¹ compose å®ç°å¾ˆç®€å•ï¼Œç†è§£èµ·æ¥å´æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå¯¹ Array.prototype.reduce è¿™ä¸ªæ•°ç»„å‡½æ•°æ²¡æœ‰é‚£ä¹ˆç†Ÿç»ƒï¼Œå…¶æ¬¡å°±æ˜¯è¿™ç§æ¥å—å‡½æ•°è¿”å›å‡½æ•°çš„å†™æ³•ï¼Œå†é…ä¸Šç®­å¤´å‡½æ•°å‡ ä¸ªè¿ç»­çš„ =&gt; ï¼Œè®©äººå®¹æ˜“çœ‹æ™•ã€‚ä¸è¿‡åªè¦æŒ‰æ‰§è¡Œæ­¥éª¤æ…¢æ…¢çš„æ‹æ‰§è¡Œé¡ºåºï¼Œè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ã€‚ã€‚å—~","link":"/posts/83dcefb7/"},{"title":"JS-å‘å¸ƒè®¢é˜…æ¨¡å¼","text":"äº†è§£è®¾è®¡æ¨¡å¼ èƒŒæ™¯ è®¾è®¡æ¨¡å¼å¹¶éæ˜¯è½¯ä»¶å¼€å‘çš„ä¸“ä¸šæœ¯è¯­ï¼Œå®é™…ä¸Šï¼Œâ€œæ¨¡å¼â€æœ€æ—©è¯ç”Ÿäºå»ºç­‘å­¦ã€‚ è®¾è®¡æ¨¡å¼çš„å®šä¹‰æ˜¯ï¼šåœ¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼æ˜¯åœ¨æŸç§åœºåˆä¸‹å¯¹æŸä¸ªé—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚å¦‚æœå†é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ç»™é¢å‘å¯¹è±¡è½¯ä»¶å¼€å‘ä¸­çš„ä¸€äº›å¥½çš„è®¾è®¡å–ä¸ªåå­—ã€‚ è¿™äº›â€œå¥½çš„è®¾è®¡â€å¹¶ä¸æ˜¯è°å‘æ˜çš„ï¼Œè€Œæ˜¯æ—©å·²å­˜åœ¨äºè½¯ä»¶å¼€å‘ä¸­ã€‚ä¸€ä¸ªç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿè®¸åœ¨ä¸çŸ¥ä¸è§‰ä¸­æ•°æ¬¡ä½¿ç”¨è¿‡è¿™äº›è®¾è®¡æ¨¡å¼ã€‚GoFï¼ˆGang of Fourâ€“å››äººç»„ï¼Œã€Šè®¾è®¡æ¨¡å¼ã€‹å‡ ä½ä½œè€…ï¼‰æœ€å¤§çš„åŠŸç»©æ˜¯æŠŠè¿™äº›â€œå¥½çš„è®¾è®¡â€ä»æµ©ç€šçš„é¢å‘å¯¹è±¡ä¸–ç•Œä¸­æŒ‘é€‰å‡ºæ¥ï¼Œå¹¶ä¸”ç»™äºˆå®ƒä»¬ä¸€ä¸ªå¥½å¬åˆå¥½è®°çš„åå­—ã€‚ è®¾è®¡æ¨¡å¼å¹¶ä¸ç›´æ¥ç”¨æ¥å®Œæˆä»£ç çš„ç¼–å†™ï¼Œè€Œæ˜¯æè¿°åœ¨å„ç§ä¸åŒæƒ…å†µä¸‹ï¼Œè¦æ€ä¹ˆè§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ¡ˆï¼Œä»–ä¸æ˜¯ä¸€ä¸ªæ­»çš„æœºåˆ¶ï¼Œä»–æ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ç§å†™ä»£ç çš„å½¢å¼ã€‚æ¯ç§è¯­è¨€å¯¹äºå„ç§è®¾è®¡æ¨¡å¼éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„å®ç°æ–¹å¼ï¼Œå¯¹äºæŸäº›è®¾è®¡æ¨¡å¼æ¥è¯´ï¼Œå¯èƒ½åœ¨æŸäº›è¯­è¨€ä¸‹å¹¶ä¸é€‚ç”¨ï¼Œæ¯”å¦‚å·¥å‚æ–¹æ³•æ¨¡å¼å¯¹äºjavascriptã€‚æ¨¡å¼åº”è¯¥ç”¨åœ¨æ­£ç¡®çš„åœ°æ–¹ã€‚è€Œå“ªäº›æ‰ç®—æ­£ç¡®çš„åœ°æ–¹ï¼Œåªæœ‰åœ¨æˆ‘ä»¬æ·±åˆ»ç†è§£äº†æ¨¡å¼çš„æ„å›¾ä¹‹åï¼Œå†ç»“åˆé¡¹ç›®çš„å®é™…åœºæ™¯æ‰ä¼šçŸ¥é“ã€‚ã€‚ æ¨¡å¼çš„ç¤¾åŒºä¸€ç›´åœ¨å‘å±•ã€‚GoFåœ¨1995å¹´æå‡ºäº†23ç§è®¾è®¡æ¨¡å¼ï¼Œä½†æ¨¡å¼ä¸ä»…ä»…å±€é™äºè¿™23ç§ï¼Œåé¢å¢åŠ åˆ°äº†24ç§ã€‚åœ¨è¿™20å¤šå¹´çš„æ—¶é—´é‡Œï¼Œä¹Ÿè®¸æœ‰æ›´å¤šçš„æ¨¡å¼å·²ç»è¢«äººå‘ç°å¹¶æ€»ç»“äº†å‡ºæ¥ï¼Œæ¯”å¦‚ä¸€äº›JavaScript å›¾ä¹¦ä¸­ä¼šæåˆ°æ¨¡å—æ¨¡å¼ã€æ²™ç®±æ¨¡å¼ç­‰ã€‚è¿™äº›â€œæ¨¡å¼â€èƒ½å¦è¢«ä¸–äººå…¬è®¤å¹¶æµä¼ ä¸‹æ¥ï¼Œè¿˜æœ‰å¾…æ—¶é—´éªŒè¯ã€‚ èƒŒæ™¯ä»‹ç»æ‘˜è‡ªæ–‡ç«  å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸è§‚å¯Ÿè€…æ¨¡å¼ æœ‰ä»‹ç»è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ« æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸€ç§æ€æƒ³ï¼šä¼˜åŒ–ä»£ç ä¹Ÿä¸šåŠ¡é€»è¾‘çš„ [å‘å¸ƒè®¢é˜…è®¾è®¡æ¨¡å¼ =&gt; è§‚å¯Ÿè€…æ¨¡å¼çš„å‡çº§ç‰ˆ] æƒ…æ™¯å†ç°ï¼šå½“æŸä¸€ä¸ªæ—¶é—´ç‚¹æˆ–è€…æŸä¸ªæ¡ä»¶åˆ°è¾¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯å¼‚æ­¥è·å–ï¼‰ï¼Œéœ€è¦åç»­å¤„ç†å¾ˆå¤šçš„äº‹æƒ… è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼å…³æ³¨çš„æ˜¯å¯¹è±¡ä¹‹é—´çš„é€šè®¯ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´çš„é€šè®¯ã€‚ è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä¸€ä¸ªåˆ«åå«â€œå‘å¸ƒ-è®¢é˜…æ¨¡å¼â€ï¼Œæˆ–è€…è¯´æ˜¯â€œè®¢é˜…-å‘å¸ƒæ¨¡å¼â€ï¼Œè®¢é˜…è€…å’Œè®¢é˜…ç›®æ ‡æ˜¯è”ç³»åœ¨ä¸€èµ·çš„ï¼Œå½“è®¢é˜…ç›®æ ‡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€ä¸ªé€šçŸ¥è®¢é˜…è€…ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æŠ¥çº¸æœŸåˆŠçš„è®¢é˜…æ¥å½¢è±¡çš„è¯´æ˜ï¼Œå½“ä½ è®¢é˜…äº†ä¸€ä»½æŠ¥çº¸ï¼Œæ¯å¤©éƒ½ä¼šæœ‰ä¸€ä»½æœ€æ–°çš„æŠ¥çº¸é€åˆ°ä½ æ‰‹ä¸Šï¼Œæœ‰å¤šå°‘äººè®¢é˜…æŠ¥çº¸ï¼ŒæŠ¥ç¤¾å°±ä¼šå‘å¤šå°‘ä»½æŠ¥çº¸ï¼ŒæŠ¥ç¤¾å’Œè®¢æŠ¥çº¸çš„å®¢æˆ·å°±æ˜¯ä¸Šé¢æ–‡ç« å¼€å¤´æ‰€è¯´çš„â€œä¸€å¯¹å¤šâ€çš„ä¾èµ–å…³ç³» å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPub-Sub Patternï¼‰ å…¶å®24ç§åŸºæœ¬çš„è®¾è®¡æ¨¡å¼ä¸­å¹¶æ²¡æœ‰å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¸Šé¢ä¹Ÿè¯´äº†ï¼Œä»–åªæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ä¸ªåˆ«ç§°æˆ–è€…è¯´æ˜¯å‡çº§ç‰ˆã€‚ ä½†æ˜¯ç»è¿‡æ—¶é—´çš„æ²‰æ·€ï¼Œä¼¼ä¹ä»–å·²ç»å¼ºå¤§äº†èµ·æ¥ï¼Œå·²ç»ç‹¬ç«‹äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆä¸ºå¦å¤–ä¸€ç§ä¸åŒçš„è®¾è®¡æ¨¡å¼ã€‚ åœ¨ç°åœ¨çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œç§°ä¸ºå‘å¸ƒè€…çš„æ¶ˆæ¯å‘é€è€…ä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™è®¢é˜…è€…ï¼Œè¿™æ„å‘³ç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚åœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å­˜åœ¨ç¬¬ä¸‰ä¸ªç»„ä»¶ï¼Œç§°ä¸ºæ¶ˆæ¯ä»£ç†æˆ–è°ƒåº¦ä¸­å¿ƒæˆ–ä¸­é—´ä»¶ï¼Œå®ƒç»´æŒç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„è”ç³»ï¼Œè¿‡æ»¤æ‰€æœ‰å‘å¸ƒè€…ä¼ å…¥çš„æ¶ˆæ¯å¹¶ç›¸åº”åœ°åˆ†å‘å®ƒä»¬ç»™è®¢é˜…è€…ã€‚ ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä½ åœ¨å¾®åšä¸Šå…³æ³¨äº†Aï¼ŒåŒæ—¶å…¶ä»–å¾ˆå¤šäººä¹Ÿå…³æ³¨äº†Aï¼Œé‚£ä¹ˆå½“Aå‘å¸ƒåŠ¨æ€çš„æ—¶å€™ï¼Œå¾®åšå°±ä¼šä¸ºä½ ä»¬æ¨é€è¿™æ¡åŠ¨æ€ã€‚Aå°±æ˜¯å‘å¸ƒè€…ï¼Œä½ æ˜¯è®¢é˜…è€…ï¼Œå¾®åšå°±æ˜¯è°ƒåº¦ä¸­å¿ƒï¼Œä½ å’ŒAæ˜¯æ²¡æœ‰ç›´æ¥çš„æ¶ˆæ¯å¾€æ¥çš„ï¼Œå…¨æ˜¯é€šè¿‡å¾®åšæ¥åè°ƒçš„ï¼ˆä½ çš„å…³æ³¨ï¼ŒAçš„å‘å¸ƒåŠ¨æ€ï¼‰ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/* * å°è£…å‘å¸ƒè®¢é˜…åº“ */(function anonymous() { class Sub { // åˆ›å»ºä¸€ä¸ªäº‹ä»¶æ± ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°å®ä¾‹ä¸Š pond = {}; // å‘äº‹ä»¶æ± ä¸­è¿½åŠ æ–¹æ³• on(flag, func) { // é¦–å…ˆæ ¡éªŒæ–°å¢çš„æ ‡è¯†æ˜¯å¦å­˜åœ¨äº‹ä»¶æ± ä¸­ï¼ˆä¸å­˜åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„æ ‡è¯†ï¼Œå¹¶ä¸”åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨åç»­å¢åŠ çš„æ–¹æ³•ï¼›å¦‚æœå­˜åœ¨å°±æ‹¿åˆ°ç°æœ‰çš„æ•°ç»„ï¼‰ let pond = this.pond; if (!pond.hasOwnProperty(flag)) { pond[flag] = []; } let arr = pond[flag]; //æ¯æ¬¡å¢åŠ ä¹‹å‰åšä¸€ä¸ªå»é‡ if (!arr.includes(func)) { arr.push(func); } } // ä»äº‹ä»¶æ± ä¸­ç§»é™¤æ–¹æ³• off(flag, func) { let pond = this.pond; let arr = pond[flag]; // å¦‚æœç§»é™¤çš„æ ‡è¯†ä¸åœ¨äº‹ä»¶æ± ä¸­ï¼Œè¯´æ˜ä¹‹å‰ä»æ²¡æœ‰è®¾ç½®è¿‡è¿™ä¸ªæ ‡è¯†çš„æ–¹æ³•ï¼Œä¹Ÿå°±ä¸éœ€è¦å†ç§»é™¤äº† if (!arr) return; for (let i = 0; i &lt; arr.length; i++) { // å¢åŠ çš„æ—¶å€™æ˜¯å»é‡çš„ï¼Œæ‰€ä»¥ç§»é™¤çš„æ—¶å€™ï¼Œåªéœ€è¦ç§»é™¤ä¸€ä¸ªå°±å¤Ÿäº† if (arr[i] === func) { // ä¸ºäº†é˜²æ­¢æ•°æ®å¡Œé™·ï¼Œæˆ‘ä»¬åˆ é™¤çš„æ—¶å€™ï¼Œä¸å»æ”¹å˜åŸç”Ÿæ•°ç»„çš„ç´¢å¼•ï¼Œæˆ‘ä»¬æŠŠå½“å‰é¡¹å…ˆèµ‹å€¼ä¸ºnullå³å¯ // arr.splice(i, 1); arr[i] = null; break; } } } // é€šçŸ¥äº‹ä»¶æ± ä¸­çš„æ–¹æ³•æ‰§è¡Œ fire(flag, ...params) { let arr = this.pond[flag]; if (!arr) return; for (let i = 0; i &lt; arr.length; i++) { let item = arr[i]; // æŠŠå½“å‰é¡¹ä¸æ˜¯å‡½æ•°çš„ï¼Œä»æ•°ç»„ä¸­ç§»é™¤æ‰å³å¯ if (typeof item !== &quot;function&quot;) { arr.splice(i, 1); i--; continue; } item.call(this, ...params); } } } // æ”¾åˆ°å…¨å±€ window.subscribe = function subscribe() { return new Sub(); };})(); æµ‹è¯•æ•ˆæœ123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;script src=&quot;js/subscribe.js&quot;&gt;&lt;/script&gt; &lt;script&gt; function fn1() { console.log(1); } function fn2() { console.log(2); // ç¬¬ä¸€æ¬¡é€šçŸ¥MARRYæ‰§è¡Œï¼Œæ‰§è¡Œåˆ°FN2çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»äº‹ä»¶æ± ä¸­ç§»é™¤ FN1/FN2 sub.off('marry', fn1); sub.off('marry', fn2); } function fn3() { console.log(3); } function fn4() { console.log(4); } let sub = subscribe(); // =&gt; å¾—åˆ°å®ä¾‹ sub.on('marry', fn1); sub.on('marry', fn2); sub.on('marry', fn3); sub.on('marry', fn4); sub.on('divorce', fn2); sub.on('divorce', fn3); // =&gt; è®¢é˜…å®Œæˆ let i = 0; let timer = setInterval(() =&gt; { i++; if (i &gt; 2) { // =&gt; clearInterval(timer); return; } // å‘å¸ƒæ‰§è¡Œ sub.fire('marry', 10, 20); // =&gt; æ¯éš”ä¸¤ç§’å‘å¸ƒä¸€æ¬¡ 'marry'äº‹ä»¶æ± é‡Œçš„å‡½æ•°ï¼Œè¿™é‡Œä¸€å…±æ‰§è¡Œäº†ä¸¤æ¬¡ // =&gt; ç¬¬ä¸€æ¬¡æ§åˆ¶å°ç­‰å¾…ä¸¤ç§’åè¾“å‡º 1 2 3 4 ï¼Œ åœ¨fn2æ‰§è¡Œæ—¶ç§»é™¤äº† 'marry'äº‹ä»¶æ± ä¸­çš„ fn1 å’Œ fn2 // =&gt; å†ä¸¤ç§’åç¬¬äºŒè½®å‘å¸ƒæ§åˆ¶å°è¾“å‡º 3 4 }, 2000);&lt;/script&gt; ~~å›°äº†ã€‚ç¡è§‰","link":"/posts/fc4d7eca/"},{"title":"Vueæ•°æ®åŒå‘ç»‘å®š","text":"MVC &amp; MVVM ä¼ ç»Ÿæ“ä½œDOMæ¨¡å¼ MVCï¼šmodel view controller MVVMï¼šmodel view viewModel åŒå‘æ•°æ®ç»‘å®šçš„å®ç°åŸç† Object.defineProperty å®ç°çš„åº•å±‚åŸç† : 123456789101112131415161718192021222324252627//obServer:è§‚å¯Ÿè€…function obServer(obj) { if (obj &amp;&amp; typeof obj === 'object') { for (let key in obj) { if (!obj.hasOwnProperty(key)) break; defineReactive(obj, key, obj[key]); } }}function defineReactive(obj, key, value) { obServer(value); Object.defineProperty(obj, key, { get() { return value; }, set(newValue) { observer(newValue); if (value === newValue) return; value = newValue; } });}function $set(data, key, value) { defineReactive(data, key, value);} æ ¸å¿ƒåŸç†åŠä»£ç å®ç° è§£æVueæŒ‡ä»¤çš„ â€”â€” v-model ç¼–è¯‘Vueä¸­çš„å–å€¼è¯­æ³• â€”â€” { {...} } å®ç°å¯¹è¡¨å•å…ƒç´ input åŒå‘æ•°æ®ç›‘å¬ è¿™æ¬¡ä½¿ç”¨ES6å®šä¹‰classç±»çš„å½¢å¼æ¥å®ç°ã€‚å°±ä¸ä½¿ç”¨ES5äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Vue-MVVM&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;p a=&quot;21&quot;&gt;{{ msg }} &amp;nbsp; è¿™æ˜¯é™æ€æ–‡æœ¬&lt;/p&gt; &lt;input type=&quot;text&quot; v-model=&quot;val&quot;&gt; &lt;div&gt; &lt;p&gt;{{ val }} é™æ€æ–‡æœ¬&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;https://fastly.jsdelivr.net/npm/vue/dist/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; /* * obServer: æ•°æ®ç›‘å¬ï¼ˆæ‹¦æˆªï¼‰ * compile: æŒ‡ä»¤è§£æ * Dep: è®¢é˜…å™¨ï¼ˆäº‹ä»¶æ± ï¼Œå‘å¸ƒå™¨ï¼‰ * Watcher: è®¢é˜…è€…ï¼šï¼ˆè®¢é˜…ï¼‰ */ // Dep class Dep { constructor() { this.subs = []; } subscribe(sub) { this.subs.push(sub); } notify(oldValue) { console.log(this.subs); this.subs.forEach(item =&gt; { item.update(oldValue); }); } } // Watcher class Watcher { constructor(node, key, vm) { this.node = node; this.key = key; this.vm = vm; Dep.curWatcher = this; this.getData(); Dep.curWatcher = null; } getData() { return this.vm._data[this.key]; } update(oldValue) { if (this.node.nodeType == 1) { if (this.node.nodeName === &quot;INPUT&quot;) { this.node.value = this.getData(); } // ..... } else { let oldText = this.node.nodeValue; this.node.nodeValue = oldText.replace(oldValue, this.getData()); } } } class myVue { constructor(options) { let _this; //=&gt; init example this._data = typeof options.data === &quot;function&quot; ? options.data() : options.data; this.$el = document.querySelector(options.el); // data obServer this.obServer(this._data); // nodeToFragment &amp;&amp; Compile this.nodeToFragment(this.$el); this.$root = this; _this = Object.assign(this._data, this); return _this; } // prototype obServer(data) { if (data &amp;&amp; typeof data === &quot;object&quot;) { for (let key in data) { if (!data.hasOwnProperty(key)) break; this.defineReactive(data, key, data[key]); } } } // data intercept defineReactive(data, key, value) { this.obServer(value); const dep = new Dep(); let oldValue = value; Object.defineProperty(data, key, { get() { if (Dep.curWatcher) { dep.subscribe(Dep.curWatcher); } return value; }, set(newValue) { if (newValue === oldValue) return; oldValue = value; value = newValue; dep.notify(oldValue); } }); } // instruct-model instructModel(node, attr) { // å¯æ ¹æ®inputä¸åŒçš„typeç±»å‹ï¼Œè®¾ç½®ä¸åŒçš„å±æ€§ã€‚ å¦‚ï¼š checked let nodeValue = attr.nodeValue, nodeName = attr.nodeName; node.value = this._data[nodeValue]; // nodeValue å–åˆ° data ä¸­å¯¹åº”çš„å­—æ®µ node.removeAttribute(nodeName); // åˆ é™¤è¡Œé—´æŒ‡ä»¤ node.addEventListener(&quot;input&quot;, ev =&gt; { this._data[nodeValue] = ev.currentTarget.value; }, false); // åˆ›å»ºè§‚å¯Ÿè€…ï¼ˆç›‘å¬ï¼‰ new Watcher(node, nodeValue, this); } // Compile compile(node) { if (node.nodeType == 1) { // è·å–å…ƒç´ çš„èŠ‚ç‚¹çš„è¡Œé—´å±æ€§ let attrs = node.attributes, nodes = node.childNodes; for (let i = 0; i &lt; attrs.length; i++) { let curAttr = attrs[i], curAttrName = curAttr.nodeName; if (/^v\\-/.test(curAttrName)) { switch (curAttrName.substring(2)) { //=&gt; åŒ¹é…å¯¹åº”v-æŒ‡ä»¤ case &quot;model&quot;: this.instructModel(node, curAttr); break; // .... æ›´å¤šæŒ‡ä»¤ }; } } // é€’å½’å¤„ç†å…¶å­èŠ‚ç‚¹ for (let i = 0; i &lt; nodes.length; i++) { this.compile(nodes[i]); } } else { // è§£æéå…ƒç´ èŠ‚ç‚¹ let text = node.nodeValue, reg = /\\{\\{(.+?)\\}\\}/g; if (reg.test(text)) { text = text.replace(reg, (g, key) =&gt; { key = key.trim(); if (key) new Watcher(node, key, this); return this._data[key]; }); node.nodeValue = text; } } } // nodeToFragment nodeToFragment(element) { let frag = document.createDocumentFragment(); let firstNode = element.firstChild; while (firstNode) { frag.appendChild(firstNode); this.compile(firstNode); firstNode = element.firstChild; } element.appendChild(frag); } }; const myVm = new myVue({ el: &quot;#app&quot;, data() { return { msg: &quot;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æ·»åŠ çš„æ–‡æœ¬&quot;, val: 666 } } }); console.log(myVm); // const vm = new Vue({ // el: &quot;#app&quot;, // data() { // return { // msg: &quot;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æ·»åŠ çš„æ–‡æœ¬&quot;, // val: 666 // } // } // }); // console.log(vm); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; çœ‹ä¸€ä¸‹çœŸVueçš„æ•ˆæœï¼š å†æ¥çœ‹ä¸€ä¸‹myVue:ç¨æœ‰ç‘•ç–µï¼Œé—®é¢˜ä¸å¤§ ç®€å•æ€»ç»“Vue ä¸»è¦é€šè¿‡ä»¥ä¸‹ 4 ä¸ªæ­¥éª¤æ¥å®ç°æ•°æ®åŒå‘ç»‘å®šçš„ï¼š å®ç°ä¸€ä¸ªç›‘å¬å™¨ Observerï¼šå¯¹æ•°æ®å¯¹è±¡è¿›è¡Œéå†ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œåˆ©ç”¨ Object.defineProperty() å¯¹å±æ€§éƒ½åŠ ä¸Š setter å’Œ getterã€‚è¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘ setterï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–ã€‚ å®ç°ä¸€ä¸ªè§£æå™¨ Compileï¼šè§£æ Vue æ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡éƒ½æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œè°ƒç”¨æ›´æ–°å‡½æ•°è¿›è¡Œæ•°æ®æ›´æ–°ã€‚ å®ç°ä¸€ä¸ªè®¢é˜…è€… Watcherï¼šWatcher è®¢é˜…è€…æ˜¯ Observer å’Œ Compile ä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ ï¼Œä¸»è¦çš„ä»»åŠ¡æ˜¯è®¢é˜… Observer ä¸­çš„å±æ€§å€¼å˜åŒ–çš„æ¶ˆæ¯ï¼Œå½“æ”¶åˆ°å±æ€§å€¼å˜åŒ–çš„æ¶ˆæ¯æ—¶ï¼Œè§¦å‘è§£æå™¨ Compile ä¸­å¯¹åº”çš„æ›´æ–°å‡½æ•°ã€‚ å®ç°ä¸€ä¸ªè®¢é˜…å™¨ Depï¼šè®¢é˜…å™¨é‡‡ç”¨ å‘å¸ƒ-è®¢é˜… è®¾è®¡æ¨¡å¼ï¼Œç”¨æ¥æ”¶é›†è®¢é˜…è€… Watcherï¼Œå¯¹ç›‘å¬å™¨ Observer å’Œ è®¢é˜…è€… Watcher è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚","link":"/posts/cec8bac/"},{"title":"CodeMirror - ä½¿ç”¨","text":"CodeMirrorç®€å•ä»‹ç»CodeMirror æ˜¯ä¸€ä¸ªç”¨ JavaScript ä¸ºæµè§ˆå™¨å®ç°çš„å¤šåŠŸèƒ½æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å®ƒä¸“é—¨ç”¨äºç¼–è¾‘ä»£ç ï¼Œå¹¶å¸¦æœ‰ 100 å¤šç§è¯­è¨€æ¨¡å¼å’Œå„ç§å®ç°æ›´é«˜çº§ç¼–è¾‘åŠŸèƒ½çš„æ’ä»¶ã€‚æ¯ç§è¯­è¨€éƒ½å¸¦æœ‰åŠŸèƒ½é½å…¨çš„ä»£ç å’Œè¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œä»¥å¸®åŠ©é˜…è¯»å’Œç¼–è¾‘å¤æ‚çš„ä»£ç ã€‚ æ”¯æŒåˆ‡æ¢ä¸»é¢˜ã€è¯­æ³•é«˜äº®ã€ä»£ç æŠ˜å ã€‚ å¤šç§å·²æœ‰çš„è¯­è¨€æ¨¡å¼å¼€ç®±å³ç”¨ã€‚ï¼ˆå¯è‡ªå·±ç¼–å†™æ–°çš„è¯­è¨€æ¨¡å¼ï¼‰ â€¦â€¦ ç®€å•ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;CodeMirror&lt;/title&gt; &lt;!-- æ ¸å¿ƒæ ·å¼ --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;../../../node_modules/codemirror/lib/codemirror.css&quot; /&gt; &lt;!-- ä¸»é¢˜æ ·å¼ --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;../../../node_modules//codemirror/theme/ambiance.css&quot; /&gt; &lt;!-- æ ¸å¿ƒè„šæœ¬ --&gt; &lt;script src=&quot;../../../node_modules/codemirror/lib/codemirror.js&quot;&gt;&lt;/script&gt; &lt;!-- è¯­è¨€æ¨¡å¼è„šæœ¬ --&gt; &lt;script src=&quot;../../../node_modules/codemirror/mode/javascript/javascript.js&quot;&gt;&lt;/script&gt; &lt;!-- &lt;script src=&quot;../../../node_modules/codemirror/mode/clike/clike.js&quot;&gt;&lt;/script&gt; --&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;layout&quot;&gt; &lt;!-- &lt;textarea name=&quot;&quot; id=&quot;myTextArea&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;function myScript(){return 100;}&lt;/textarea&gt; --&gt; &lt;/div&gt; &lt;script&gt; var container = document.body; var editorConfig = { // ç¼–è¾‘å™¨çš„èµ·å§‹å€¼ value: 'function myScript(){return 100;}\\n', // ç¼–è¾‘è¯­è¨€ mode: 'javascript', // mode: 'text/x-java', // x-: csrc c++src java // ä¸»é¢˜ theme: 'ambiance', // tabç¼©è¿›å®½åº¦ tabSize: 2, // æ˜¾ç¤ºè¡Œæ•° lineNumbers: true, }; var myCodeMirror = CodeMirror(container, editorConfig); console.log(myCodeMirror.getValue(), 'è·å–value'); setTimeout(() =&gt; { // è®¾ç½®value myCodeMirror.setValue('var message = &quot;hello world&quot;'); }, 1000); /** * @param instance: CodeMirrorå®ä¾‹ * @param changeObj: æ˜¯ä¸€ä¸ª{from, to, text, removed, origin}æœ‰å…³æ‰€å‘ç”Ÿä½œä¸ºç¬¬äºŒä¸ªå‚æ•°çš„å˜åŒ–åŒ…å«å¯¹è±¡çš„ä¿¡æ¯ã€‚ * from å’Œ to æ˜¯æ›´æ”¹å¼€å§‹å’Œç»“æŸçš„ä½ç½®ï¼ˆåœ¨æ›´æ”¹å‰çš„åæ ‡ç³»ä¸­ï¼‰ä¾‹å¦‚ï¼Œ{ch:0, line:18}ã€‚ * text æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¡¨ç¤ºæ›¿æ¢æ›´æ”¹èŒƒå›´çš„æ–‡æœ¬ï¼ˆæŒ‰è¡Œæ‹†åˆ†ï¼‰ã€‚ * removed æ˜¯è¢«æ›´æ”¹ä¹‹å‰çš„å†…å®¹ï¼Œå®ƒè¢«æ­¤æ›´æ”¹è¦†ç›–ã€‚ * æ­¤äº‹ä»¶åœ¨æ“ä½œç»“æŸä¹‹å‰ã€DOM æ›´æ–°å‘ç”Ÿä¹‹å‰è§¦å‘ã€‚ */ myCodeMirror.on('change', function (instance, changeObj) { console.log(changeObj, 'changeObj'); }); &lt;/script&gt; &lt;!-- &lt;script&gt; // æ¥å—ä¸€ä¸ª textarea DOM èŠ‚ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¯é€‰çš„é…ç½®å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚ // å®ƒå°†ç”¨ CodeMirror å®ä¾‹æ›¿æ¢ textareaï¼Œå¹¶è¿æ¥è¯¥ textarea çš„è¡¨å•ï¼ˆå¦‚æœæœ‰ï¼‰ä»¥ç¡®ä¿åœ¨æäº¤è¡¨å•æ—¶å°†ç¼–è¾‘å™¨å†…å®¹æ”¾å…¥ textareaã€‚ // textarea ä¸­çš„æ–‡æœ¬å°†ä¸ºç¼–è¾‘å™¨æä¾›å†…å®¹ã€‚ var myTextArea = document.getElementById('myTextArea'); var editorConfig = { // ç¼–è¾‘è¯­è¨€ mode: 'javascript', // ä¸»é¢˜ theme: 'ambiance', // tabç¼©è¿›å®½åº¦ tabSize: 2, // æ˜¾ç¤ºè¡Œæ•° lineNumbers: true, }; var myCodeMirror = CodeMirror.fromTextArea(myTextArea, editorConfig); &lt;/script&gt; --&gt; &lt;/body&gt;&lt;/html&gt; React-CodeMirror2Github: https://github.com/scniro/react-codemirror2 Npm: https://www.npmjs.com/package/react-codemirror2 åŸºäºcodemirroräºŒæ¬¡å°è£…ï¼Œé›†æˆä¸ºreactä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼Œåœ¨reactä¸­ä½¿ç”¨ å®‰è£… 1npm install react-codemirror2 codemirror --save ä½¿ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170/* * CodeMirror Reactç‰ˆ -- https://github.com/scniro/react-codemirror2 https://www.npmjs.com/package/react-codemirror2 * å—æ§ Controlled * ä¸å—æ§ UnControlled * */import React, { useCallback, useEffect, useRef, useMemo, memo } from 'react';import PropTypes from 'prop-types';import { Controlled as CodeMirror } from 'react-codemirror2';import 'codemirror/lib/codemirror.css'; // ç¼–è¾‘å™¨æ ¸å¿ƒæ ·å¼import 'codemirror/lib/codemirror.js'; // ç¼–è¾‘å™¨æ ¸å¿ƒjs// ä»£ç æŠ˜è¡Œimport 'codemirror/addon/fold/foldgutter.css';import 'codemirror/addon/fold/foldcode.js';import 'codemirror/addon/fold/foldgutter.js';import 'codemirror/addon/fold/brace-fold.js';import 'codemirror/addon/fold/comment-fold.js';// å…¨å±å¼€å¯import 'codemirror/addon/display/fullscreen.css';import 'codemirror/addon/display/fullscreen.js';// å…‰æ ‡æ‰€å¤„è¡Œé«˜äº®import 'codemirror/addon/selection/active-line';// è¯­è¨€æ¨¡å¼import 'codemirror/mode/sql/sql.js';import 'codemirror/mode/clike/clike.js'; // ç±»C ï¼ˆc \\ c++ \\ java \\ ...ï¼‰import './index.scss';// æš‚æ”¯æŒä¸‰ç§è¯­è¨€const supportLanguage = ['sql', 'mysql', 'java'];/** * @description: * @param {string} ç›®å‰æš‚æ”¯æŒ sql java */const CodeEditor = ({ className, onChange, value, width, height, placeholder, language, fullScreen, onExitFullScreen,}) =&gt; { const editorContainerRef = useRef(null); /** * @description: é€€å‡ºå…¨å± * @default Esc keyCode === 27 * @param {KeyboardEvent} e */ const exitFullScreen = useCallback( ({ keyCode }) =&gt; { if (keyCode === 27) onExitFullScreen(); }, [onExitFullScreen] ); useEffect(() =&gt; { const containerElement = editorContainerRef.current; if (fullScreen &amp;&amp; containerElement) { containerElement.addEventListener('keydown', exitFullScreen, false); return; } containerElement.removeEventListener('keydown', exitFullScreen); }, [fullScreen]); /** * @description: ç¼–è¾‘å™¨åˆå§‹æŒ‚è½½å®Œæ¯• */ const editorDidMount = useCallback(editor =&gt; { editor.on('inputRead', cm =&gt; { cm.execCommand('autocomplete'); }); }, []); /** * @description: ç¼–è¾‘å™¨è¾“å…¥changeäº‹ä»¶ * @param {any} editor ç¼–è¾‘å™¨æ‰€æœ‰ä¿¡æ¯ï¼ˆCodeMirrorå®ä¾‹ï¼‰ * @param {any} data å½“å‰æ•°æ®ä¿¡æ¯ * @param {string} value å½“å‰å€¼ */ const onInnerChange = useCallback((editor, data, value) =&gt; { onChange(value); }, []); const mode = useMemo(() =&gt; { if (supportLanguage.includes(language.toLowerCase())) { return { name: `text/x-${language}`, }; } return { name: '', }; }, [language]); const editorConfig = useMemo( () =&gt; ({ // è¯­è¨€æ¨¡å¼ mode, // ä¸»é¢˜ theme: 'blackboard', // æ˜¾ç¤ºè¡Œå· lineNumbers: true, // è‡ªåŠ¨è·å–ç„¦ç‚¹ autofocus: true, // å…‰æ ‡æ‰€å¤„è¡Œä»£ç é«˜äº® styleActiveLine: true, // è‡ªåŠ¨æ¢è¡Œ lineWrapping: true, // ä»£ç æŠ˜è¡Œ foldGutter: true, gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'], // ä»£ç æç¤ºè¡¥å…¨ï¼ˆæŒ‰ctrl+ç©ºæ ¼é”®å³å¯è°ƒå‡ºï¼Œå¯è‡ªå®šä¹‰é…ç½®å¿«æ·é”® extraKeys: { Ctrl: 'autocomplete' }, hintOptions: { completeSingle: false }, // å…¨å± fullScreen, }), [mode, fullScreen] ); return ( &lt;div style={{ width, height }} ref={editorContainerRef} className={`code-editor-container ${className || ''}`} &gt; &lt;CodeMirror options={editorConfig} value={value ?? placeholder} onBeforeChange={onInnerChange} // è¿™ä¸ªäº‹ä»¶æœ€å¥½åŠ ä¸Šï¼Œå¯ä»¥æ˜¯ç©ºå‡½æ•°ã€‚å¦åˆ™åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç¬¬äºŒæ¬¡æ‰“å¼€å°±ä¼šæœ‰æœªçŸ¥çš„é—®é¢˜ï¼ˆæŠ¥é”™ï¼‰ editorDidMount={editorDidMount} /&gt; &lt;/div&gt; );};CodeEditor.propTypes = { className: PropTypes.string, language: PropTypes.string, fullScreen: PropTypes.bool, onChange: PropTypes.func.isRequired, onExitFullScreen: PropTypes.func.isRequired,};CodeEditor.defaultProps = { onChange: () =&gt; {}, onExitFullScreen: () =&gt; {}, language: 'java', fullScreen: false, className: '',};export default memo(CodeEditor); â€¦â€¦","link":"/posts/3f01d2c5/"},{"title":"Rsync - æ–‡ä»¶ä¸Šä¼ ","text":"æœ€è¿‘å°ç«™ä»ä¹‹å‰çš„githubæ‰˜ç®¡è¿ç§»åˆ°äº†é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šï¼Œé‡åˆ°äº†éœ€è¦ä¸Šä¼ æœ¬åœ°æ–‡ä»¶è‡³è¿œç¨‹æœåŠ¡å™¨çš„åœºæ™¯ã€‚ä¹‹å‰ä¹Ÿæœ‰äº†è§£è¿‡FTPã€SCPã€FileZillaç­‰ä¸Šä¼ å·¥å…·ï¼Œä½†è‡ªå·±è§‰å¾—å¹¶ä¸å¤ªæƒ³ç”¨ã€‚äºæ˜¯åœ¨å¯»æ‰¾çš„è¿‡ç¨‹ï¼Œåœ¨MDNä¸Šçœ‹åˆ°äº† Rsyncã€‚ (ä¸è¦é—®ä¸ºä»€ä¹ˆå½“çœ‹åˆ° Rsync æ—¶å°±æƒ³ç”¨äº†ğŸ˜ˆï¼Ÿé—®å°±æ˜¯ï¼šç›¸æ¯”è¾ƒæ¥è¯´ï¼Œè¿™åå­—å¾ˆé…·ğŸ˜ä¸æ˜¯ä¹ˆ) Rsync ç®€ä»‹ Rsyncæ˜¯ä¸€ç§æœ¬åœ°åˆ°è¿œç¨‹çš„æ–‡ä»¶åŒæ­¥å·¥å…·ï¼Œé€šå¸¸åœ¨å¤§å¤šæ•°åŸºäº Unix çš„ç³»ç»Ÿï¼ˆå¦‚ macOS å’Œ Linuxï¼‰ä¸Šéƒ½å¯ç”¨ï¼Œä½†ä¹Ÿå­˜åœ¨ Windows ç‰ˆæœ¬ã€‚å®ƒè¢«è§†ä¸ºæ¯” SFTP æ›´é«˜çº§å·¥å…·ï¼Œå› ä¸ºå®ƒé»˜è®¤æ˜¯åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨çš„ã€‚ Rsyncæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§å’Œçµæ´»çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œé€šå¸¸ç”¨äºåœ¨æœ¬åœ°å’Œè¿œç¨‹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ–‡ä»¶åŒæ­¥å’Œå¤‡ä»½æ“ä½œã€‚å®ƒå¯ä»¥é€šè¿‡ SSH åè®®å®‰å…¨åœ°ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¸”å…·æœ‰å¢é‡ä¼ è¾“çš„èƒ½åŠ›ï¼Œåªä¼ è¾“å‘ç”Ÿæ›´æ”¹çš„æ–‡ä»¶éƒ¨åˆ†ï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚ rsyncçš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š å¿«é€Ÿå’Œé«˜æ•ˆï¼šrsyncä½¿ç”¨æ™ºèƒ½ç®—æ³•ï¼Œåªä¼ è¾“æ–‡ä»¶çš„æ›´æ”¹éƒ¨åˆ†ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä¼ è¾“æ—¶é—´å’Œå¸¦å®½æ¶ˆè€—ã€‚ å¢é‡ä¼ è¾“ï¼šrsyncåªä¼ è¾“æºå’Œç›®æ ‡æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶ï¼Œè¿™å¯¹äºå¤§å‹æ–‡ä»¶æˆ–å¸¦å®½æœ‰é™çš„è¿æ¥å°¤å…¶æœ‰ç”¨ å¼ºå¤§çš„è¿‡æ»¤åŠŸèƒ½ï¼šrsyncå…è®¸ä½ æŒ‡å®šæ–‡ä»¶å’Œç›®å½•çš„è¿‡æ»¤è§„åˆ™ï¼Œä»¥ä¾¿é€‰æ‹©æ€§åœ°åŒæ­¥æ–‡ä»¶ã€‚ æ”¯æŒè¿œç¨‹ä¼ è¾“ï¼šrsyncå¯ä»¥é€šè¿‡SSHåè®®è¿›è¡Œå®‰å…¨çš„è¿œç¨‹ä¼ è¾“ï¼Œä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ã€‚ å¯ä»¥ç»§ç»­ä¸­æ–­çš„ä¼ è¾“ï¼šå¦‚æœä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿä¸­æ–­ï¼Œrsyncå¯ä»¥ä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ä¼ è¾“ï¼Œè€Œæ— éœ€é‡æ–°å¼€å§‹ã€‚ é€‚åˆéœ€è¦é¢‘ç¹æ–‡ä»¶åŒæ­¥å’Œå¤‡ä»½çš„åœºæ™¯ã€‚ ä½¿ç”¨è®°å½•macOS ç³»ç»Ÿé¢„è£…è‡ªå¸¦ Rsync, ç›´æ¥å¼€ç®±ä½¿ç”¨ï¼ è¿™é‡Œæˆ‘å‡†å¤‡æŠŠåˆšç”³è¯·çš„å…è´¹SSLè¯ä¹¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œæ”¾ç½®åœ¨Nginxçš„é»˜è®¤é…ç½®æ–‡ä»¶ç›®å½•ä¸‹ã€‚ä¸åŒçš„Nginxç‰ˆæœ¬çš„é»˜è®¤é…ç½®ç›®å½•å¥½åƒè¿˜ä¸ä¸€æ ·ï¼Œç½‘ç»œä¸Šå¤§å¤šéƒ½æ˜¯åœ¨/usr/local/nginx/conf ã€‚è€Œæˆ‘è¿™é‡Œçš„Nginxé»˜è®¤é…ç½®ç›®å½•æ˜¯åœ¨ /etc/nginx/nginx.conf , å…ˆåœ¨/etc/nginx/ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º cert çš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾ç­‰ä¸‹ä¸Šä¼ æ¥çš„è¯ä¹¦æ–‡ä»¶ã€‚ åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š 123cd /etc/nginx # è¿›å…¥é»˜è®¤é…ç½®ç›®å½•mkdir cert # åˆ›å»ºcertè¯ä¹¦å­˜æ”¾æ–‡ä»¶å¤¹ï¼ˆæƒé™å¦‚æœä¸å¤Ÿéœ€è¦åœ¨å‰é¢åŠ  sudoï¼‰ åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡Œï¼š 123456# è¿™é‡Œæœ¬åœ°å­˜æ”¾è¯ä¹¦åŠç§é’¥æ–‡ä»¶çš„ç›®å½•æ˜¯ /Users/zhangone/SSLrsync /Users/zhangone/SSL/zhangone.site.key root@xx.xxx.xx.xxx:/etc/nginx/cert/rsync /Users/zhangone/SSL/zhangone.site.pem root@xx.xxx.xx.xxx:/etc/nginx/cert/# æ¯æ¬¡æ‰§è¡Œä¸Šä¼ å‘½ä»¤ï¼Œéƒ½è¦è¾“å…¥è¿œç¨‹æœåŠ¡å™¨å¯†ç ã€‚ æ­¤æ—¶åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå‘ç°æ–‡ä»¶å·²ç»ä¸Šä¼ æˆåŠŸ 123# åœ¨ /etc/nginx/cert/ ç›®å½•ä¸‹æ‰§è¡Œ$ ls zhangone.site.key zhangone.site.pem ok, åˆ°æ­¤ä¸Šä¼ ç»“æŸï¼Œå¯ä»¥å»é…ç½®nginxäº†ã€‚ æ›´å¤šå‘½ä»¤Rsyncæ‰‹å†Œ ä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼š 1rsync [æºæ–‡ä»¶å¤¹è·¯å¾„] [æœåŠ¡å™¨è´¦å·@æœåŠ¡å™¨ipåœ°å€:ç›®æ ‡è·¯å¾„] ä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ï¼š 1rsync [æœåŠ¡å™¨è´¦å·@æœåŠ¡å™¨ipåœ°å€:/ç›®å½•è·¯å¾„/æºæ–‡ä»¶] [ç›®æ ‡è·¯å¾„] åŒæ­¥æœ¬åœ°æ–‡ä»¶å¤¹åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼š 1rsync -avz [æºæ–‡ä»¶å¤¹è·¯å¾„] [æœåŠ¡å™¨è´¦å·@æœåŠ¡å™¨ipåœ°å€:ç›®æ ‡è·¯å¾„] å¸¸ç”¨é€‰é¡¹è¯´æ˜ï¼š -aï¼šå½’æ¡£æ¨¡å¼ï¼Œä¿æŒæ–‡ä»¶å±æ€§å’Œé€’å½’å¤åˆ¶å­ç›®å½•ã€‚ -vï¼šè¯¦ç»†è¾“å‡ºï¼Œæ˜¾ç¤ºæ­£åœ¨è¿›è¡Œçš„æ“ä½œã€‚ -zï¼šå¯ç”¨å‹ç¼©ä¼ è¾“ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡ã€‚ -rï¼šé€’å½’å¤åˆ¶å­ç›®å½•ã€‚ -uï¼šåªå¤åˆ¶æ›´æ–°çš„æ–‡ä»¶ã€‚ -Pï¼šæ˜¾ç¤ºä¼ è¾“è¿›åº¦å’Œç»§ç»­ä¸­æ–­çš„ä¼ è¾“ã€‚ --deleteï¼šåˆ é™¤ç›®æ ‡ç›®å½•ä¸­ä¸å­˜åœ¨äºæºç›®å½•ä¸­çš„æ–‡ä»¶ã€‚ rsyncè¿˜æœ‰è®¸å¤šå…¶ä»–é€‰é¡¹å’ŒåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨man rsyncå‘½ä»¤åœ¨å‘½ä»¤è¡Œä¸­æŸ¥çœ‹rsyncçš„è¯¦ç»†æ–‡æ¡£ã€‚","link":"/posts/bb403fd8/"},{"title":"redux-æ ¸å¿ƒåŸç†å®ç°","text":"reduxæ˜¯ä»€ä¹ˆ å¾ˆå¤šäººè®¤ä¸ºreduxå¿…é¡»è¦ç»“åˆReactä½¿ç”¨ï¼Œå…¶å®å¹¶ä¸æ˜¯çš„ï¼ŒRedux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œåªè¦ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€ååˆ†å¤æ‚ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨Reduxç®¡ç†ä½ çš„é¡¹ç›®çŠ¶æ€ï¼Œå®ƒå¯ä»¥ä½¿ç”¨åœ¨reactä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­åœ¨Vueä¸­ï¼Œå½“ç„¶ä¹Ÿé€‚ç”¨å…¶ä»–çš„æ¡†æ¶ã€‚ redux å·¥ä½œåŸç† é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°æœ€ä¸Šé¢çš„ state åœ¨ react ä¸­ state å†³å®šäº†è§†å›¾ï¼ˆuiï¼‰ï¼Œstateçš„å˜åŒ–å°±ä¼šè°ƒç”¨Reactçš„ renderï¼ˆï¼‰æ–¹æ³•ï¼Œä»è€Œæ”¹å˜è§†å›¾ ç”¨æˆ·é€šè¿‡ä¸€äº›äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼Œç§»åŠ¨é¼ æ ‡ï¼‰å°±ä¼šåƒreduceræ´¾å‘ä¸€ä¸ªaction reduceræ¥æ”¶åˆ°actionåå°±ä¼šå»æ›´æ–°state storeæ˜¯åŒ…å«äº†æ‰€æœ‰äº†stateï¼Œå¯ä»¥æŠŠä»–çœ‹åšæ‰€æœ‰çŠ¶æ€çš„é›†åˆ reduxçš„ä¸€äº›apiåŠä½¿ç”¨æ–¹æ³•è¿™é‡Œä¸å†è¿‡å¤šå™è¿° è¯¦æƒ…å¯ä»¥äº†è§£ redux æ–‡æ¡£ï¼šredux ä¸­æ–‡æ–‡æ¡£ redux æºç å‰–æ, ä¸ç‰ˆå®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465// redux : ç²¾ç®€æºç ï¼Œåªå†™äº†æ ¸å¿ƒåŸç†export function createStore(reducer) { // åˆ›å»ºstoreçŠ¶æ€ let state; // storeäº‹ä»¶æ±  let listeners = []; // è·å–stateçŠ¶æ€ä¿¡æ¯ function getState() { // reduxä¸å…è®¸ç›´æ¥æ›´æ”¹stateï¼Œä½†æ˜¯æºç ä¸­åˆæ²¡æœ‰åšç›¸åº”çš„å¤„ç† // è¿™é‡Œç”¨JSONåšä¸€ä¸ªç®€å•çš„æ·±å…‹éš†å¤„ç† return JSON.parse(JSON.stringify(state)); } // æ´¾å‘æäº¤ function dispatch(action) { state = reducer(state, action); // æ¯æ¬¡dispatchä»¥åï¼Œéƒ½è¦å‘å¸ƒä¸€ä¸‹äº‹ä»¶æ±  listeners.forEach(item =&gt; { if (typeof item === &quot;function&quot;) item(); }); } // è®¢é˜… function subscribe(func) { // åœ¨reduxæºç ä¸­å¹¶æ²¡æœ‰åšäº‹ä»¶æ± å»é‡ï¼› ä¸ªäººè§‰å¾—è¦åšä¸€ä¸‹å»é‡ if (!listeners.includes(func)) listeners.push(func); // subscribe(): ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ä»äº‹ä»¶æ± ä¸­ç§»é™¤å½“å‰äº‹ä»¶ (å–æ¶ˆè®¢é˜…) return function unSubscribe() { // ä¸ºé˜²æ­¢æ•°ç»„å¡Œé™·é—®é¢˜ï¼Œè¿™é‡Œç”¨filteræ›¿ä»£spliceç§»é™¤æ•°ç»„é¡¹ listeners = listeners.filter(item =&gt; item !== func); } } // åˆå§‹åŒ–stateï¼Œåˆ›å»ºstoreæ—¶é»˜è®¤æ´¾å‘ä¸€æ¬¡ dispatch({ // åˆå§‹æ´¾å‘çš„typeå€¼ä¸€å®šä¸è¦å’Œé¡¹ç›®ä¸­çš„typeå€¼æœ‰é‡å¤çš„ï¼›è¿™é‡Œreduxæºç åšäº†ä¸€ä¸ªéšæœºæ•°æˆªå–å¤„ç†è½¬å­—ç¬¦ä¸²æ‰€ç”Ÿæˆçš„ä¸€ä¸ªå°½å¯èƒ½ä¸é‡å¤çš„typeåˆå§‹å€¼ type: &quot;@@redux/INIT&quot; + Date.now() // ç®€å•æ“ä½œä¸€ä¸‹ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸ä¼ type }); return { getState, dispatch, subscribe }}// combineReducers: åˆå¹¶reducerexport function combineReducers(reducers) { // åˆ›å»ºstoreåˆå§‹åŒ–stateã€‚é»˜è®¤ = {} return function (state = {}, action) { let combineState = {}; for (let key in reducers) { if (!reducers.hasOwnProperty(key)) break; combineState[key] = reducers[key](state[key], action); } return combineState; // æœ€ç»ˆstate : { module1: {..}, module2: {..}, .....} // åˆå§‹åŒ–åˆ›å»ºä¹‹åï¼Œä»¥åçš„æ¯ä¸€æ¬¡æ‰§è¡Œdispatchï¼Œéƒ½ä¼šè®©æ¯ä¸€ä¸ªç»„ä»¶æ¨¡å—ä¸‹çš„reduceræ‰§è¡Œï¼Œä¸”ä¼šæŠŠstateä¸­å¯¹åº”ç»„ä»¶åçš„å¯¹åº”æ•°æ®ä¼ å…¥reducer ==&gt; reducer(state.module, action) }} è¿™é‡Œåªç²¾ç®€å†™äº†ä¸€ä¸‹reduxæ ¸å¿ƒå·¥ä½œåŸç†, è¿˜æœ‰ä¸€äº›bindActionCreatorsã€applyMiddlewareã€composeâ€¦..å…¶ä»–çš„apiåç»­å†è¯¦æƒ…æ¢ç©¶ä¸€ä¸‹ ~~å—äº†","link":"/posts/a1c455e0/"},{"title":"react-reduxåŸç†å®ç°","text":"å…ˆç®€å•äº†è§£ä¸€ä¸‹ react-redux ä¸€ã€ç»„ä»¶åˆ†ç±»React-Redux å°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼šUI ç»„ä»¶ï¼ˆpresentational componentï¼‰å’Œå®¹å™¨ç»„ä»¶ï¼ˆcontainer componentï¼‰ã€‚ UI ç»„ä»¶ï¼š åªè´Ÿè´£ UI çš„å‘ˆç°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ æ²¡æœ‰çŠ¶æ€ï¼ˆå³ä¸ä½¿ç”¨this.stateè¿™ä¸ªå˜é‡ï¼‰ æ‰€æœ‰æ•°æ®éƒ½ç”±å‚æ•°ï¼ˆthis.propsï¼‰æä¾› ä¸ä½¿ç”¨ä»»ä½• Redux çš„ API å®¹å™¨ç»„ä»¶ï¼š è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£ UI çš„å‘ˆç° å¸¦æœ‰å†…éƒ¨çŠ¶æ€ï¼Œå¯ä»¥å°†çŠ¶æ€é€šè¿‡propsç»™å­ç»„ä»¶ ä½¿ç”¨ Redux çš„ API React-Redux è§„å®šï¼Œæ‰€æœ‰çš„ UI ç»„ä»¶éƒ½ç”±ç”¨æˆ·æä¾›ï¼Œå®¹å™¨ç»„ä»¶åˆ™æ˜¯ç”± React-Redux è‡ªåŠ¨ç”Ÿæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªå†™UIç»„ä»¶ï¼Œè€Œé¡¶å±‚å®¹å™¨æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥ç”Ÿæˆçš„ äºŒã€connect()æ–¹æ³•React-Redux æä¾›äº†connectæ–¹æ³•ï¼Œç”¨äºå°† UI ç»„ä»¶åŒ…è£…æˆå®¹å™¨ç»„ä»¶ã€‚å®¹å™¨æ˜¯è¦æœ‰çŠ¶æ€æœ‰ä¸šåŠ¡é€»è¾‘çš„ï¼Œå› æ­¤åœ¨connectæ–¹æ³•ç”Ÿæˆé¡¶å±‚å®¹å™¨æ—¶ï¼Œæˆ‘ä»¬å°±åº”è¯¥æŠŠæ‰€éœ€è¦çš„çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘å®šä¹‰å¥½å¹¶æä¾›ç»™connectã€‚å› æ­¤ï¼Œconnectæ–¹æ³•çš„å®Œæ•´ API å¦‚ä¸‹ 123456import { connect } from 'react-redux'const VisibleTodoList = connect( mapStateToProps, mapDispatchToProps)(component) å…¶ä¸­ï¼Œconnectæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šmapStateToPropså’ŒmapDispatchToPropsã€‚å®ƒä»¬å®šä¹‰äº† UI ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ã€‚å‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°†stateæ˜ å°„åˆ° UI ç»„ä»¶çš„å‚æ•°ï¼ˆpropsï¼‰ï¼Œåè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹ UI ç»„ä»¶çš„æ“ä½œæ˜ å°„æˆ Actionã€‚ ä¸‰ã€&lt;Provider&gt; ç»„ä»¶connectæ–¹æ³•ç”Ÿæˆå®¹å™¨ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€å †çš„é€»è¾‘å’ŒçŠ¶æ€ï¼Œè€Œåªæœ‰é¡¶å±‚å®¹å™¨èƒ½æ‹¿åˆ°storeçš„æ—¶å€™æ‰æœ‰æ„ä¹‰ï¼Œå› æ­¤éœ€è¦è®©å®¹å™¨ç»„ä»¶æ‹¿åˆ°storeçš„stateå¯¹è±¡ã€‚ React-Redux æä¾›Providerç»„ä»¶ï¼Œå¯ä»¥è®©ç»„ä»¶æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªå®¹å™¨ç»„ä»¶æ‹¿åˆ°stateã€‚ 12345678910import React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;import { Provider } from &quot;react-redux&quot;;import store from &quot;./store/store.js&quot;;import App from &quot;./App&quot;;ReactDOM.render(&lt;Provider store={store}&gt; &lt;App&gt;&lt;/App&gt;&lt;/Provider&gt;, document.querySelector(&quot;#root&quot;)); å››ã€æºç å®ç°react-reduxæ›´å¤šç”¨æ³•ä¸å¤šä»‹ç», è¯¦æƒ…å‚é˜…å®˜æ–¹æ–‡æ¡£ &gt; React Reduxæ–‡æ¡£ ä¸Šä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899import React from &quot;react&quot;;import PropTypes from &quot;prop-types&quot;;// redux : bindActionCreators// import { bindActionCreators } from &quot;redux&quot;; // react-redux: æ ¹ç»„ä»¶ Provider; class Provider extends React.Component { constructor() { super(); } // åˆ©ç”¨contextä¸Šä¸‹æ–‡å®ç°è·¨ç»„ä»¶ä¼ é€’ static childContextTypes = { store: PropTypes.object } getChildContext() { return { store: this.props.store } } render() { console.log(this); // è¿”å›Providerç»„ä»¶æ ‡ç­¾ä¹‹å†…çš„å­ç»„ä»¶è¿›è¡Œæ¸²æŸ“ return &lt;&gt; {this.props.children} &lt;/&gt; }}// connect : é«˜é˜¶å‡½æ•°ï¼Œç”Ÿæˆç»„ä»¶const connect = (mapStateToProps, mapDispatchToProps) =&gt; (Component) =&gt; { return class Connect extends React.Component { constructor(props, context) { super(); // å°†storeä¸­çš„æ€»stateä¼ å…¥mapStateToProps,å…¶è¿”å›éƒ¨åˆ†çš„stateæ•°æ®æˆ–è€…è‡ªå®šä¹‰ã€å…¨éƒ¨çš„state this.state = mapStateToProps(context.store.getState()); } // æ¥æ”¶contextå±æ€§ static contextTypes = { store: PropTypes.object } // è®¢é˜…å‡½æ•°ï¼Œæ¯å½“æ‰§è¡Œdispatchå°±æ›´æ–°è§†å›¾ componentDidMount() { this.unSubscribe = this.context.store.subscribe( () =&gt; this.setState(mapStateToProps(this.context.store.getState())) ); } // å–æ¶ˆè®¢é˜… componentWillUnmount() { this.unSubscribe(); } render() { console.log(this); // mapDispatchToProps : é™¤ä¼ å…¥å‡½æ•°ä»¥å¤–ï¼Œåœ¨react-reduxä¸­:connectç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥actionså¯¹è±¡ã€‚ // å¦‚æœæ˜¯å‡½æ•°ï¼Œå°†store.dispatchä¼ å…¥ï¼Œæ‰§è¡Œæ¥æ”¶å…¶è¿”å›å€¼ã€‚ // å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨reduxä¸­çš„api--&gt; bindActionCreators(); å°†å¯¹è±¡ä¼ å…¥ï¼Œè¿›è¡ŒdispatchäºŒæ¬¡åŒ…è£…æˆå‡½æ•° let actions; if (typeof mapDispatchToProps === &quot;function&quot;) { actions = mapDispatchToProps(this.context.store.dispatch); } else if (typeof mapDispatchToProps === &quot;object&quot; &amp;&amp; mapDispatchToProps !== null) { // actions = bindActionCreators(mapDispatchToProps, this.context.store.dispatch); // reduxå†…ç½® // æ—¢ç„¶å†™åˆ°è¿™é‡Œäº†ï¼Œå°±ä¸ç”¨reduxå†…ç½®çš„bindActionCreatorsæ–¹æ³•äº†ã€‚è¿˜æ˜¯è‡ªå·±å°è£…ä¸€ä¸ªå§ actions = bindActionCreators(mapDispatchToProps, this.context.store.dispatch); } else { actions = {}; } // å°†æŒ‡å®šçš„æ•°æ®ä¼ å…¥å­ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡this.propsè·å– return &lt;&gt; &lt;Component {...this.state} {...actions}&gt;&lt;/Component&gt; &lt;/&gt; } }}// å°è£…ä¸ç‰ˆ bindActionCreators const bindActionCreators = (actionCreators, dispatch) =&gt; { const boundActionCreators = {}; for (let key in actionCreators) { const actionCreator = actionCreators[key]; if (typeof actionCreator === &quot;function&quot;) { boundActionCreators[key] = function (...arg) { dispatch(actionCreator.apply(this, arg)); } } } return boundActionCreators;}export { Provider, connect} äº”ã€æ•ˆæœæµ‹è¯• å°æ¡ˆåˆ—ç›®å½•ç»“æ„ index.js : 12345678910111213import React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;// import { Provider } from &quot;react-redux&quot;;import { Provider } from &quot;./my-react-redux&quot;;import store from &quot;./store/store.js&quot;;import App from &quot;./App&quot;;ReactDOM.render(&lt;Provider store={store}&gt; &lt;App&gt;&lt;/App&gt;&lt;/Provider&gt;, document.querySelector(&quot;#root&quot;)); app.js : 1234567891011121314151617import React from &quot;react&quot;;import Parent from &quot;./components/Parent&quot;;import Child from &quot;./components/Child&quot;;export default class App extends React.Component { constructor(){ super(); } render(){ return &lt;div&gt; &lt;Parent&gt;&lt;/Parent&gt; &lt;Child&gt;&lt;/Child&gt; &lt;/div&gt; }} Parent.jsx : 123456789101112131415161718192021222324252627import React from &quot;react&quot;;import actions from &quot;../store/actions&quot;;import { connect } from &quot;../my-react-redux&quot;;class Parent extends React.Component { constructor() { super(); } changeNum = () =&gt; { this.props.changeNum(); } render() { console.log(this); return &lt;div&gt; {this.props.num} &lt;button onClick={this.changeNum}&gt;æ›´æ”¹num&lt;/button&gt; &lt;/div&gt; }}// export default Parent;export default connect(state =&gt; ({ ...state }), actions)(Parent); å…¶ä»–æ–‡ä»¶å°±ä¸å‘äº†ï¼Œç›´æ¥çœ‹æ•ˆæœ ç‚¹å‡»æ›´æ”¹num ï¼Œè®©num+1 ã€‚ æ›´æ”¹ageï¼Œè®©age+2 å—å—~~ ç¡è§‰","link":"/posts/2f1230a5/"}],"tags":[{"name":"é•œå¤´","slug":"é•œå¤´","link":"/tags/%E9%95%9C%E5%A4%B4/"},{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","link":"/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"},{"name":"Git","slug":"Git","link":"/tags/Git/"},{"name":"CSS3","slug":"CSS3","link":"/tags/CSS3/"},{"name":"ES6","slug":"ES6","link":"/tags/ES6/"},{"name":"HTML5","slug":"HTML5","link":"/tags/HTML5/"},{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"},{"name":"redux","slug":"redux","link":"/tags/redux/"},{"name":"library","slug":"library","link":"/tags/library/"},{"name":"tool","slug":"tool","link":"/tags/tool/"}],"categories":[{"name":"æ‘„å½±","slug":"æ‘„å½±","link":"/categories/%E6%91%84%E5%BD%B1/"},{"name":"åšå®¢","slug":"åšå®¢","link":"/categories/%E5%8D%9A%E5%AE%A2/"},{"name":"å·¥å…·","slug":"å·¥å…·","link":"/categories/%E5%B7%A5%E5%85%B7/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","link":"/categories/%E5%89%8D%E7%AB%AF/"}],"pages":[{"title":"404","text":"404 body{background:#fff}div{width:1024px;height:320px;position:absolute;top:40%;left:50%;transform:translate(-50%,-50%)}","link":"/404.html"},{"title":"fireworks","text":"çƒŸèŠ±æ¨¡æ‹Ÿå™¨ åŠ è½½ä¸­ æ­£åœ¨è£…é…çƒŸèŠ± è®¾ç½® è‹¥æƒ³äº†è§£æ›´å¤šä¿¡æ¯ è¯·ç‚¹å‡»ä»»æ„æ ‡ç­¾ çƒŸèŠ±ç±»å‹ çƒŸèŠ±å¤§å° ç”»è´¨ ç…§äº®å¤©ç©º ç¼©æ”¾ è‡ªåŠ¨æ”¾çƒŸèŠ± åŒæ—¶æ”¾æ›´å¤šçš„çƒŸèŠ± éšè—æ§åˆ¶æŒ‰é’® å…¨å± ä¿ç•™çƒŸèŠ±çš„ç«èŠ± æ‚¨çš„IPï¼š document.write(returnCitySN[\"cip\"]) var mydate = new Date(); document.writeln(\"Copyright&nbsp;&copy;&nbsp;2021 - \" + mydate.getFullYear() + '&nbsp;ç¢å¿µ_NianAll&nbsp;Rights&nbsp;Reserved'); å…³é—­","link":"/fireworks.html"},{"title":"About Me","text":"è¿™é‡Œæ˜¯zhangoneçš„ä¸ªäººç©ºé—´ç«™ ~ æ•…æˆ‘æ‰€æ±‚ï¼Œå”¯æœ‰çœŸçˆ±å’Œè‡ªç”± ğŸ‰å…³äºæœ¬ç«™æœ€åˆå»ºç«™çš„ç›®çš„åªæ˜¯æƒ³ç”¨æ¥è®°å½•ä¸€äº›å·¥ä½œå­¦ä¹ çš„ç¬”è®°ã€‚(ä¹Ÿå¹¶ä¸æ˜¯è®°æ€§å¾ˆå·®ï¼Œæ˜¯â€œçªå‘æ€§å¥å¿˜ç—‡æ™šæœŸæ‚£è€…â€ğŸ¶ğŸ¶)éšç€åæ¥è‡ªå·±æƒ³è¦è®°å½•çš„ä¸œè¥¿ä¹Ÿå¤šäº†èµ·æ¥ï¼Œå¼€å§‹æ„ˆå‘çš„æŠ˜è…¾å°ç ´ç«™ã€‚å·²ç»ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„æŠ€æœ¯åšå®¢äº†ğŸ˜„ğŸ˜„ã€‚ç›®å‰å¯¹æœ¬ç«™çš„è§„åˆ’ï¼šèƒ½å¤Ÿæ˜¯ä¸€ä¸ªè®°å½•å­¦ä¹ ã€æ‘„å½±ã€ç”Ÿæ´»ã€åŠä»Šåæˆ‘å¯èƒ½æƒ³åŠ å…¥æ›´å¤šä¸œè¥¿çš„ä¸ªäººç©ºé—´ç«™äº†ã€‚å‘ƒâ€¦æ€»æ˜¯æƒ³åœ¨è‡ªå·±çš„èƒ½åŠ›èŒƒå›´å†…å°½å¯èƒ½çš„åšåˆ°æ›´å¥½ã€‚ ğŸŒˆå…³äºæˆ‘çš„å…³äºæˆ‘ï¼š00å¹´ï¼Œæ€§åˆ«ç”·ï¼Œç›´ç”·ï¼Œé’¢é“ç›´ç”·ã€‚çˆ±å¥½å¥³ã€‚æ˜¯ä¸€ä¸ªæ²¡å•¥ä¼˜ç‚¹ä¹Ÿæ²¡ç¼ºé™·ï¼Œæ—¢èƒ½å¹²é¥­ä¹Ÿèƒ½å¹²æ´»ï¼Œæ™®æ™®é€šé€šã€ç®€ç®€å•å•çš„å–œæ¬¢å®‰é™çš„äººã€‚ç›®å‰èŒä¸šæ˜¯ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆã€‚åŒæ ·ä¹Ÿå–œæ¬¢ä¸€äº›å…¶ä»–æœ‰è¶£çš„æŠ€æœ¯è¯­è¨€å’Œæ–¹å‘ã€‚ å…´è¶£orçˆ±å¥½ï¼š æ•°ç äº§å“ æ‘„å½±è®°å½• æ—¥æ¼«å›½æ¼« è¿½å‰§ï¼šç»å…¸å‰§ã€å–œå‰§ã€ç§‘å¹»ã€â€¦ éŸ³ä¹ï¼šå‰ä»–ã€ç”µé’¢ ã€‚ï¼ˆæ‰‹æ®‹å…šï¼‰ â€¦â€¦ ä¿æŒçƒ­çˆ±ï¼Œç¾å¥½çš„äº‹ç‰©å³å°†å‘ç”Ÿ ğŸ“®è”ç³»æ–¹å¼ QQ: 1580646258 é‚®ç®±ï¼šzhangone233@126.com GitHubï¼šhttps://github.com/zhangone233","link":"/about.html"},{"title":"","text":"\"use strict\";console.clear();const IS_MOBILE=window.innerWidthisRunning(e)&&soundEnabledSelector(e),qualitySelector=()=>+store.state.config.quality,shellNameSelector=()=>store.state.config.shell,shellSizeSelector=()=>+store.state.config.size,finaleSelector=()=>store.state.config.finale,skyLightingSelector=()=>+store.state.config.skyLighting,scaleFactorSelector=()=>store.state.config.scaleFactor,helpContent={shellType:{header:\"çƒŸèŠ±ç±»å‹\",body:\"ä½ è¦æ”¾çš„çƒŸèŠ±çš„ç±»å‹ï¼Œé€‰æ‹©â€œéšæœºï¼ˆRandomï¼‰â€å¯ä»¥è·å¾—éå¸¸å¥½çš„ä½“éªŒï¼\"},shellSize:{header:\"çƒŸèŠ±å¤§å°\",body:\"çƒŸèŠ±è¶Šå¤§ç»½æ”¾èŒƒå›´å°±è¶Šå¤§ï¼Œä½†æ˜¯çƒŸèŠ±è¶Šå¤§ï¼Œè®¾å¤‡æ‰€éœ€çš„æ€§èƒ½ä¹Ÿä¼šå¢å¤šï¼Œå¤§çš„çƒŸèŠ±å¯èƒ½å¯¼è‡´ä½ çš„è®¾å¤‡å¡é¡¿ã€‚\"},quality:{header:\"ç”»è´¨\",body:\"å¦‚æœåŠ¨ç”»è¿è¡Œä¸æµç•…ï¼Œä½ å¯ä»¥è¯•è¯•é™ä½ç”»è´¨ã€‚ç”»è´¨è¶Šé«˜ï¼ŒçƒŸèŠ±ç»½æ”¾åçš„ç«èŠ±æ•°é‡å°±è¶Šå¤šï¼Œä½†é«˜ç”»è´¨å¯èƒ½å¯¼è‡´ä½ çš„è®¾å¤‡å¡é¡¿ã€‚\"},skyLighting:{header:\"ç…§äº®å¤©ç©º\",body:\"çƒŸèŠ±çˆ†ç‚¸æ—¶ï¼ŒèƒŒæ™¯ä¼šè¢«ç…§äº®ã€‚å¦‚æœä½ çš„å±å¹•çœ‹èµ·æ¥å¤ªäº®äº†ï¼Œå¯ä»¥æŠŠå®ƒæ”¹æˆâ€œæš—â€æˆ–è€…â€œä¸â€ã€‚\"},scaleFactor:{header:\"ç¼©æ”¾\",body:\"ä½¿ä½ ä¸çƒŸèŠ±ç¦»å¾—æ›´è¿‘æˆ–æ›´è¿œã€‚å¯¹äºè¾ƒå¤§çš„çƒŸèŠ±ï¼Œä½ å¯ä»¥é€‰æ‹©æ›´å°çš„ç¼©æ”¾å€¼ï¼Œå°¤å…¶æ˜¯åœ¨æ‰‹æœºæˆ–å¹³æ¿ç”µè„‘ä¸Šã€‚\"},autoLaunch:{header:\"è‡ªåŠ¨æ”¾çƒŸèŠ±\",body:\"å¼€å¯åä½ å°±å¯ä»¥ååœ¨ä½ çš„è®¾å¤‡å±å¹•å‰é¢æ¬£èµçƒŸèŠ±äº†ï¼Œä½ ä¹Ÿå¯ä»¥å…³é—­å®ƒï¼Œä½†å…³é—­åä½ å°±åªèƒ½é€šè¿‡ç‚¹å‡»å±å¹•çš„æ–¹å¼æ¥æ”¾çƒŸèŠ±ã€‚\"},finaleMode:{header:\"åŒæ—¶æ”¾æ›´å¤šçš„çƒŸèŠ±\",body:\"å¯ä»¥åœ¨åŒä¸€æ—¶é—´è‡ªåŠ¨æ”¾å‡ºæ›´å¤šçš„çƒŸèŠ±ï¼ˆä½†éœ€è¦å¼€å¯å…ˆå¼€å¯â€œè‡ªåŠ¨æ”¾çƒŸèŠ±â€ï¼‰ã€‚\"},hideControls:{header:\"éšè—æ§åˆ¶æŒ‰é’®\",body:\"éšè—å±å¹•é¡¶éƒ¨çš„æŒ‰é’®ã€‚å¦‚æœä½ è¦æˆªå›¾ï¼Œæˆ–è€…éœ€è¦ä¸€ä¸ªæ— ç¼çš„ä½“éªŒï¼Œä½ å°±å¯ä»¥å°†æŒ‰é’®éšè—ï¼Œéšè—æŒ‰é’®åä½ ä»ç„¶å¯ä»¥åœ¨å³ä¸Šè§’æ‰“å¼€è®¾ç½®ã€‚\"},fullscreen:{header:\"å…¨å±\",body:\"åˆ‡æ¢è‡³å…¨å±æ¨¡å¼\"},longExposure:{header:\"ä¿ç•™çƒŸèŠ±çš„ç«èŠ±\",body:\"å¯ä»¥ä¿ç•™çƒŸèŠ±ç•™ä¸‹çš„ç«èŠ±\"}},nodeKeyToHelpKey={shellTypeLabel:\"shellType\",shellSizeLabel:\"shellSize\",qualityLabel:\"quality\",skyLightingLabel:\"skyLighting\",scaleFactorLabel:\"scaleFactor\",autoLaunchLabel:\"autoLaunch\",finaleModeLabel:\"finaleMode\",hideControlsLabel:\"hideControls\",fullscreenLabel:\"fullscreen\",longExposureLabel:\"longExposure\"},appNodes={stageContainer:\".stage-container\",canvasContainer:\".canvas-container\",controls:\".controls\",menu:\".menu\",menuInnerWrap:\".menu__inner-wrap\",pauseBtn:\".pause-btn\",pauseBtnSVG:\".pause-btn use\",soundBtn:\".sound-btn\",soundBtnSVG:\".sound-btn use\",shellType:\".shell-type\",shellTypeLabel:\".shell-type-label\",shellSize:\".shell-size\",shellSizeLabel:\".shell-size-label\",quality:\".quality-ui\",qualityLabel:\".quality-ui-label\",skyLighting:\".sky-lighting\",skyLightingLabel:\".sky-lighting-label\",scaleFactor:\".scaleFactor\",scaleFactorLabel:\".scaleFactor-label\",autoLaunch:\".auto-launch\",autoLaunchLabel:\".auto-launch-label\",finaleModeFormOption:\".form-option--finale-mode\",finaleMode:\".finale-mode\",finaleModeLabel:\".finale-mode-label\",hideControls:\".hide-controls\",hideControlsLabel:\".hide-controls-label\",fullscreenFormOption:\".form-option--fullscreen\",fullscreen:\".fullscreen\",fullscreenLabel:\".fullscreen-label\",longExposure:\".long-exposure\",longExposureLabel:\".long-exposure-label\",helpModal:\".help-modal\",helpModalOverlay:\".help-modal__overlay\",helpModalHeader:\".help-modal__header\",helpModalBody:\".help-modal__body\",helpModalCloseBtn:\".help-modal__close-btn\"};function renderApp(e){var t=\"#icon-\"+(e.paused?\"play\":\"pause\"),a=\"#icon-sound-\"+(soundEnabledSelector()?\"on\":\"off\");appNodes.pauseBtnSVG.setAttribute(\"href\",t),appNodes.pauseBtnSVG.setAttribute(\"xlink:href\",t),appNodes.soundBtnSVG.setAttribute(\"href\",a),appNodes.soundBtnSVG.setAttribute(\"xlink:href\",a),appNodes.controls.classList.toggle(\"hide\",e.menuOpen||e.config.hideControls),appNodes.canvasContainer.classList.toggle(\"blur\",e.menuOpen),appNodes.menu.classList.toggle(\"hide\",!e.menuOpen),appNodes.finaleModeFormOption.style.opacity=e.config.autoLaunch?1:.32,appNodes.quality.value=e.config.quality,appNodes.shellType.value=e.config.shell,appNodes.shellSize.value=e.config.size,appNodes.autoLaunch.checked=e.config.autoLaunch,appNodes.finaleMode.checked=e.config.finale,appNodes.skyLighting.value=e.config.skyLighting,appNodes.hideControls.checked=e.config.hideControls,appNodes.fullscreen.checked=e.fullscreen,appNodes.longExposure.checked=e.config.longExposure,appNodes.scaleFactor.value=e.config.scaleFactor.toFixed(2),appNodes.menuInnerWrap.style.opacity=e.openHelpTopic?.12:1,appNodes.helpModal.classList.toggle(\"active\",!!e.openHelpTopic),e.openHelpTopic&&({header:t,body:a}=helpContent[e.openHelpTopic],appNodes.helpModalHeader.textContent=t,appNodes.helpModalBody.textContent=a)}function handleStateChange(e,t){e=canPlaySoundSelector(e);e!==canPlaySoundSelector(t)&&(e?soundManager.resumeAll():soundManager.pauseAll())}function getConfigFromDOM(){return{quality:appNodes.quality.value,shell:appNodes.shellType.value,size:appNodes.shellSize.value,autoLaunch:appNodes.autoLaunch.checked,finale:appNodes.finaleMode.checked,skyLighting:appNodes.skyLighting.value,longExposure:appNodes.longExposure.checked,hideControls:appNodes.hideControls.checked,scaleFactor:parseFloat(appNodes.scaleFactor.value)}}Object.keys(appNodes).forEach(e=>{appNodes[e]=document.querySelector(appNodes[e])}),fullscreenEnabled()||appNodes.fullscreenFormOption.classList.add(\"remove\"),store.subscribe(renderApp),store.subscribe(handleStateChange);const updateConfigNoEvent=()=>updateConfig(),COLOR_NAMES=(appNodes.quality.addEventListener(\"input\",updateConfigNoEvent),appNodes.shellType.addEventListener(\"input\",updateConfigNoEvent),appNodes.shellSize.addEventListener(\"input\",updateConfigNoEvent),appNodes.autoLaunch.addEventListener(\"click\",()=>setTimeout(updateConfig,0)),appNodes.finaleMode.addEventListener(\"click\",()=>setTimeout(updateConfig,0)),appNodes.skyLighting.addEventListener(\"input\",updateConfigNoEvent),appNodes.longExposure.addEventListener(\"click\",()=>setTimeout(updateConfig,0)),appNodes.hideControls.addEventListener(\"click\",()=>setTimeout(updateConfig,0)),appNodes.fullscreen.addEventListener(\"click\",()=>setTimeout(toggleFullscreen,0)),appNodes.scaleFactor.addEventListener(\"input\",()=>{updateConfig(),handleResize()}),Object.keys(nodeKeyToHelpKey).forEach(e=>{const t=nodeKeyToHelpKey[e];appNodes[e].addEventListener(\"click\",()=>{store.setState({openHelpTopic:t})})}),appNodes.helpModalCloseBtn.addEventListener(\"click\",()=>{store.setState({openHelpTopic:null})}),appNodes.helpModalOverlay.addEventListener(\"click\",()=>{store.setState({openHelpTopic:null})}),Object.keys(COLOR)),COLOR_CODES=COLOR_NAMES.map(e=>COLOR[e]),COLOR_CODES_W_INVIS=[...COLOR_CODES,INVISIBLE],COLOR_CODE_INDEXES=COLOR_CODES_W_INVIS.reduce((e,t,a)=>(e[t]=a,e),{}),COLOR_TUPLES={};function randomColorSimple(){return COLOR_CODES[Math.random()*COLOR_CODES.length|0]}COLOR_CODES.forEach(e=>{COLOR_TUPLES[e]={r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}});let lastColor;function randomColor(e){var t=e&&e.notSame,a=e&&e.notColor,e=e&&e.limitWhite;let o=randomColorSimple();if(e&&o===COLOR.White&&Math.random(){this.ctx.resume()},250)},_lastSmallBurstTime:0,playSound(e,t=1){if(t=MyMath.clamp(t,0,1),canPlaySoundSelector()&&!(simSpeed","link":"/fireworks/js/script.js"}]}