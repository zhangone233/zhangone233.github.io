<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>One&#39;s Blog</title>
  
  <subtitle>å‰¯æ ‡é¢˜</subtitle>
  <link href="https://zhangone.site/atom.xml" rel="self"/>
  
  <link href="https://zhangone.site/"/>
  <updated>2022-12-27T18:01:55.000Z</updated>
  <id>https://zhangone.site/</id>
  
  <author>
    <name>zhangone</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Walineè¯„è®ºç³»ç»Ÿç»ˆç»ˆç»ˆç»ˆç»ˆäºèƒ½ç”¨äº†~</title>
    <link href="https://zhangone.site/posts/c0155143/"/>
    <id>https://zhangone.site/posts/c0155143/</id>
    <published>2022-12-27T18:01:55.000Z</published>
    <updated>2022-12-27T18:01:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>æŠ˜è…¾äº†è¿™ä¹ˆä¹…çš„åšå®¢è¯„è®ºç³»ç»Ÿï¼Œå¯ç®—æ˜¯èƒ½å‘Šä¸€æ®µè½äº†ã€‚ğŸ˜ˆ</p><h2 id="ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ"></a>ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ</h2><p>ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯Gitalkï¼Œåæ¥ä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯å“ªæ ¹ç­‹æ­é”™äº†ï¼Œè§‰å¾—ä¸å¥½ç”¨åˆå¼€å§‹æŠ˜è…¾äº†èµ·æ¥ã€‚<br>ç„¶åå…ˆè¯•äº†è¯•Valineï¼Œæ­£å½“è§‰å¾—è¿˜ä¸é”™æ—¶ï¼Œå°±æ³¨æ„åˆ°æœ‰å…¶å®ƒç”¨æˆ·å‘ç°ä¸€ä¸ªå­˜åœ¨äºValineè¯„è®ºæ’ä»¶çš„æ¼æ´ä¼šå¯¼è‡´æ­¤è¯„è®ºæœåŠ¡æš´éœ²æ‰€æœ‰è¯„è®ºè€…çš„ IPåœ°å€ (<a href="https://github.com/xCss/Valine/issues/336">xCss&#x2F;Valine#336</a>)ã€‚ è¯·åœ¨æ­¤æ¼æ´ä¿®å¤ä¹‹å‰æ¢ç”¨å…¶ä»–è¯„è®ºæœåŠ¡ã€‚<br>so what ï¼Ÿç›´æ¥æ¢  <a href="https://waline.js.org/">Waline</a> ï¼</p><p>çœ‹ä¸€ä¸‹Walineå®˜ç½‘çš„ä¸€äº›ä»‹ç»ï¼š</p><blockquote><p>ä¸€æ¬¾ä» <a href="https://valine.js.org/">valine</a> è¡ç”Ÿçš„å¸¦åç«¯è¯„è®ºç³»ç»Ÿã€‚å¯ä»¥å°† Waline ç­‰ä»·æˆ With backend Valine.</p></blockquote><p>ç‰¹æ€§ï¼šå¿«é€Ÿã€çœŸÂ·å®‰å…¨ã€Markdown è¯­æ³•æ”¯æŒã€è½»é‡æ˜“ç”¨ã€å…è´¹éƒ¨ç½²ã€å¤šç§éƒ¨ç½²éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨æœåŠ¡æ”¯æŒï¼Œæ¯åˆ—é€‰æ‹©ä¸€é¡¹å¤šè¾¾ 84 ç§éƒ¨ç½²æ–¹å¼ä»»å›é€‰æ‹©â€¦ ï¼ˆemmmğŸ˜‚ï¼‰</p><p>åæ­£çœ‹ç€å®˜æ–¹å¹äº†ä¸€é€šç‰›çš®ï¼Œæœ€è®©æˆ‘æ„Ÿå…´è¶£çš„è¿˜æ˜¯é‚£ä¸ªç‹¬ç«‹æœåŠ¡ç«¯éƒ¨ç½²ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€ææ•´èµ·æ¥ï¼</p><span id="more"></span><h2 id="Waline-é…ç½®"><a href="#Waline-é…ç½®" class="headerlink" title="Waline é…ç½®"></a>Waline é…ç½®</h2><p>å…ˆæ˜¯çœ‹ç€å®˜ç½‘çš„ <a href="https://waline.js.org/guide/get-started/">å¿«é€Ÿä¸Šæ‰‹</a> æ–‡æ¡£å®Œæ•´æ“ä½œæµç¨‹èµ°äº†ä¸€éã€‚LeanCloudæ³¨å†Œã€åˆ›å»ºåº”ç”¨ã€ Vercel éƒ¨ç½²é¡¹ç›®åˆ›å»º+ç¯å¢ƒå˜é‡è®¾ç½®ã€â€¦.ç­‰ç­‰ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ã€‚æœ€åç»ˆäºèµ°å®Œäº†æµç¨‹ï¼Œå…´å¥‹çš„å»ç‚¹å‡»éƒ¨ç½²é¡¹ç›®çš„ Visit æŒ‰é’®å»é¢„è§ˆ â€“</p><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/202212291303093.png"></p><p>è‡ªå·±æµ‹è¯•äº†ä¸¤æ¡è¯„è®ºä¹‹åï¼šå“å‘¦~ä¸é”™å‘¦ã€‚<br>ç„¶åèµ¶ç´§æŒ‰ç…§æ¥å…¥æµç¨‹å»é…ç½®è‡ªå·±çš„åšå®¢é¡¹ç›®ï¼Œæ­£å½“æˆ‘è‡ªæ»¡æ—¶åˆæ³¨æ„åˆ°äº†ç¬¬ä¸€æ¡æµ‹è¯•è¯„è®ºçš„ä½ç½®ä¿¡æ¯ â€“ ä¸œäº¬éƒ½ğŸ˜“<br>å¥½å®¶ä¼™ï¼Œæˆ‘è¿˜ç¿»ç€å¢™å‘¢ã€‚ å› ä¸ºæˆ‘åˆ›å»ºçš„æ˜¯å›½é™…ç‰ˆï¼Œå…è´¹éƒ¨ç½²æœåŠ¡å™¨å’ŒåŸŸåéƒ½æ˜¯å›½å¤–çš„ï¼ˆæ¯•ç«Ÿå›½å†…å¤§ç¯å¢ƒï¼Œæ‡‚éƒ½éƒ½æ‡‚ï¼‰ã€‚<br>æ¥ç€æˆ‘ä¾¿ä»å¢™ä¸Šä¸‹æ¥è¯•äº†ä¸€é€šï¼Œè™½ç„¶é¡µé¢è¿˜æ˜¯èƒ½æ­£å¸¸æ‰“å¼€ï¼Œä½†æ˜¯æäº¤è¯„è®ºåŠŸèƒ½è¿˜æ˜¯æŒ‚äº†ã€‚ï¼ˆé“ä»”æ­¤æ—¶éå¸¸ä¸æ‚¦ğŸ˜¯ï¼‰</p><p>å»ç½‘æœäº†ä¸€ä¸‹ç­”æ¡ˆï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯vercel.appåŸŸååœ¨å›½å†…é­åˆ°æ±¡æŸ“æ— æ³•è®¿é—®ã€‚<br>éšåæ‰¾åˆ°äº†ä¸¤ç§è§£å†³åŠæ³•ï¼š</p><ol><li>å¦‚æœä½ æœ‰ç”³è¯·è¿‡è‡ªå·±ç‹¬ç«‹çš„åšå®¢åŸŸåï¼Œå¯ä»¥åœ¨åšå®¢é¡¶çº§åŸŸåä¸Šæ·»åŠ ä¸€ä¸ªäºŒçº§å­åŸŸåä½œä¸ºè¯„è®ºç³»ç»Ÿçš„ä½¿ç”¨åŸŸåã€‚ç„¶ååˆ«å¿˜äº†æ·»åŠ ä¸€æ¡DNSè§£æè®°å½•ï¼šCNAME ç±»å‹è§£ææŒ‡å‘ cname.vercel-dns.com è¿™ä¸ªåœ°å€ã€‚ ä¹‹åå†å»verceléƒ¨ç½²æœåŠ¡ä¸Šï¼Œç‚¹å‡»settingsï¼Œæ‰¾åˆ°Domianså°†vercelä¸Šçš„walineåœ°å€æŒ‡å‘ä½ è®¾ç½®çš„å­åŸŸåä¸Šã€‚è¿™æ ·å°±å®Œæˆäº†ï¼Œåé¢é…ç½®åšå®¢çš„æ—¶å€™serverURLå±æ€§é…ç½®åˆšåˆšçš„å­åŸŸåå°±å¥½äº†ã€‚</li><li>ä½¿ç”¨å…¶å®ƒçš„éƒ¨ç½²æœåŠ¡å™¨ä»£æ›¿verceléƒ¨ç½²ã€‚ä¹Ÿæ˜¯æˆ‘ç°åœ¨é‡‡ç”¨çš„æ–¹å¼ã€‚è™½ç„¶æˆ‘å·²æœ‰ç‹¬ç«‹åŸŸå+å¤‡æ¡ˆï¼Œä½†å°±æ˜¯æƒ³å°å°é²œğŸ˜‹</li></ol><h2 id="ä½¿ç”¨DetaæœåŠ¡ç«¯éƒ¨ç½²"><a href="#ä½¿ç”¨DetaæœåŠ¡ç«¯éƒ¨ç½²" class="headerlink" title="ä½¿ç”¨DetaæœåŠ¡ç«¯éƒ¨ç½²"></a>ä½¿ç”¨DetaæœåŠ¡ç«¯éƒ¨ç½²</h2><p><a href="https://www.deta.sh/">DETAå®˜ç½‘</a> ï¼š<a href="https://www.deta.sh/">https://www.deta.sh/</a></p><ol><li>è¿›å…¥å®˜ç½‘åè¿˜æ˜¯è€å¥—è·¯å…ˆæ³¨å†Œï¼Œç„¶åé¡µé¢ä¼šè‡ªåŠ¨å¼•å¯¼ä½ å»åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„éƒ¨ç½²é¡¹ç›®project</li><li>ç›´æ¥ç‚¹è¿™ä¸ªé“¾æ¥è¿›å…¥ï¼š <a href="https://web.deta.sh/deploy?path=https://github.com/walinejs/deta-starter">https://web.deta.sh/deploy?path=https://github.com/walinejs/deta-starter</a> å°†Walineå¿«é€Ÿéƒ¨ç½²åˆ°detaå¹³å°</li><li>detaå¹³å°éƒ¨ç½²å®Œæˆä»¥åä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšæœºåŸŸåé“¾æ¥ã€‚å°†è¿™ä¸ªé“¾æ¥é…ç½®åˆ°åšå®¢é¡¹ç›®ä¸­serverURLå±æ€§å°±å¯ä»¥æ­£å¸¸è¯„è®ºäº†ã€‚</li></ol><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://waline.js.org/guide/deploy/deta.html">https://waline.js.org/guide/deploy/deta.html</a></p><p>ï¼~~ end</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æŠ˜è…¾äº†è¿™ä¹ˆä¹…çš„åšå®¢è¯„è®ºç³»ç»Ÿï¼Œå¯ç®—æ˜¯èƒ½å‘Šä¸€æ®µè½äº†ã€‚ğŸ˜ˆ&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº†Walineï¼Ÿ&lt;/h2&gt;&lt;p&gt;ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯Gitalkï¼Œåæ¥ä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯å“ªæ ¹ç­‹æ­é”™äº†ï¼Œè§‰å¾—ä¸å¥½ç”¨åˆå¼€å§‹æŠ˜è…¾äº†èµ·æ¥ã€‚&lt;br&gt;ç„¶åå…ˆè¯•äº†è¯•Valineï¼Œæ­£å½“è§‰å¾—è¿˜ä¸é”™æ—¶ï¼Œå°±æ³¨æ„åˆ°æœ‰å…¶å®ƒç”¨æˆ·å‘ç°ä¸€ä¸ªå­˜åœ¨äºValineè¯„è®ºæ’ä»¶çš„æ¼æ´ä¼šå¯¼è‡´æ­¤è¯„è®ºæœåŠ¡æš´éœ²æ‰€æœ‰è¯„è®ºè€…çš„ IPåœ°å€ (&lt;a href=&quot;https://github.com/xCss/Valine/issues/336&quot;&gt;xCss&amp;#x2F;Valine#336&lt;/a&gt;)ã€‚ è¯·åœ¨æ­¤æ¼æ´ä¿®å¤ä¹‹å‰æ¢ç”¨å…¶ä»–è¯„è®ºæœåŠ¡ã€‚&lt;br&gt;so what ï¼Ÿç›´æ¥æ¢  &lt;a href=&quot;https://waline.js.org/&quot;&gt;Waline&lt;/a&gt; ï¼&lt;/p&gt;
&lt;p&gt;çœ‹ä¸€ä¸‹Walineå®˜ç½‘çš„ä¸€äº›ä»‹ç»ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¾ä» &lt;a href=&quot;https://valine.js.org/&quot;&gt;valine&lt;/a&gt; è¡ç”Ÿçš„å¸¦åç«¯è¯„è®ºç³»ç»Ÿã€‚å¯ä»¥å°† Waline ç­‰ä»·æˆ With backend Valine.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç‰¹æ€§ï¼šå¿«é€Ÿã€çœŸÂ·å®‰å…¨ã€Markdown è¯­æ³•æ”¯æŒã€è½»é‡æ˜“ç”¨ã€å…è´¹éƒ¨ç½²ã€å¤šç§éƒ¨ç½²éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨æœåŠ¡æ”¯æŒï¼Œæ¯åˆ—é€‰æ‹©ä¸€é¡¹å¤šè¾¾ 84 ç§éƒ¨ç½²æ–¹å¼ä»»å›é€‰æ‹©â€¦ ï¼ˆemmmğŸ˜‚ï¼‰&lt;/p&gt;
&lt;p&gt;åæ­£çœ‹ç€å®˜æ–¹å¹äº†ä¸€é€šç‰›çš®ï¼Œæœ€è®©æˆ‘æ„Ÿå…´è¶£çš„è¿˜æ˜¯é‚£ä¸ªç‹¬ç«‹æœåŠ¡ç«¯éƒ¨ç½²ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€ææ•´èµ·æ¥ï¼&lt;/p&gt;</summary>
    
    
    
    <category term="åšå®¢" scheme="https://zhangone.site/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="åšå®¢æ­å»º" scheme="https://zhangone.site/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>å¼€ç®±ï¼šç´¢è”¡å®šç„¦ 55mm F1.8</title>
    <link href="https://zhangone.site/posts/77b658d2/"/>
    <id>https://zhangone.site/posts/77b658d2/</id>
    <published>2022-11-23T18:28:34.000Z</published>
    <updated>2022-11-25T01:32:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¿ƒå¿ƒå¿µå¿µçš„å®šç„¦å¤´ç»ˆäºåˆ°è´§äº†~ è¿™æ˜¯å…¥å‘æ‘„å½±ä»¥æ¥çš„ç¬¬äºŒé¢—é•œå¤´ã€‚</p><span id="more"></span><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052125377.jpg"></p><br /><h2 id="ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é¢—é•œå¤´"><a href="#ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é¢—é•œå¤´" class="headerlink" title="ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é¢—é•œå¤´"></a>ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é¢—é•œå¤´</h2><p><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212051949764.png" alt="SEL55F18Z"></p><ul><li>ç„¦è·ï¼šå®šç„¦å¤´ï¼Œå…¨ç”»å¹…ä¸‹55æ¯«ç±³ã€‚  APS-Cç”»å¹…ä¸‹çš„35mmè§„æ ¼æ¢ç®—ç„¦è·ä¸ºï¼š82.5æ¯«ç±³</li><li>å…‰åœˆï¼šæœ€å¤§F1.8 ï¼Œ æœ€å°F22</li><li>é‡é‡ï¼š281å…‹ (nice ğŸ˜„ï¼Œè·Ÿæˆ‘çš„A7Cå¾ˆæ­)</li><li>å°ºå¯¸ï¼š64.4 x 70.5ï¼ˆä½“ç§¯å¾ˆniceï¼é€‚é©¬å¤§ç‚®è­¦å‘Šâš ï¸å“ˆå“ˆ ï¼‰</li><li>æ»¤å…‰é•œç›´å¾„ï¼š49æ¯«ç±³ ï¼ˆèµï¼‰</li><li>æœ€è¿‘å¯¹ç„¦è·ç¦»çº¦ï¼š50å˜ç±³ ï¼ˆå°±æ˜¯è·ç¦»åŠç±³ä¹‹å†…å¯¹ä¸ä¸Šç„¦ã€‚å·®è¯„ğŸ˜ˆï¼‰</li><li>â€¦. ï¼ˆotherï¼‰</li></ul><p> Sonnar T* FE 55mm F1.8 ZA å®šç„¦é•œå¤´ã€‚ä¸Šå¸‚æ—¶é—´æ˜¯2013å¹´10æœˆä»½ï¼Œè·ç¦»ç°åœ¨å·²ç»è¿‡å»9å¹´äº†ã€‚ï¼ˆWTH ? å››ä¹å…¥å›½å†›äº†ï¼ï¼ï¼‰<br>è™½è¯´æ•°ç ã€ç”µå­ç±»äº§å“ä¸€å‘ç§‰æ‰¿ä¹°æ–°ä¸ä¹°æ—§ï¼Œä½†è¿™é¢—é•œå¤´ä»ä¸Šå¸‚ä»¥æ¥è‡³ä»Šé¥±å—å¥½è¯„ï¼Œæœ‰å¤ªå¤šäººä½¿ç”¨å®ƒæ‹å‡ºæ¥å¾ˆå¤šéå¸¸æ£’çš„ä½œå“ã€‚æ›´æœ‰äººç§°ä¹‹ä¸ºâ€™å…¥é—¨å¿…å¤‡é•œå¤´â€™ã€‚ç®—æ˜¯ä¸€ä¸ªç»å…¸å¤´äº†ã€‚</p><p><strong>ä¸ªäººè®¤ä¸ºçš„ä¸€äº›ä¼˜ç‚¹</strong>ï¼š<br>è‰²å½©ä¸é”™ï¼Œç…§ç‰‡ä¸è§†é¢‘è¡¨ç°éƒ½å¾ˆå¥½<br>åŸå‚é•œå¤´ï¼Œè”¡å¸é•€è†œã€‚å¯¹ç„¦é€Ÿåº¦å¿«ä½“éªŒå¥½ã€‚ï¼ˆæ¯•ç«Ÿäº²å„¿å­ï¼‰<br>å¤–è§‚å¥½çœ‹ã€‚ä½“ç§¯å°ï¼Œé‡é‡è½»ï¼Œç›´ç­’è§„æ•´å½¢çŠ¶è¾ƒä¸ºç¬¦åˆä¸ªäººå®¡ç¾ã€‚è”¡å¸å°è“æ ‡ä¿¡ä»°åŠ æˆï¼ï¼ˆé¢œå€¼å³æ­£ä¹‰ğŸ˜‹ï¼‰<br>æ­é…æˆ‘çš„A7Cå°æœºèº«æ¯”è¾ƒåˆé€‚ã€‚è½»ä¾¿ä¼šæ›´æœ‰å¸¦å‡ºå»çš„æ„æ„¿ã€‚<br>â€¦..</p><p><strong>å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹</strong>:</p><ol><li>æœ€è¿‘å¯¹ç„¦è·ç¦»50å˜ç±³æœ‰ç‚¹æ— å¥ˆâ€¦</li><li>æœ‰ä¸ªå¤–å·ï¼Œæ±Ÿæ¹–äººç§° â€˜ç´«éœä»™å­â€™ ã€‚è‡ªå·±å®æµ‹æŸäº›å…‰çº¿åœºæ™¯ä¸‹ç¡®å®ä¼šæœ‰è¾ƒä¸ºæ˜æ˜¾çš„ç´«è¾¹ã€‚ï¼ˆä¸è¿‡å¯¹äºæˆ‘è¿™ç§éä¸“ä¸šäººå£«æ¥è¯´ï¼Œé‚£éƒ½ä¸æ˜¯äº‹~ï¼‰</li><li>æœ‰ç‚¹å°è´µemmm ï¼ˆä¹å¹´è€å¤´äº†ï¼ä»·æ ¼çœŸåšæŒºï¼‰</li></ol><br /><h2 id="é•œå¤´å®ç‰©ç…§ç‰‡"><a href="#é•œå¤´å®ç‰©ç…§ç‰‡" class="headerlink" title="é•œå¤´å®ç‰©ç…§ç‰‡"></a>é•œå¤´å®ç‰©ç…§ç‰‡</h2><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052146371.jpg" alt="ä¾§è¾¹"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052147759.jpg" alt="ä¸Šé¢"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052149959.jpg" alt="å‰é¢"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052150084.jpg" alt="é•œå¤´"></p><p>æˆ‘çš„æ‰‹æœºæ‹æ‘„ç´ è´¨å¤ªæ¸£äº†â€¦.<br>é•œå¤´å…¶å®å¾ˆå¥½çœ‹ã€‚</p><br /><h2 id="å¤–å‡ºå®æ‹ç…§ç‰‡"><a href="#å¤–å‡ºå®æ‹ç…§ç‰‡" class="headerlink" title="å¤–å‡ºå®æ‹ç…§ç‰‡"></a>å¤–å‡ºå®æ‹ç…§ç‰‡</h2><p><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212052236257.png"></p><p>å‡ºå»æ‰«è¡—å’¯~ï¼ï¼<br><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212052217426.jpeg" alt="å¹¿å‘Š"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/picture/202212052214757.jpeg" alt="ç¯å…‰"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212052218071.jpeg" alt="èŠ±"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212052218591.jpeg" alt="èŠ±è‰"></p><p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å‘ƒ</p><p><img src="https://cdn.zhangone.site/PhotoBed/img/photography/202212052239100.jpeg" alt="æ‹çš„å•¥ç©æ„å•Š"></p><p>å—¯emmmâ€¦â€¦ å¥½åƒæ‹çš„æŒºä¸€èˆ¬çš„å‘ƒã€‚ è¿˜æ²¡æœ‰ä¸€äº›ä¸»æ‰“æ‹æ‘„çš„æ‰‹æœºæˆç‰‡å¥½çœ‹å‘¢Ohã€‚</p><p>å¼€å¯ç‹¡è¾©æ¨¡å¼ï¼šä¸€å®šæ˜¯ç›´å‡ºçš„åŸå› ï¼æ²¡åæœŸï¼åœºæ™¯ä¸è¡Œï¼æ²¡æœ‰ä¸‰è„šæ¶çš„åŸå› ï¼ä»Šå¤©å¤©æ°”ä¸å¥½ï¼å†»æ‰‹å¤ªæŠ–äº†ï¼è·¯äººä¸é…åˆğŸ˜“ï¼ â€¦â€¦â€¦â€¦  ï¼ˆğŸ¶ä¸æ‰¿è®¤è‡ªå·±æ‹æ‘„æŠ€æœ¯èœğŸ¶ï¼‰</p><br /><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æ™šä¸Šé¡¶ç€å¾ˆå†·çš„æ°”æ¸©ï¼Œé¡¶ç€ç¤¾æå¿ƒç†å»æ‰«è¡—æ‹äº†å‡ åå¼ ï¼Œå›åˆ°å®¶å‘ç°ç«Ÿæ²¡ä¸€å¼ è‡ªå·±æ»¡æ„çš„ç…§ç‰‡ã€‚ä½†æˆ‘ä¹Ÿæ²¡æœ‰å¾ˆå¤±è½å§ï¼Œå› ä¸ºæˆ‘çš„æ‹æ‘„ç»å†ä¸€ç›´éƒ½æ˜¯è¿™æ ·ğŸ˜‚ å“ˆå“ˆå“ˆ</p><p>è‡ªä»æœ‰äº†ç›¸æœºåæ‰å‘ç°æ‘„å½±å¹¶ä¸æ˜¯è‡ªå·±æƒ³è±¡çš„é‚£ä¹ˆç®€å•ï¼Œæœ‰å¾ˆå¤šçš„å‚æ•°çŸ¥è¯†ï¼Œæ„å›¾å®¡ç¾ï¼ŒåæœŸè°ƒè‰²ç­‰çŸ¥è¯†éœ€è¦å»å­¦ä¹ ã€‚<br>ä¸æ˜¯æŒ‰ä¸€ä¸‹å¿«é—¨å°±èƒ½å‡ºå¥½çœ‹çš„ç…§ç‰‡ï¼Œä¹Ÿè®²ç©¶å¤©æ—¶åœ°åˆ©äººå’Œã€‚å°¤å…¶æ˜¯æ‰«è¡—è¿™ç§äººæ–‡æ‘„å½±ï¼Œéšæœºæ€§å¾ˆå¤šã€‚ä¸€äº›ç¾å¥½çš„ç”»é¢å¾€å¾€åªæœ‰ä¸€ç¬é—´ï¼Œæ²¡èƒ½åŠæ—¶æŠ“æ‹åˆ°å°±å¾ˆéš¾å†æœ‰æœºä¼šäº†ï¼ˆåƒæäº†äººç”Ÿæœºé‡ã€‚ ?æ€ä¹ˆçªç„¶æ­£ç»ğŸ™…ğŸ»â€â™€ï¸ï¼Ÿï¼‰</p><p>ä¸€ç›´è§‰å¾— <strong>â€œæ„ˆæŒ«æ„ˆå‹‡â€</strong> è¿™å¥æˆè¯­æ›´èƒ½ä½“ç°å‡ºä»€ä¹ˆæ˜¯çº¯ç²¹çš„ <strong>çƒ­çˆ±</strong><br><strong>æ‘„å½±æ˜¯ä¸€ç§åˆ©ç”¨å…‰çš„è‰ºæœ¯ï¼Œä¿æŒçƒ­çˆ±</strong></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¿ƒå¿ƒå¿µå¿µçš„å®šç„¦å¤´ç»ˆäºåˆ°è´§äº†~ è¿™æ˜¯å…¥å‘æ‘„å½±ä»¥æ¥çš„ç¬¬äºŒé¢—é•œå¤´ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="æ‘„å½±" scheme="https://zhangone.site/categories/%E6%91%84%E5%BD%B1/"/>
    
    
    <category term="é•œå¤´" scheme="https://zhangone.site/tags/%E9%95%9C%E5%A4%B4/"/>
    
  </entry>
  
  <entry>
    <title>CodeMirror - ä½¿ç”¨</title>
    <link href="https://zhangone.site/posts/3f01d2c5/"/>
    <id>https://zhangone.site/posts/3f01d2c5/</id>
    <published>2021-12-01T13:27:42.000Z</published>
    <updated>2021-12-28T12:09:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CodeMirror"><a href="#CodeMirror" class="headerlink" title="CodeMirror"></a>CodeMirror</h2><h3 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h3><p>CodeMirror æ˜¯ä¸€ä¸ªç”¨ JavaScript ä¸ºæµè§ˆå™¨å®ç°çš„å¤šåŠŸèƒ½æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å®ƒä¸“é—¨ç”¨äºç¼–è¾‘ä»£ç ï¼Œå¹¶å¸¦æœ‰ 100 å¤šç§è¯­è¨€æ¨¡å¼å’Œå„ç§å®ç°æ›´é«˜çº§ç¼–è¾‘åŠŸèƒ½çš„æ’ä»¶ã€‚æ¯ç§è¯­è¨€éƒ½å¸¦æœ‰åŠŸèƒ½é½å…¨çš„ä»£ç å’Œè¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œä»¥å¸®åŠ©é˜…è¯»å’Œç¼–è¾‘å¤æ‚çš„ä»£ç ã€‚</p><p>æ”¯æŒåˆ‡æ¢ä¸»é¢˜ã€è¯­æ³•é«˜äº®ã€ä»£ç æŠ˜å ã€‚</p><p>å¤šç§å·²æœ‰çš„è¯­è¨€æ¨¡å¼å¼€ç®±å³ç”¨ã€‚ï¼ˆå¯è‡ªå·±ç¼–å†™æ–°çš„è¯­è¨€æ¨¡å¼ï¼‰</p><p>â€¦â€¦</p><span id="more"></span><h3 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>CodeMirror<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ ¸å¿ƒæ ·å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">            <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">href</span>=<span class="string">&quot;../../../node_modules/codemirror/lib/codemirror.css&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸»é¢˜æ ·å¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">            <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">href</span>=<span class="string">&quot;../../../node_modules//codemirror/theme/ambiance.css&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ ¸å¿ƒè„šæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../../node_modules/codemirror/lib/codemirror.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¯­è¨€æ¨¡å¼è„šæœ¬ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../../node_modules/codemirror/mode/javascript/javascript.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script src=&quot;../../../node_modules/codemirror/mode/clike/clike.js&quot;&gt;&lt;/script&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layout&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- &lt;textarea name=&quot;&quot; id=&quot;myTextArea&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;function myScript()&#123;return 100;&#125;&lt;/textarea&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="property">body</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> editorConfig = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ç¼–è¾‘å™¨çš„èµ·å§‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">value</span>: <span class="string">&#x27;function myScript()&#123;return 100;&#125;\n&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ç¼–è¾‘è¯­è¨€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">mode</span>: <span class="string">&#x27;javascript&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// mode: &#x27;text/x-java&#x27;, // x-: csrc c++src java</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ä¸»é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">theme</span>: <span class="string">&#x27;ambiance&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// tabç¼©è¿›å®½åº¦</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">tabSize</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ˜¾ç¤ºè¡Œæ•°</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">lineNumbers</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> myCodeMirror = <span class="title class_">CodeMirror</span>(container, editorConfig);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(myCodeMirror.<span class="title function_">getValue</span>(), <span class="string">&#x27;è·å–value&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è®¾ç½®value</span></span></span><br><span class="line"><span class="language-javascript">                myCodeMirror.<span class="title function_">setValue</span>(<span class="string">&#x27;var message = &quot;hello world&quot;&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             * <span class="doctag">@param</span> instance: CodeMirrorå®ä¾‹</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             * <span class="doctag">@param</span> changeObj: æ˜¯ä¸€ä¸ª&#123;from, to, text, removed, origin&#125;æœ‰å…³æ‰€å‘ç”Ÿä½œä¸ºç¬¬äºŒä¸ªå‚æ•°çš„å˜åŒ–åŒ…å«å¯¹è±¡çš„ä¿¡æ¯ã€‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             *                   from å’Œ to æ˜¯æ›´æ”¹å¼€å§‹å’Œç»“æŸçš„ä½ç½®ï¼ˆåœ¨æ›´æ”¹å‰çš„åæ ‡ç³»ä¸­ï¼‰ä¾‹å¦‚ï¼Œ&#123;ch:0, line:18&#125;ã€‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             *                   text æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¡¨ç¤ºæ›¿æ¢æ›´æ”¹èŒƒå›´çš„æ–‡æœ¬ï¼ˆæŒ‰è¡Œæ‹†åˆ†ï¼‰ã€‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             *                   removed æ˜¯è¢«æ›´æ”¹ä¹‹å‰çš„å†…å®¹ï¼Œå®ƒè¢«æ­¤æ›´æ”¹è¦†ç›–ã€‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             *                   æ­¤äº‹ä»¶åœ¨æ“ä½œç»“æŸä¹‹å‰ã€DOM æ›´æ–°å‘ç”Ÿä¹‹å‰è§¦å‘ã€‚</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">             */</span></span></span><br><span class="line"><span class="language-javascript">            myCodeMirror.<span class="title function_">on</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span> (<span class="params">instance, changeObj</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(changeObj, <span class="string">&#x27;changeObj&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- &lt;script&gt;</span></span><br><span class="line"><span class="comment">            // æ¥å—ä¸€ä¸ª textarea DOM èŠ‚ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¯é€‰çš„é…ç½®å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</span></span><br><span class="line"><span class="comment">            // å®ƒå°†ç”¨ CodeMirror å®ä¾‹æ›¿æ¢ textareaï¼Œå¹¶è¿æ¥è¯¥ textarea çš„è¡¨å•ï¼ˆå¦‚æœæœ‰ï¼‰ä»¥ç¡®ä¿åœ¨æäº¤è¡¨å•æ—¶å°†ç¼–è¾‘å™¨å†…å®¹æ”¾å…¥ textareaã€‚</span></span><br><span class="line"><span class="comment">            // textarea ä¸­çš„æ–‡æœ¬å°†ä¸ºç¼–è¾‘å™¨æä¾›å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">            var myTextArea = document.getElementById(&#x27;myTextArea&#x27;);</span></span><br><span class="line"><span class="comment">            var editorConfig = &#123;</span></span><br><span class="line"><span class="comment">                // ç¼–è¾‘è¯­è¨€</span></span><br><span class="line"><span class="comment">                mode: &#x27;javascript&#x27;,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                // ä¸»é¢˜</span></span><br><span class="line"><span class="comment">                theme: &#x27;ambiance&#x27;,</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">                // tabç¼©è¿›å®½åº¦</span></span><br><span class="line"><span class="comment">                tabSize: 2,</span></span><br><span class="line"><span class="comment">                </span></span><br><span class="line"><span class="comment">                // æ˜¾ç¤ºè¡Œæ•°</span></span><br><span class="line"><span class="comment">                lineNumbers: true,</span></span><br><span class="line"><span class="comment">            &#125;;</span></span><br><span class="line"><span class="comment">            var myCodeMirror = CodeMirror.fromTextArea(myTextArea, editorConfig);</span></span><br><span class="line"><span class="comment">        &lt;/script&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="React-CodeMirror2"><a href="#React-CodeMirror2" class="headerlink" title="React-CodeMirror2"></a>React-CodeMirror2</h2><p><strong>Github</strong>: <a href="https://github.com/scniro/react-codemirror2">https://github.com/scniro/react-codemirror2</a></p><p><strong>Npm</strong>: <a href="https://www.npmjs.com/package/react-codemirror2">https://www.npmjs.com/package/react-codemirror2</a></p><p><strong>åŸºäºcodemirror</strong>äºŒæ¬¡å°è£…ï¼Œé›†æˆä¸º<strong>react</strong>ä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼Œåœ¨<strong>react</strong>ä¸­ä½¿ç”¨</p><p><strong>å®‰è£…</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install react-codemirror2 codemirror --save</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * CodeMirror Reactç‰ˆ -- https://github.com/scniro/react-codemirror2    https://www.npmjs.com/package/react-codemirror2</span></span><br><span class="line"><span class="comment"> * å—æ§   Controlled</span></span><br><span class="line"><span class="comment"> * ä¸å—æ§ UnControlled</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useCallback, useEffect, useRef, useMemo, memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">PropTypes</span> <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controlled</span> <span class="keyword">as</span> <span class="title class_">CodeMirror</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-codemirror2&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/lib/codemirror.css&#x27;</span>; <span class="comment">// ç¼–è¾‘å™¨æ ¸å¿ƒæ ·å¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/lib/codemirror.js&#x27;</span>; <span class="comment">// ç¼–è¾‘å™¨æ ¸å¿ƒjs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç æŠ˜è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/fold/foldgutter.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/fold/foldcode.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/fold/foldgutter.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/fold/brace-fold.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/fold/comment-fold.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±å¼€å¯</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/display/fullscreen.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/display/fullscreen.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…‰æ ‡æ‰€å¤„è¡Œé«˜äº®</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/addon/selection/active-line&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯­è¨€æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/mode/sql/sql.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;codemirror/mode/clike/clike.js&#x27;</span>; <span class="comment">// ç±»C ï¼ˆc \ c++ \ java \ ...ï¼‰</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æš‚æ”¯æŒä¸‰ç§è¯­è¨€</span></span><br><span class="line"><span class="keyword">const</span> supportLanguage = [<span class="string">&#x27;sql&#x27;</span>, <span class="string">&#x27;mysql&#x27;</span>, <span class="string">&#x27;java&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; ç›®å‰æš‚æ”¯æŒ sql java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CodeEditor</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">    className,</span></span><br><span class="line"><span class="params">    onChange,</span></span><br><span class="line"><span class="params">    value,</span></span><br><span class="line"><span class="params">    width,</span></span><br><span class="line"><span class="params">    height,</span></span><br><span class="line"><span class="params">    placeholder,</span></span><br><span class="line"><span class="params">    language,</span></span><br><span class="line"><span class="params">    fullScreen,</span></span><br><span class="line"><span class="params">    onExitFullScreen,</span></span><br><span class="line"><span class="params">&#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> editorContainerRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: é€€å‡ºå…¨å±</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@default</span> Esc keyCode === 27</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">KeyboardEvent</span>&#125; <span class="variable">e</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> exitFullScreen = <span class="title function_">useCallback</span>(</span><br><span class="line">        <span class="function">(<span class="params">&#123; keyCode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (keyCode === <span class="number">27</span>) <span class="title function_">onExitFullScreen</span>();</span><br><span class="line">        &#125;,</span><br><span class="line">        [onExitFullScreen]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> containerElement = editorContainerRef.<span class="property">current</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fullScreen &amp;&amp; containerElement) &#123;</span><br><span class="line">            containerElement.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, exitFullScreen, <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        containerElement.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, exitFullScreen);</span><br><span class="line">    &#125;, [fullScreen]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ç¼–è¾‘å™¨åˆå§‹æŒ‚è½½å®Œæ¯•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> editorDidMount = <span class="title function_">useCallback</span>(<span class="function"><span class="params">editor</span> =&gt;</span> &#123;</span><br><span class="line">        editor.<span class="title function_">on</span>(<span class="string">&#x27;inputRead&#x27;</span>, <span class="function"><span class="params">cm</span> =&gt;</span> &#123;</span><br><span class="line">            cm.<span class="title function_">execCommand</span>(<span class="string">&#x27;autocomplete&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, []);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>: ç¼–è¾‘å™¨è¾“å…¥changeäº‹ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; editor ç¼–è¾‘å™¨æ‰€æœ‰ä¿¡æ¯ï¼ˆCodeMirrorå®ä¾‹ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; data å½“å‰æ•°æ®ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; value å½“å‰å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> onInnerChange = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">editor, data, value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">onChange</span>(value);</span><br><span class="line">    &#125;, []);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mode = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (supportLanguage.<span class="title function_">includes</span>(language.<span class="title function_">toLowerCase</span>())) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">`text/x-<span class="subst">$&#123;language&#125;</span>`</span>,</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;, [language]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> editorConfig = <span class="title function_">useMemo</span>(</span><br><span class="line">        <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">            <span class="comment">// è¯­è¨€æ¨¡å¼</span></span><br><span class="line">            mode,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä¸»é¢˜</span></span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;blackboard&#x27;</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">            <span class="attr">lineNumbers</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è‡ªåŠ¨è·å–ç„¦ç‚¹</span></span><br><span class="line">            <span class="attr">autofocus</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…‰æ ‡æ‰€å¤„è¡Œä»£ç é«˜äº®</span></span><br><span class="line">            <span class="attr">styleActiveLine</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">            <span class="attr">lineWrapping</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä»£ç æŠ˜è¡Œ</span></span><br><span class="line">            <span class="attr">foldGutter</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">gutters</span>: [<span class="string">&#x27;CodeMirror-linenumbers&#x27;</span>, <span class="string">&#x27;CodeMirror-foldgutter&#x27;</span>],</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ä»£ç æç¤ºè¡¥å…¨ï¼ˆæŒ‰ctrl+ç©ºæ ¼é”®å³å¯è°ƒå‡ºï¼Œå¯è‡ªå®šä¹‰é…ç½®å¿«æ·é”®</span></span><br><span class="line">            <span class="attr">extraKeys</span>: &#123; <span class="title class_">Ctrl</span>: <span class="string">&#x27;autocomplete&#x27;</span> &#125;,</span><br><span class="line">            <span class="attr">hintOptions</span>: &#123; <span class="attr">completeSingle</span>: <span class="literal">false</span> &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å…¨å±</span></span><br><span class="line">            fullScreen,</span><br><span class="line">        &#125;),</span><br><span class="line">        [mode, fullScreen]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width</span>, <span class="attr">height</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">ref</span>=<span class="string">&#123;editorContainerRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">code-editor-container</span> $&#123;<span class="attr">className</span> || &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">CodeMirror</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">options</span>=<span class="string">&#123;editorConfig&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">value</span>=<span class="string">&#123;value</span> ?? <span class="attr">placeholder</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onBeforeChange</span>=<span class="string">&#123;onInnerChange&#125;</span> // <span class="attr">è¿™ä¸ªäº‹ä»¶æœ€å¥½åŠ ä¸Š</span>ï¼Œ<span class="attr">å¯ä»¥æ˜¯ç©ºå‡½æ•°</span>ã€‚<span class="attr">å¦åˆ™åœ¨ä¸€äº›æƒ…å†µä¸‹</span>ï¼Œ<span class="attr">ç¬¬äºŒæ¬¡æ‰“å¼€å°±ä¼šæœ‰æœªçŸ¥çš„é—®é¢˜</span>ï¼ˆ<span class="attr">æŠ¥é”™</span>ï¼‰</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">editorDidMount</span>=<span class="string">&#123;editorDidMount&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">CodeEditor</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line">    <span class="attr">className</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>,</span><br><span class="line">    <span class="attr">language</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>,</span><br><span class="line">    <span class="attr">fullScreen</span>: <span class="title class_">PropTypes</span>.<span class="property">bool</span>,</span><br><span class="line">    <span class="attr">onChange</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>.<span class="property">isRequired</span>,</span><br><span class="line">    <span class="attr">onExitFullScreen</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>.<span class="property">isRequired</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">CodeEditor</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line">    <span class="attr">onChange</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">    <span class="attr">onExitFullScreen</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span><br><span class="line">    <span class="attr">language</span>: <span class="string">&#x27;java&#x27;</span>,</span><br><span class="line">    <span class="attr">fullScreen</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">className</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">CodeEditor</span>);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/library/image-20211206210053477.png"></p><p>â€¦â€¦</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;CodeMirror&quot;&gt;&lt;a href=&quot;#CodeMirror&quot; class=&quot;headerlink&quot; title=&quot;CodeMirror&quot;&gt;&lt;/a&gt;CodeMirror&lt;/h2&gt;&lt;h3 id=&quot;ç®€å•ä»‹ç»&quot;&gt;&lt;a href=&quot;#ç®€å•ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•ä»‹ç»&quot;&gt;&lt;/a&gt;ç®€å•ä»‹ç»&lt;/h3&gt;&lt;p&gt;CodeMirror æ˜¯ä¸€ä¸ªç”¨ JavaScript ä¸ºæµè§ˆå™¨å®ç°çš„å¤šåŠŸèƒ½æ–‡æœ¬ç¼–è¾‘å™¨ã€‚å®ƒä¸“é—¨ç”¨äºç¼–è¾‘ä»£ç ï¼Œå¹¶å¸¦æœ‰ 100 å¤šç§è¯­è¨€æ¨¡å¼å’Œå„ç§å®ç°æ›´é«˜çº§ç¼–è¾‘åŠŸèƒ½çš„æ’ä»¶ã€‚æ¯ç§è¯­è¨€éƒ½å¸¦æœ‰åŠŸèƒ½é½å…¨çš„ä»£ç å’Œè¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œä»¥å¸®åŠ©é˜…è¯»å’Œç¼–è¾‘å¤æ‚çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;æ”¯æŒåˆ‡æ¢ä¸»é¢˜ã€è¯­æ³•é«˜äº®ã€ä»£ç æŠ˜å ã€‚&lt;/p&gt;
&lt;p&gt;å¤šç§å·²æœ‰çš„è¯­è¨€æ¨¡å¼å¼€ç®±å³ç”¨ã€‚ï¼ˆå¯è‡ªå·±ç¼–å†™æ–°çš„è¯­è¨€æ¨¡å¼ï¼‰&lt;/p&gt;
&lt;p&gt;â€¦â€¦&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="library" scheme="https://zhangone.site/tags/library/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript - æ¨¡å—çš„å¾ªç¯åŠ è½½</title>
    <link href="https://zhangone.site/posts/41c7d5fc/"/>
    <id>https://zhangone.site/posts/41c7d5fc/</id>
    <published>2021-08-31T07:27:42.000Z</published>
    <updated>2022-03-12T12:17:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½?"></a>ä¸€ã€ä»€ä¹ˆæ˜¯<strong>å¾ªç¯åŠ è½½</strong>?</h2><p><img src="https://cdn.zhangone.site/PhotoBed/img/social/bg2015110201.jpg"></p><p><strong>â€œå¾ªç¯åŠ è½½â€ï¼ˆcircular dependencyï¼‰</strong> æŒ‡çš„æ˜¯ï¼šå¦‚<code>a</code>è„šæœ¬æ‰§è¡Œä¸­ä¾èµ–(å¯¼å…¥)äº†<code>b</code>è„šæœ¬ï¼Œè€Œ<code>b</code>è„šæœ¬æ‰§è¡Œä¸­åˆä¾èµ–äº†<code>a</code>è„šæœ¬</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="built_in">require</span>(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="built_in">require</span>(<span class="string">&#x27;a&#x27;</span>);</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<strong>å¾ªç¯åŠ è½½</strong> è¡¨ç¤ºå­˜åœ¨ <strong>å¼ºè€¦åˆ</strong> ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œå¯èƒ½ä¼šå¯¼è‡´é€’å½’å¼•ç”¨æ— é™åŠ è½½ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸ç»§ç»­è¿è¡Œã€‚</p></blockquote><span id="more"></span><h2 id="äºŒã€CommonJS-åŠ è½½è§„èŒƒ"><a href="#äºŒã€CommonJS-åŠ è½½è§„èŒƒ" class="headerlink" title="äºŒã€CommonJS åŠ è½½è§„èŒƒ"></a>äºŒã€CommonJS åŠ è½½è§„èŒƒ</h2><h3 id="1-CommonJSæ¨¡å—çš„åŠ è½½åŸç†"><a href="#1-CommonJSæ¨¡å—çš„åŠ è½½åŸç†" class="headerlink" title="1. CommonJSæ¨¡å—çš„åŠ è½½åŸç†"></a>1. CommonJSæ¨¡å—çš„åŠ è½½åŸç†</h3><p>CommonJSçš„ä¸€ä¸ªæ¨¡å—ï¼Œå°±æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ã€‚<code>require</code>å‘½ä»¤ç¬¬ä¸€æ¬¡åŠ è½½è¯¥è„šæœ¬ï¼Œå°±ä¼šæ‰§è¡Œæ•´ä¸ªè„šæœ¬ï¼Œç„¶ååœ¨å†…å­˜ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;...&#x27;</span>,    <span class="comment">// æ¨¡å—å</span></span><br><span class="line">  <span class="attr">exports</span>: &#123; ... &#125;,<span class="comment">// æ¨¡å—è¾“å‡ºçš„å„ä¸ªæ¥å£(å³å¯¼å‡ºçš„å±æ€§)</span></span><br><span class="line">  <span class="attr">loaded</span>: <span class="literal">true</span>,<span class="comment">// å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„è„šæœ¬æ˜¯å¦æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">  ... <span class="comment">// æ›´å¤šå±æ€§...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ <code>loaded</code> ä¸ºtrueæ—¶ï¼Œåˆ™è¡¨ç¤ºæ­¤æ¨¡å—å·²åŠ è½½å®Œæˆï¼Œè¿›å…¥æ¨¡å—ç¼“å­˜åŒºã€‚ä»¥åéœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šåˆ°<code>exports</code>å±æ€§ä¸Šé¢å–å€¼ã€‚å³ä½¿å†æ¬¡æ‰§è¡Œ<code>require</code>å‘½ä»¤ï¼Œä¹Ÿä¸ä¼šå†æ¬¡æ‰§è¡Œè¯¥æ¨¡å—ï¼Œè€Œæ˜¯åˆ°ç¼“å­˜ä¹‹ä¸­å–å€¼ã€‚</p><p><strong>CommonJS è¾“å‡ºå€¼çš„æ‹·è´</strong></p><p>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´(åŸå§‹å€¼çš„æ‹·è´)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">foo</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">foo</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>).<span class="property">foo</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    foo = <span class="number">2</span>;</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">foo</span>: foo,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ a.js</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œb æ¨¡å—åŠ è½½ä»¥åï¼Œå®ƒçš„å†…éƒ¨ <code>foo</code> å˜åŒ–å°±å½±å“ä¸åˆ°è¾“å‡ºçš„ <code>exports.foo</code> äº†ã€‚è¿™æ˜¯å› ä¸º <code>foo</code> æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦åœ¨ CommonJS ä¸­åŠ¨æ€è·å–æ¨¡å—ä¸­çš„å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦å€ŸåŠ©äºå‡½æ•°å»¶æ—¶æ‰§è¡Œçš„ç‰¹æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="title function_">foo</span>());</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="title function_">foo</span>());</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>).<span class="title function_">foo</span>());</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    foo = <span class="number">2</span>;</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> foo;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ a.js</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">2</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">2</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹ï¼š</p><ol><li>CommonJS è¢«é‡å¤å¼•å…¥çš„æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œä¼šç›´æ¥è·å–åˆ°è¯¥æ¨¡å—æš´éœ²å‡ºçš„ <code>module.exports</code> å¯¹è±¡</li><li>å¦‚æœè¦å®æ—¶è·å–æ¨¡å—ä¸­çš„æœ€æ–°å€¼ï¼Œåˆ™éœ€è¦ç”¨å…¶ä»–çš„æ–¹å¼å»æ›´æ–° <code>module.exports</code> ä¸Šçš„å€¼</li><li>å¦‚æœ <code>module.exports</code> æš´éœ²å‡ºçš„å±æ€§éƒ½æ˜¯ <strong>å¼•ç”¨ç±»å‹</strong> çš„å€¼ã€‚é‚£ä¹ˆå°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº†</li></ol><h3 id="2-CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½"><a href="#2-CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½" class="headerlink" title="2. CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½"></a>2. CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½</h3><p>CommonJSçš„é‡è¦ç‰¹æ€§æ˜¯è¾¹æ‰§è¡Œä»£ç ï¼Œè¾¹åŠ è½½(åŒæ­¥)<code>require</code>å¯¼å…¥æ¨¡å—ã€‚å³è„šæœ¬ä»£ç åœ¨<code>require</code>çš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚<strong>CommonJSçš„åšæ³•æ˜¯ï¼Œä¸€æ—¦å‡ºç°æŸä¸ªæ¨¡å—è¢«â€å¾ªç¯åŠ è½½â€ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚</strong></p><p>è¯¦ç»†å¯æŸ¥çœ‹ <a href="https://nodejs.org/api/modules.html#modules_cycles">å®˜æ–¹æ–‡æ¡£</a> é‡Œé¢çš„ä¾‹å­ã€‚</p><p>ä¸‹é¢å°†å‚ç…§æ–‡æ¡£ä¸­çš„ä¾‹å­ï¼Œè¯•ä¸€è¯•ã€‚</p><p>è„šæœ¬æ–‡ä»¶<code>a.js</code>ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">done</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> B = <span class="built_in">require</span>(<span class="string">&#x27;./b.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ doneå€¼ä¸ºï¼š&#x27;</span>, B.<span class="property">done</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">done</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">done2</span> = <span class="string">&#x27;done2&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è„šæœ¬æ–‡ä»¶<code>b.js</code>ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = <span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">done</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ doneå€¼ä¸ºï¼š&#x27;</span>, A.<span class="property">done</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š&#x27;</span>, A.<span class="property">done2</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>a.js</code> :</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ <span class="keyword">done</span>å€¼ä¸ºï¼š <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š undefined</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ <span class="keyword">done</span>å€¼ä¸ºï¼š <span class="literal">true</span></span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>a</code>è„šæœ¬ä¸­æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œç«‹å³å°±å»åŠ è½½æ‰§è¡Œäº†<code>b</code>è„šæœ¬ã€‚åœ¨<code>b</code>è„šæœ¬ä¸­åˆå»è¯»å–äº†<code>a</code>è„šæœ¬ï¼Œä½†æ­¤æ—¶<code>a</code>è„šæœ¬åªæ‰§è¡Œåˆ°äº†ç¬¬äºŒè¡Œã€‚æ‰€ä»¥<code>b</code>è„šæœ¬ä¸­å°±åªèƒ½å¯¼å…¥<code>a</code>è„šæœ¬å·²æ‰§è¡Œçš„éƒ¨åˆ†ã€‚æ•…æ­¤è¾“å‡ºAæ¨¡å—çš„<strong>done</strong>å€¼ä¸º<strong>false</strong>ï¼Œè€Œ<strong>done2</strong>æ˜¯<strong>undefined</strong>ã€‚ å½“<code>b</code>è„šæœ¬æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œ<code>a</code>è„šæœ¬æ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚</p><p>æ¥ç€å†™ä¸€ä¸ªè„šæœ¬<code>main.js</code>ï¼ŒéªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚</p><p>è„šæœ¬æ–‡ä»¶<code>main.js</code>ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> A = <span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> B = <span class="built_in">require</span>(<span class="string">&#x27;./b.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A.done:&#x27;</span>, A.<span class="property">done</span>);      </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A.done2:&#x27;</span>, A.<span class="property">done2</span>);       </span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B.done:&#x27;</span>, B.<span class="property">done</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>main.js</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">node main.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ <span class="keyword">done</span>å€¼ä¸ºï¼š <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨b.jsä¸­è¾“å‡º a.jså¯¼å‡ºçš„ done2å€¼ä¸ºï¼š undefined</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">åœ¨a.jsä¸­è¾“å‡º b.js å¯¼å‡ºçš„ <span class="keyword">done</span>å€¼ä¸ºï¼š <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">A.<span class="keyword">done</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">A.done2: done2</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">B.<span class="keyword">done</span>: <span class="literal">true</span></span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç è¯æ˜äº†ä¸¤ä»¶äº‹:</p><ul><li><p>åœ¨<code>b.js</code>ä¹‹ä¸­ï¼Œ<code>a.js</code>æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåªæ‰§è¡Œäº†éƒ¨åˆ†ã€‚</p></li><li><p><code>main.js</code>æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œ<code>b.js</code>ï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„<code>b.js</code>çš„æ‰§è¡Œç»“æœã€‚å³ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">done</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä¸‰ã€ES6æ¨¡å—çš„å¾ªç¯åŠ è½½"><a href="#ä¸‰ã€ES6æ¨¡å—çš„å¾ªç¯åŠ è½½" class="headerlink" title="ä¸‰ã€ES6æ¨¡å—çš„å¾ªç¯åŠ è½½"></a>ä¸‰ã€ES6æ¨¡å—çš„å¾ªç¯åŠ è½½</h2><h3 id="1-babel-node"><a href="#1-babel-node" class="headerlink" title="1. babel-node"></a>1. babel-node</h3><p>æä¾›ä¸€ä¸ªè‡ªå·±åœ¨æœ¬åœ°è°ƒè¯• js ä»£ç æ—¶å¸¸ä½¿ç”¨çš„æ–¹å¼ï¼šä½¿ç”¨ <strong>babel-node</strong> å‘½ä»¤ï¼Œæ¥è¿è¡Œå«æœ‰ <code>import/export</code> è¯­æ³•çš„ js ä»£ç ã€‚</p><blockquote><p>æ³¨æ„ï¼šbabel-node ä¸èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒï¼å› ä¸º babel-node ä¼šåŠ è½½æ›´å¤šèµ„æºå’Œæ¨¡å—ï¼Œä½¿å¾—è¿è¡Œç¯å¢ƒå˜ã€Œé‡ã€ã€‚</p></blockquote><p>babel @7.x ~</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm i -g @babel/core @babel/node</span></span><br></pre></td></tr></table></figure><p>é¡¹ç›®æ ¹ç›®å½•ä¸­ä¸‹æ‰§è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">npm i @babel/preset-env â€“save-dev</span></span><br></pre></td></tr></table></figure><p><strong>.babelrc</strong> æ–‡ä»¶é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;presets&quot;</span>: [<span class="string">&quot;@babel/preset-env&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ES6æ¨¡å—çš„åŠ è½½æœºåˆ¶"><a href="#2-ES6æ¨¡å—çš„åŠ è½½æœºåˆ¶" class="headerlink" title="2. ES6æ¨¡å—çš„åŠ è½½æœºåˆ¶"></a>2. ES6æ¨¡å—çš„åŠ è½½æœºåˆ¶</h3><p>ES6 æ¨¡å—è·Ÿ CommonJS æ¨¡å—çš„ä¸åŒï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li>ES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼å¾—å¼•ç”¨ï¼Œè¾“å‡ºæ¥å£åŠ¨æ€ç»‘å®šã€‚è€Œ CommonJS è¾“å‡ºçš„åˆ™æ˜¯å€¼å¾—æ‹·è´</li><li>ES6 æ¨¡å—ç¼–è¯‘æ—¶æ‰§è¡Œï¼Œè€Œ CommonJS æ¨¡å—æ€»æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡ŒåŠ è½½</li></ol><p>ES6æ¨¡å—æœºåˆ¶ï¼šåœ¨é‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤<code>import</code>æ—¶ï¼Œä¸ä¼šå»æ‰§è¡Œæ¨¡å—ï¼Œè€Œæ˜¯åªç”Ÿæˆä¸€ä¸ªå¼•ç”¨ã€‚ç­‰åˆ°çœŸçš„éœ€è¦ç”¨åˆ°æ—¶ï¼Œå†åˆ°æ¨¡å—é‡Œé¢å»å–å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">&#x27;./b&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(foo);</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">&#x27;./b&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">&#123; foo &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(foo);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    foo = <span class="number">2</span>;</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤ï¼šbabel-node a.js</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">babel-node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">2</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">2</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥å‡æƒ³ä¸º ES6æ¨¡å—æœºåˆ¶æŠŠ â€œæ•´ä¸ªæ¨¡å—å½“ä½œäº†ä¸€ä¸ªå¼•ç”¨é—­åŒ…â€</p><p><strong>ES6 é™æ€ç¼–è¯‘</strong></p><ol><li><code>import</code> å‘½ä»¤ä¼šè¢« JavaScript å¼•æ“é™æ€åˆ†æï¼Œä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œã€‚</li><li><code>export</code> å‘½ä»¤ä¼šæœ‰å˜é‡å£°æ˜æå‰çš„æ•ˆæœã€‚</li></ol><p>å…³äº <code>export</code> å˜é‡å£°æ˜æå‡:</p><p>æ­£å¸¸çš„å¼•å…¥æ¨¡å—æ˜¯æ²¡åŠæ³•çœ‹å‡ºå˜é‡å£°æ˜æå‡çš„ç‰¹æ€§ï¼Œéœ€è¦é€šè¿‡å¾ªç¯ä¾èµ–åŠ è½½æ‰èƒ½çœ‹å‡ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">&#x27;./b&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a.js&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bar = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">bar2</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bar2&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">bar3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;bar3&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> a <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">babel-node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">&#123; bar3: [Function: bar3], bar: undefined, bar2: undefined &#125;</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">a.js</span></span><br></pre></td></tr></table></figure><p><code>export</code> å¯¼å‡ºæå‡ç±»ä¼¼äº <code>es5</code> æœºåˆ¶ä¸­çš„å˜é‡æå‡æœºåˆ¶ã€‚</p><p>ç”±<code>function</code>å£°æ˜çš„å‡½æ•°ä¼šåœ¨æå‡å‘½åçš„åŒæ—¶ä¸€å¹¶èµ‹å€¼ (es5æœºåˆ¶)</p><h3 id="3-ES6-æ¨¡å—å¾ªç¯ä¾èµ–"><a href="#3-ES6-æ¨¡å—å¾ªç¯ä¾èµ–" class="headerlink" title="3. ES6 æ¨¡å—å¾ªç¯ä¾èµ–"></a>3. <strong>ES6 æ¨¡å—å¾ªç¯ä¾èµ–</strong></h3><p>è·Ÿ CommonJS æ¨¡å—ä¸€æ ·ï¼ŒES6 ä¸ä¼šå†å»æ‰§è¡Œé‡å¤åŠ è½½çš„æ¨¡å—ï¼Œåˆç”±äº ES6 åŠ¨æ€è¾“å‡ºç»‘å®šçš„ç‰¹æ€§ï¼Œèƒ½ä¿è¯ ES6 åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½è·å–å…¶å®ƒæ¨¡å—å½“å‰çš„æœ€æ–°å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a starting&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> &#123;foo&#125; <span class="keyword">from</span> <span class="string">&#x27;./b&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;in b, foo:&#x27;</span>, foo);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bar = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a done&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b starting&#x27;</span>);</span><br><span class="line"><span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">&#x27;./a&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> foo = <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;in a, bar:&#x27;</span>, bar);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;in a, setTimeout bar:&#x27;</span>, bar);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b done&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ a.js</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">babel-node a.js</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="keyword">in</span> a, bar: undefined</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">b <span class="keyword">done</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">a starting</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="keyword">in</span> b, foo: foo</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">a <span class="keyword">done</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="keyword">in</span> a, setTimeout bar: 2</span></span><br></pre></td></tr></table></figure><p>ES6æ¨¡å—ä¸ä¼šç¼“å­˜è¿è¡Œç»“æœï¼Œè€Œæ˜¯åŠ¨æ€åœ°å»è¢«åŠ è½½çš„æ¨¡å—å–å€¼ï¼Œä»¥åŠå˜é‡æ€»æ˜¯ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚</p><p>è¿™å¯¼è‡´ES6å¤„ç†â€å¾ªç¯åŠ è½½â€ä¸CommonJSæœ‰æœ¬è´¨çš„ä¸åŒã€‚<strong>ES6æ ¹æœ¬ä¸ä¼šå…³å¿ƒæ˜¯å¦å‘ç”Ÿäº†â€å¾ªç¯åŠ è½½â€ï¼Œåªæ˜¯ç”Ÿæˆä¸€ä¸ªæŒ‡å‘è¢«åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±ä¿è¯ï¼ŒçœŸæ­£å–å€¼çš„æ—¶å€™èƒ½å¤Ÿå–åˆ°å€¼ã€‚</strong></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/social/image-20210518202854464.png"></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ä»€ä¹ˆæ˜¯å¾ªç¯åŠ è½½?&quot;&gt;&lt;/a&gt;ä¸€ã€ä»€ä¹ˆæ˜¯&lt;strong&gt;å¾ªç¯åŠ è½½&lt;/strong&gt;?&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.zhangone.site/PhotoBed/img/social/bg2015110201.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œå¾ªç¯åŠ è½½â€ï¼ˆcircular dependencyï¼‰&lt;/strong&gt; æŒ‡çš„æ˜¯ï¼šå¦‚&lt;code&gt;a&lt;/code&gt;è„šæœ¬æ‰§è¡Œä¸­ä¾èµ–(å¯¼å…¥)äº†&lt;code&gt;b&lt;/code&gt;è„šæœ¬ï¼Œè€Œ&lt;code&gt;b&lt;/code&gt;è„šæœ¬æ‰§è¡Œä¸­åˆä¾èµ–äº†&lt;code&gt;a&lt;/code&gt;è„šæœ¬&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// a.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; b = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;b&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// b.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;a&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ&lt;strong&gt;å¾ªç¯åŠ è½½&lt;/strong&gt; è¡¨ç¤ºå­˜åœ¨ &lt;strong&gt;å¼ºè€¦åˆ&lt;/strong&gt; ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œå¯èƒ½ä¼šå¯¼è‡´é€’å½’å¼•ç”¨æ— é™åŠ è½½ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸ç»§ç»­è¿è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>react-reduxåŸç†å®ç°</title>
    <link href="https://zhangone.site/posts/2f1230a5/"/>
    <id>https://zhangone.site/posts/2f1230a5/</id>
    <published>2020-09-11T17:30:14.000Z</published>
    <updated>2020-09-11T17:30:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆç®€å•äº†è§£ä¸€ä¸‹ <code>react-redux</code></p><h3 id="ä¸€ã€ç»„ä»¶åˆ†ç±»"><a href="#ä¸€ã€ç»„ä»¶åˆ†ç±»" class="headerlink" title="ä¸€ã€ç»„ä»¶åˆ†ç±»"></a>ä¸€ã€ç»„ä»¶åˆ†ç±»</h3><p><code>React-Redux</code> å°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼š<strong>UI ç»„ä»¶</strong>ï¼ˆpresentational componentï¼‰å’Œ<strong>å®¹å™¨ç»„ä»¶</strong>ï¼ˆcontainer componentï¼‰ã€‚</p><ul><li><h4 id="UI-ç»„ä»¶ï¼š"><a href="#UI-ç»„ä»¶ï¼š" class="headerlink" title="UI ç»„ä»¶ï¼š"></a>UI ç»„ä»¶ï¼š</h4><ul><li>åªè´Ÿè´£ <code>UI</code> çš„å‘ˆç°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘</li><li>æ²¡æœ‰çŠ¶æ€ï¼ˆå³ä¸ä½¿ç”¨<code>this.state</code>è¿™ä¸ªå˜é‡ï¼‰</li><li>æ‰€æœ‰æ•°æ®éƒ½ç”±å‚æ•°ï¼ˆ<code>this.props</code>ï¼‰æä¾›</li><li>ä¸ä½¿ç”¨ä»»ä½• <code>Redux</code> çš„ <code>API</code></li></ul></li><li><h4 id="å®¹å™¨ç»„ä»¶ï¼š"><a href="#å®¹å™¨ç»„ä»¶ï¼š" class="headerlink" title="å®¹å™¨ç»„ä»¶ï¼š"></a>å®¹å™¨ç»„ä»¶ï¼š</h4><ul><li>è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£ <code>UI</code> çš„å‘ˆç°</li><li>å¸¦æœ‰å†…éƒ¨çŠ¶æ€ï¼Œå¯ä»¥å°†çŠ¶æ€é€šè¿‡<code>props</code>ç»™å­ç»„ä»¶</li><li>ä½¿ç”¨ <code>Redux</code> çš„ <code>API</code></li></ul></li></ul><p>React-Redux è§„å®šï¼Œæ‰€æœ‰çš„ UI ç»„ä»¶éƒ½ç”±ç”¨æˆ·æä¾›ï¼Œå®¹å™¨ç»„ä»¶åˆ™æ˜¯ç”± React-Redux è‡ªåŠ¨ç”Ÿæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªå†™UIç»„ä»¶ï¼Œè€Œé¡¶å±‚å®¹å™¨æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥ç”Ÿæˆçš„</p><span id="more"></span><h3 id="äºŒã€connect-æ–¹æ³•"><a href="#äºŒã€connect-æ–¹æ³•" class="headerlink" title="äºŒã€connect()æ–¹æ³•"></a>äºŒã€<code>connect()</code>æ–¹æ³•</h3><p><code>React-Redux</code> æä¾›äº†<code>connect</code>æ–¹æ³•ï¼Œç”¨äºå°† <code>UI</code> ç»„ä»¶åŒ…è£…æˆå®¹å™¨ç»„ä»¶ã€‚<br>å®¹å™¨æ˜¯è¦æœ‰çŠ¶æ€æœ‰ä¸šåŠ¡é€»è¾‘çš„ï¼Œå› æ­¤åœ¨<code>connect</code>æ–¹æ³•ç”Ÿæˆé¡¶å±‚å®¹å™¨æ—¶ï¼Œæˆ‘ä»¬å°±åº”è¯¥æŠŠæ‰€éœ€è¦çš„çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘å®šä¹‰å¥½å¹¶æä¾›ç»™<code>connect</code>ã€‚<br>å› æ­¤ï¼Œ<code>connect</code>æ–¹æ³•çš„å®Œæ•´ <code>API</code> å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; connect &#125; from &#x27;react-redux&#x27;</span><br><span class="line"></span><br><span class="line">const VisibleTodoList = connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  mapDispatchToProps</span><br><span class="line">)(component)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œconnectæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šmapStateToPropså’ŒmapDispatchToPropsã€‚å®ƒä»¬å®šä¹‰äº† UI ç»„ä»¶çš„ä¸šåŠ¡é€»è¾‘ã€‚å‰è€…è´Ÿè´£è¾“å…¥é€»è¾‘ï¼Œå³å°†stateæ˜ å°„åˆ° UI ç»„ä»¶çš„å‚æ•°ï¼ˆpropsï¼‰ï¼Œåè€…è´Ÿè´£è¾“å‡ºé€»è¾‘ï¼Œå³å°†ç”¨æˆ·å¯¹ UI ç»„ä»¶çš„æ“ä½œæ˜ å°„æˆ Actionã€‚</p><h3 id="ä¸‰ã€-lt-Provider-gt-ç»„ä»¶"><a href="#ä¸‰ã€-lt-Provider-gt-ç»„ä»¶" class="headerlink" title="ä¸‰ã€&lt;Provider&gt; ç»„ä»¶"></a>ä¸‰ã€<code>&lt;Provider&gt;</code> ç»„ä»¶</h3><p>connectæ–¹æ³•ç”Ÿæˆå®¹å™¨ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€å †çš„é€»è¾‘å’ŒçŠ¶æ€ï¼Œè€Œåªæœ‰é¡¶å±‚å®¹å™¨èƒ½æ‹¿åˆ°storeçš„æ—¶å€™æ‰æœ‰æ„ä¹‰ï¼Œå› æ­¤éœ€è¦è®©å®¹å™¨ç»„ä»¶æ‹¿åˆ°storeçš„stateå¯¹è±¡ã€‚</p><p>React-Redux æä¾›Providerç»„ä»¶ï¼Œå¯ä»¥è®©ç»„ä»¶æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªå®¹å™¨ç»„ä»¶æ‹¿åˆ°stateã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; Provider &#125; from &quot;react-redux&quot;;</span><br><span class="line">import store from &quot;./store/store.js&quot;;</span><br><span class="line">import App from &quot;./App&quot;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App&gt;&lt;/App&gt;</span><br><span class="line">&lt;/Provider&gt;, document.querySelector(&quot;#root&quot;));</span><br></pre></td></tr></table></figure><h3 id="å››ã€æºç å®ç°"><a href="#å››ã€æºç å®ç°" class="headerlink" title="å››ã€æºç å®ç°"></a>å››ã€æºç å®ç°</h3><p><code>react-redux</code>æ›´å¤šç”¨æ³•ä¸å¤šä»‹ç», è¯¦æƒ…å‚é˜…å®˜æ–¹æ–‡æ¡£ &gt;  <a href="https://www.redux.org.cn/docs/react-redux/">React Reduxæ–‡æ¡£</a></p><p>ä¸Šä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import PropTypes from &quot;prop-types&quot;;</span><br><span class="line"></span><br><span class="line">// redux :  bindActionCreators</span><br><span class="line">// import &#123; bindActionCreators &#125; from &quot;redux&quot;;  </span><br><span class="line"></span><br><span class="line">// react-redux: æ ¹ç»„ä»¶ Provider; </span><br><span class="line">class Provider extends React.Component &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line">    // åˆ©ç”¨contextä¸Šä¸‹æ–‡å®ç°è·¨ç»„ä»¶ä¼ é€’</span><br><span class="line">    static childContextTypes = &#123;</span><br><span class="line">        store: PropTypes.object</span><br><span class="line">    &#125;</span><br><span class="line">    getChildContext() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            store: this.props.store</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        console.log(this);</span><br><span class="line">        // è¿”å›Providerç»„ä»¶æ ‡ç­¾ä¹‹å†…çš„å­ç»„ä»¶è¿›è¡Œæ¸²æŸ“</span><br><span class="line">        return &lt;&gt;</span><br><span class="line">            &#123;this.props.children&#125;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// connect : é«˜é˜¶å‡½æ•°ï¼Œç”Ÿæˆç»„ä»¶</span><br><span class="line">const connect = (mapStateToProps, mapDispatchToProps) =&gt; (Component) =&gt; &#123;</span><br><span class="line">    return class Connect extends React.Component &#123;</span><br><span class="line">        constructor(props, context) &#123;</span><br><span class="line">            super();</span><br><span class="line"></span><br><span class="line">            // å°†storeä¸­çš„æ€»stateä¼ å…¥mapStateToProps,å…¶è¿”å›éƒ¨åˆ†çš„stateæ•°æ®æˆ–è€…è‡ªå®šä¹‰ã€å…¨éƒ¨çš„state</span><br><span class="line">            this.state = mapStateToProps(context.store.getState());</span><br><span class="line">        &#125;</span><br><span class="line">        // æ¥æ”¶contextå±æ€§</span><br><span class="line">        static contextTypes = &#123;</span><br><span class="line">            store: PropTypes.object</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // è®¢é˜…å‡½æ•°ï¼Œæ¯å½“æ‰§è¡Œdispatchå°±æ›´æ–°è§†å›¾</span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">            this.unSubscribe = this.context.store.subscribe(</span><br><span class="line">                () =&gt; this.setState(mapStateToProps(this.context.store.getState()))</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        // å–æ¶ˆè®¢é˜…</span><br><span class="line">        componentWillUnmount() &#123;</span><br><span class="line">            this.unSubscribe();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            console.log(this);</span><br><span class="line">            // mapDispatchToProps : é™¤ä¼ å…¥å‡½æ•°ä»¥å¤–ï¼Œåœ¨react-reduxä¸­:connectç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥ç›´æ¥ä¼ å…¥actionså¯¹è±¡ã€‚</span><br><span class="line">            // å¦‚æœæ˜¯å‡½æ•°ï¼Œå°†store.dispatchä¼ å…¥ï¼Œæ‰§è¡Œæ¥æ”¶å…¶è¿”å›å€¼ã€‚</span><br><span class="line">            // å¦‚æœæ˜¯å¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨reduxä¸­çš„api--&gt; bindActionCreators(); å°†å¯¹è±¡ä¼ å…¥ï¼Œè¿›è¡ŒdispatchäºŒæ¬¡åŒ…è£…æˆå‡½æ•°</span><br><span class="line">            let actions;</span><br><span class="line">            if (typeof mapDispatchToProps === &quot;function&quot;) &#123;</span><br><span class="line">                actions = mapDispatchToProps(this.context.store.dispatch);</span><br><span class="line">            &#125; else if (typeof mapDispatchToProps === &quot;object&quot; &amp;&amp; mapDispatchToProps !== null) &#123;</span><br><span class="line">                // actions = bindActionCreators(mapDispatchToProps, this.context.store.dispatch);  // reduxå†…ç½®</span><br><span class="line"></span><br><span class="line">                // æ—¢ç„¶å†™åˆ°è¿™é‡Œäº†ï¼Œå°±ä¸ç”¨reduxå†…ç½®çš„bindActionCreatorsæ–¹æ³•äº†ã€‚è¿˜æ˜¯è‡ªå·±å°è£…ä¸€ä¸ªå§</span><br><span class="line">                actions = bindActionCreators(mapDispatchToProps, this.context.store.dispatch);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                actions = &#123;&#125;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // å°†æŒ‡å®šçš„æ•°æ®ä¼ å…¥å­ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡this.propsè·å–</span><br><span class="line">            return &lt;&gt;</span><br><span class="line">                &lt;Component &#123;...this.state&#125; &#123;...actions&#125;&gt;&lt;/Component&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å°è£…ä¸ç‰ˆ bindActionCreators  </span><br><span class="line">const bindActionCreators = (actionCreators, dispatch) =&gt; &#123;</span><br><span class="line">    const boundActionCreators = &#123;&#125;;</span><br><span class="line">    for (let key in actionCreators) &#123;</span><br><span class="line">        const actionCreator = actionCreators[key];</span><br><span class="line">        if (typeof actionCreator === &quot;function&quot;) &#123;</span><br><span class="line">            boundActionCreators[key] = function (...arg) &#123;</span><br><span class="line">                dispatch(actionCreator.apply(this, arg));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return boundActionCreators;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export &#123;</span><br><span class="line">    Provider,</span><br><span class="line">    connect</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº”ã€æ•ˆæœæµ‹è¯•"><a href="#äº”ã€æ•ˆæœæµ‹è¯•" class="headerlink" title="äº”ã€æ•ˆæœæµ‹è¯•"></a>äº”ã€æ•ˆæœæµ‹è¯•</h3><ul><li><p>å°æ¡ˆåˆ—ç›®å½•ç»“æ„<br>  <img src="https://cdn.zhangone.site/PhotoBed/img/blog/React-Redux/react-redux.png"></p></li><li><p>index.js :</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactDOM from &quot;react-dom&quot;;</span><br><span class="line"></span><br><span class="line">// import &#123; Provider &#125; from &quot;react-redux&quot;;</span><br><span class="line">import &#123; Provider &#125; from &quot;./my-react-redux&quot;;</span><br><span class="line"></span><br><span class="line">import store from &quot;./store/store.js&quot;;</span><br><span class="line">import App from &quot;./App&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App&gt;&lt;/App&gt;</span><br><span class="line">&lt;/Provider&gt;, document.querySelector(&quot;#root&quot;));</span><br></pre></td></tr></table></figure></li><li><p>app.js :</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import Parent from &quot;./components/Parent&quot;;</span><br><span class="line">import Child from &quot;./components/Child&quot;;</span><br><span class="line"></span><br><span class="line">export default class App extends React.Component &#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">            &lt;Parent&gt;&lt;/Parent&gt;</span><br><span class="line">            &lt;Child&gt;&lt;/Child&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Parent.jsx :</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">import actions from &quot;../store/actions&quot;;</span><br><span class="line"></span><br><span class="line">import &#123; connect &#125; from &quot;../my-react-redux&quot;;</span><br><span class="line"></span><br><span class="line">class Parent extends React.Component &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        super();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    changeNum = () =&gt; &#123;</span><br><span class="line">        this.props.changeNum();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        console.log(this);</span><br><span class="line">        </span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">            &#123;this.props.num&#125;</span><br><span class="line">            &lt;button onClick=&#123;this.changeNum&#125;&gt;æ›´æ”¹num&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// export default Parent;</span><br><span class="line">export default connect(state =&gt; (&#123; ...state &#125;), actions)(Parent);</span><br></pre></td></tr></table></figure></li><li><p>å…¶ä»–æ–‡ä»¶å°±ä¸å‘äº†ï¼Œç›´æ¥çœ‹æ•ˆæœ<br>  <img src="https://cdn.zhangone.site/PhotoBed/img/blog/React-Redux/react-redux-effect-1.png"></p><p>  ç‚¹å‡»æ›´æ”¹num ï¼Œè®©num+1 ã€‚ æ›´æ”¹ageï¼Œè®©age+2<br>  <img src="https://cdn.zhangone.site/PhotoBed/img/blog/React-Redux/react-redux-effect-2.png"></p></li></ul><p>å—å—~~ ç¡è§‰</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å…ˆç®€å•äº†è§£ä¸€ä¸‹ &lt;code&gt;react-redux&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€ç»„ä»¶åˆ†ç±»&quot;&gt;&lt;a href=&quot;#ä¸€ã€ç»„ä»¶åˆ†ç±»&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ç»„ä»¶åˆ†ç±»&quot;&gt;&lt;/a&gt;ä¸€ã€ç»„ä»¶åˆ†ç±»&lt;/h3&gt;&lt;p&gt;&lt;code&gt;React-Redux&lt;/code&gt; å°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼š&lt;strong&gt;UI ç»„ä»¶&lt;/strong&gt;ï¼ˆpresentational componentï¼‰å’Œ&lt;strong&gt;å®¹å™¨ç»„ä»¶&lt;/strong&gt;ï¼ˆcontainer componentï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;h4 id=&quot;UI-ç»„ä»¶ï¼š&quot;&gt;&lt;a href=&quot;#UI-ç»„ä»¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;UI ç»„ä»¶ï¼š&quot;&gt;&lt;/a&gt;UI ç»„ä»¶ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åªè´Ÿè´£ &lt;code&gt;UI&lt;/code&gt; çš„å‘ˆç°ï¼Œä¸å¸¦æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰çŠ¶æ€ï¼ˆå³ä¸ä½¿ç”¨&lt;code&gt;this.state&lt;/code&gt;è¿™ä¸ªå˜é‡ï¼‰&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æ•°æ®éƒ½ç”±å‚æ•°ï¼ˆ&lt;code&gt;this.props&lt;/code&gt;ï¼‰æä¾›&lt;/li&gt;
&lt;li&gt;ä¸ä½¿ç”¨ä»»ä½• &lt;code&gt;Redux&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;h4 id=&quot;å®¹å™¨ç»„ä»¶ï¼š&quot;&gt;&lt;a href=&quot;#å®¹å™¨ç»„ä»¶ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®¹å™¨ç»„ä»¶ï¼š&quot;&gt;&lt;/a&gt;å®¹å™¨ç»„ä»¶ï¼š&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;è´Ÿè´£ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œä¸è´Ÿè´£ &lt;code&gt;UI&lt;/code&gt; çš„å‘ˆç°&lt;/li&gt;
&lt;li&gt;å¸¦æœ‰å†…éƒ¨çŠ¶æ€ï¼Œå¯ä»¥å°†çŠ¶æ€é€šè¿‡&lt;code&gt;props&lt;/code&gt;ç»™å­ç»„ä»¶&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;Redux&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;React-Redux è§„å®šï¼Œæ‰€æœ‰çš„ UI ç»„ä»¶éƒ½ç”±ç”¨æˆ·æä¾›ï¼Œå®¹å™¨ç»„ä»¶åˆ™æ˜¯ç”± React-Redux è‡ªåŠ¨ç”Ÿæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªå†™UIç»„ä»¶ï¼Œè€Œé¡¶å±‚å®¹å™¨æ˜¯é€šè¿‡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥ç”Ÿæˆçš„&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="redux" scheme="https://zhangone.site/tags/redux/"/>
    
  </entry>
  
  <entry>
    <title>ES6-Proxy</title>
    <link href="https://zhangone.site/posts/adb531e4/"/>
    <id>https://zhangone.site/posts/adb531e4/</id>
    <published>2020-06-02T04:12:18.000Z</published>
    <updated>2020-06-02T04:12:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å³å°†åˆ°æ¥çš„<code>Vue3.0</code>ä¸­ï¼Œ<code>Vue</code>æ•°æ®çš„å“åº”å¼ç³»ç»Ÿé‡‡ç”¨äº†<code>ES6</code>çš„<code>Proxy</code>æ¥ä»£æ›¿<code>Object.defineProperty</code></p><ul><li><code>Object.defineProperty</code> ï¼šå…¼å®¹ä¸»æµæµè§ˆå™¨å’Œie9ä»¥ä¸Šçš„ieæµè§ˆå™¨ï¼Œèƒ½å¤Ÿç›‘å¬æ•°æ®å¯¹è±¡çš„å˜åŒ–ï¼Œä½†æ˜¯ç›‘å¬ä¸åˆ°å¯¹è±¡å±æ€§çš„å¢åˆ ã€æ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„å˜åŒ–ï¼ŒåŒæ—¶ä¼šåœ¨vueåˆå§‹åŒ–çš„æ—¶å€™æŠŠæ‰€æœ‰çš„Observeréƒ½å»ºç«‹å¥½ï¼Œæ‰èƒ½è§‚å¯Ÿåˆ°æ•°æ®å¯¹è±¡å±æ€§çš„å˜åŒ–ã€‚</li><li><code>Proxy</code> : å¯ä»¥åšåˆ°ç›‘å¬å¯¹è±¡å±æ€§çš„å¢åˆ å’Œæ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„ä¿®æ”¹ï¼Œè¿˜å¯ä»¥ç›‘å¬<code>Map</code>ã€<code>Set</code>ã€<code>WeakSet</code>ã€<code>WeakMap</code>ï¼ŒåŒæ—¶è¿˜å®ç°äº†æƒ°æ€§çš„ç›‘å¬ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ›å»ºæ‰€æœ‰çš„Observerï¼Œè€Œæ˜¯ä¼šåœ¨ç”¨åˆ°çš„æ—¶å€™æ‰å»ç›‘å¬ã€‚</li></ul><span id="more"></span><h4 id="Proxyè¯­æ³•ï¼š"><a href="#Proxyè¯­æ³•ï¼š" class="headerlink" title="Proxyè¯­æ³•ï¼š"></a>Proxyè¯­æ³•ï¼š</h4><p><strong><code>Proxy</code> å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚</strong><br><strong>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler)</span><br></pre></td></tr></table></figure><ul><li><strong>å‚æ•°</strong>ï¼š</li></ul><ol><li><code>target</code> : è¦ä½¿ç”¨ Proxy åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚  </li><li><code>handler</code>: ä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç† <code>p</code> çš„è¡Œä¸ºã€‚</li></ol><ul><li><p><code>Proxy</code> â€“ api:</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Proxy</span>.<span class="title function_">revocable</span>()</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯æ’¤é”€çš„Proxyå¯¹è±¡ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><code>handler </code>å¯¹è±¡çš„æ–¹æ³•<br>  å¯¹è±¡æ˜¯ä¸€ä¸ªå®¹çº³ä¸€æ‰¹ç‰¹å®šå±æ€§çš„å ä½ç¬¦å¯¹è±¡ã€‚å®ƒåŒ…å«æœ‰ Proxy çš„å„ä¸ªæ•è·å™¨ï¼ˆtrapï¼‰ã€‚ æ‰€æœ‰çš„æ•æ‰å™¨æ˜¯å¯é€‰çš„ã€‚å¦‚æœæ²¡æœ‰å®šä¹‰æŸä¸ªæ•æ‰å™¨ï¼Œé‚£ä¹ˆå°±ä¼šä¿ç•™æºå¯¹è±¡çš„é»˜è®¤è¡Œä¸ºã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  Proxy æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€è§ˆï¼Œä¸€å…± 13 ç§ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">get</span>(target, propKey, receiver)ï¼š </span><br><span class="line"> <span class="comment">// æ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œ æ¯”å¦‚proxy.fooå’Œproxy[&#x27;foo&#x27;]ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">set</span>(target, propKey, value, receiver)ï¼š </span><br><span class="line"> <span class="comment">// æ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œ æ¯”å¦‚proxy.foo = væˆ–proxy[&#x27;foo&#x27;] = vï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">has</span>(target, propKey)ï¼š </span><br><span class="line"> <span class="comment">// æ‹¦æˆªpropKey in proxyçš„æ“ä½œï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">deleteProperty</span>(target, propKey)ï¼š </span><br><span class="line"> <span class="comment">// æ‹¦æˆªdelete proxy[propKey] çš„æ“ä½œï¼Œ è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">ownKeys</span>(target):</span><br><span class="line"><span class="comment">// æ‹¦æˆªObject.getOwnPropertyNames(proxy)ã€Object.getOwnPropertySymbols(proxy)ã€Object.keys(proxy)ã€for...inå¾ªç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€ŒObject.keys()çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">getOwnPropertyDescriptor</span>(target, propKey)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.getOwnPropertyDescriptor(proxy, propKey)ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">defineProperty</span>(target, propKey, propDesc)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.defineProperty(proxy, propKey, propDescï¼‰ã€Object.defineProperties(proxy, propDescs)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">preventExtensions</span>(target)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.preventExtensions(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">getPrototypeOf</span>(target)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.getPrototypeOf(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">isExtensible</span>(target)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.isExtensible(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">setPrototypeOf</span>(target, proto)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆªObject.setPrototypeOf(proxy, proto)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">apply</span>(target, object, args)ï¼š</span><br><span class="line"> <span class="comment">// æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚proxy(...args)ã€proxy.call(object, ...args)ã€proxy.apply(...)ã€‚</span></span><br><span class="line"> </span><br><span class="line"> <span class="title function_">construct</span>(target, args)ï¼š</span><br><span class="line"><span class="comment">// æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚new proxy(...args)ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="å…³äº-Refect"><a href="#å…³äº-Refect" class="headerlink" title="å…³äº Refect"></a>å…³äº <code>Refect</code></h4><ul><li><code>Reflect</code>å¯¹è±¡ä¸<code>Proxy</code>å¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ <code>ES6</code> ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° <code>API</code></li><li><code>Reflect</code>ä¸<code>Proxy--handler</code>å¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„;<br> å…³äº<code>Reflect</code>çš„è¯¦æƒ…äº†è§£ <a href="https://es6.ruanyifeng.com/#docs/reflect">ç‚¹å‡»äº†è§£ES6 &#x3D;&gt; Reflect</a></li></ul><h4 id="get-ä¸-set"><a href="#get-ä¸-set" class="headerlink" title="get() ä¸ set()"></a><code>get()</code> ä¸ <code>set()</code></h4><ul><li><code>get</code>&#x3D;&gt; æ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œï¼Œå¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åå’Œ <code>proxy</code> å®ä¾‹æœ¬èº«ï¼ˆä¸¥æ ¼åœ°è¯´ï¼Œæ˜¯æ“ä½œè¡Œä¸ºæ‰€é’ˆå¯¹çš„å¯¹è±¡ï¼‰ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚</li><li><code>set</code> &#x3D;&gt; æ–¹æ³•ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œï¼Œå¯ä»¥æ¥å—å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åã€å±æ€§å€¼å’Œ <code>Proxy</code> å®ä¾‹æœ¬èº«ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new Proxy(target, handler);</span></span><br><span class="line"><span class="comment">// target ==&gt; è¦è¿›è¡Œæ‹¦æˆªçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// handler ==&gt; è¦æ±‚æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå®šåˆ¶æ‹¦æˆªçš„è¡Œä¸ºï¼ŒåŠé€»è¾‘å¤„ç†</span></span><br><span class="line"><span class="comment">// å¦‚æœhandleræ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•çš„æ‹¦æˆªå¤„ç†ï¼Œè®¿é—® py è¿™ä¸ªå®ä¾‹æ•ˆæœåŒäºè®¿é—® targetã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Proxy&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> py = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;</span><br><span class="line">   <span class="title function_">get</span>(<span class="params">target, key, example</span>) &#123;</span><br><span class="line">       <span class="comment">// target =&gt; obj:&#123;name:&quot;Proxy&quot;&#125;</span></span><br><span class="line">       <span class="comment">// key =&gt; æ¯æ¬¡è¦è·å–çš„å±æ€§å propKey</span></span><br><span class="line">       <span class="comment">// example =&gt; å½“å‰ py è¿™ä¸ªå®ä¾‹</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key);</span><br><span class="line">       <span class="comment">// return &quot;default&quot;; æ¯æ¬¡éƒ½ä¼šè·å–åˆ°å›ºå®šè¿”å›å€¼</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">set</span>(<span class="params">target, key, newValue, example</span>) &#123;</span><br><span class="line">       <span class="comment">// console.log(target, key, value, example);</span></span><br><span class="line">       <span class="comment">// newValue =&gt; å°†è¦è®¾ç½®çš„æ–°å€¼  </span></span><br><span class="line">       <span class="keyword">if</span> (<span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key) !== newValue) &#123;</span><br><span class="line">           <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, newValue);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// get</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(py.<span class="property">name</span>); <span class="comment">//=&gt; &quot;Proxy&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(py.<span class="property">age</span>); <span class="comment">//=&gt; undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// set</span></span><br><span class="line">py.<span class="property">age</span> = <span class="string">&quot;20&quot;</span>;</span><br><span class="line">py.<span class="property">name</span> = <span class="string">&quot;newProxy&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(py);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br></pre></td></tr></table></figure><br/><ul><li><code>Proxy</code> å®ä¾‹ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> py = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, key, example</span>) &#123;</span><br><span class="line">        <span class="comment">// if (key === &quot;__proto__&quot;) return example;  </span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;default&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, key, newValue</span>) &#123;</span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, newValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="title class_">Object</span>.<span class="title function_">create</span>(py);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">df</span>); <span class="comment">//=&gt; &quot;default&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">__proto__</span>); <span class="comment">//=&gt; &quot;default&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">//=&gt; &quot;default&quot;</span></span><br></pre></td></tr></table></figure><br/></li></ul><p><a href="https://es6.ruanyifeng.com/#docs/proxy">é˜®ä¸€å³°ES6-Proxy</a> æ–‡æ¡£ä¸­ï¼Œä½¿ç”¨<code>get</code>æ‹¦æˆªï¼Œå®ç°æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createArray</span>(<span class="params">...elements</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> handler = &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, propKey, receiver</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> index = <span class="title class_">Number</span>(propKey);</span><br><span class="line">      <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        propKey = <span class="title class_">String</span>(target.<span class="property">length</span> + index);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, propKey, receiver);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> target = [];</span><br><span class="line">  target.<span class="title function_">push</span>(...elements);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title function_">createArray</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">arr[-<span class="number">1</span>] <span class="comment">// ==&gt; c</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„çš„ä½ç½®å‚æ•°æ˜¯-1ï¼Œå°±ä¼šè¾“å‡ºæ•°ç»„çš„å€’æ•°ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚</p><p>åˆ©ç”¨<code> Proxy</code>ï¼Œå¯ä»¥å°†è¯»å–å±æ€§çš„æ“ä½œï¼ˆ<code>get</code>ï¼‰ï¼Œè½¬å˜ä¸ºæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä»è€Œå®ç°å±æ€§çš„é“¾å¼æ“ä½œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pipe = <span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> funcStack = [];</span><br><span class="line">  <span class="keyword">var</span> oproxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params">pipeObject, fnName</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (fnName === <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> funcStack.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">val, fn</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="title function_">fn</span>(val);</span><br><span class="line">        &#125;,value);</span><br><span class="line">      &#125;</span><br><span class="line">      funcStack.<span class="title function_">push</span>(<span class="variable language_">window</span>[fnName]);</span><br><span class="line">      <span class="keyword">return</span> oproxy;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> oproxy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">double</span> = n =&gt; n * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">pow</span>    = n =&gt; n * n;</span><br><span class="line"><span class="keyword">var</span> <span class="title function_">reverseInt</span> = n =&gt; n.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>) | <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">pipe</span>(<span class="number">3</span>).<span class="property">double</span>.<span class="property">pow</span>.<span class="property">reverseInt</span>.<span class="property">get</span>; <span class="comment">// ==&gt; 63</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è®¾ç½®<code> Proxy</code> ä»¥åï¼Œè¾¾åˆ°äº†å°†å‡½æ•°åé“¾å¼ä½¿ç”¨çš„æ•ˆæœã€‚</p><h4 id="å®ä¾‹ï¼šä½¿ç”¨-Proxy-å®ç°è§‚å¯Ÿè€…æ¨¡å¼"><a href="#å®ä¾‹ï¼šä½¿ç”¨-Proxy-å®ç°è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="å®ä¾‹ï¼šä½¿ç”¨ Proxy å®ç°è§‚å¯Ÿè€…æ¨¡å¼"></a>å®ä¾‹ï¼šä½¿ç”¨ <code>Proxy</code> å®ç°è§‚å¯Ÿè€…æ¨¡å¼</h4><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆ<code>Observer mode</code>ï¼‰æŒ‡çš„æ˜¯å‡½æ•°è‡ªåŠ¨è§‚å¯Ÿæ•°æ®å¯¹è±¡ï¼Œä¸€æ—¦å¯¹è±¡æœ‰å˜åŒ–ï¼Œå‡½æ•°å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = <span class="title function_">observable</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;person.name&#125;</span>, <span class="subst">$&#123;person.age&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">observe</span>(print);</span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="comment">// æå››, 20</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°æ®å¯¹è±¡<code>person</code>æ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œå‡½æ•°<code>print</code>æ˜¯è§‚å¯Ÿè€…ã€‚ä¸€æ—¦æ•°æ®å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œ<code>print</code>å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p><p>ä¸‹é¢ï¼Œä½¿ç”¨ <code>Proxy</code> å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„æœ€ç®€å•å®ç°ï¼Œå³å®ç°<code>observable</code>å’Œ<code>observe</code>è¿™ä¸¤ä¸ªå‡½æ•°ã€‚æ€è·¯æ˜¯<code>observable</code>å‡½æ•°è¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„ <code>Proxy</code> ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œè§¦å‘å……å½“è§‚å¯Ÿè€…çš„å„ä¸ªå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> queuedObservers = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">observe</span> = fn =&gt; queuedObservers.<span class="title function_">add</span>(fn);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">observable</span> = obj =&gt; <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;set&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver);</span><br><span class="line">  queuedObservers.<span class="title function_">forEach</span>(<span class="function"><span class="params">observer</span> =&gt;</span> <span class="title function_">observer</span>());</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ª<code>Set</code>é›†åˆï¼Œæ‰€æœ‰è§‚å¯Ÿè€…å‡½æ•°éƒ½æ”¾è¿›è¿™ä¸ªé›†åˆã€‚ç„¶åï¼Œ<code>observable</code>å‡½æ•°è¿”å›åŸå§‹å¯¹è±¡çš„ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œã€‚æ‹¦æˆªå‡½æ•°<code>set</code>ä¹‹ä¸­ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è§‚å¯Ÿè€…ã€‚</p><p>äº†è§£æ›´å¤šçš„å®ä¾‹ä»‹ç»ï¼Œå’Œå…¶ä»–æ‹¦æˆªæ“ä½œçš„æ–¹æ³•ä»‹ç» &#x3D;&gt; <a href="https://es6.ruanyifeng.com/#docs/proxy">ES6-Proxy</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨å³å°†åˆ°æ¥çš„&lt;code&gt;Vue3.0&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;Vue&lt;/code&gt;æ•°æ®çš„å“åº”å¼ç³»ç»Ÿé‡‡ç”¨äº†&lt;code&gt;ES6&lt;/code&gt;çš„&lt;code&gt;Proxy&lt;/code&gt;æ¥ä»£æ›¿&lt;code&gt;Object.defineProperty&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Object.defineProperty&lt;/code&gt; ï¼šå…¼å®¹ä¸»æµæµè§ˆå™¨å’Œie9ä»¥ä¸Šçš„ieæµè§ˆå™¨ï¼Œèƒ½å¤Ÿç›‘å¬æ•°æ®å¯¹è±¡çš„å˜åŒ–ï¼Œä½†æ˜¯ç›‘å¬ä¸åˆ°å¯¹è±¡å±æ€§çš„å¢åˆ ã€æ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„å˜åŒ–ï¼ŒåŒæ—¶ä¼šåœ¨vueåˆå§‹åŒ–çš„æ—¶å€™æŠŠæ‰€æœ‰çš„Observeréƒ½å»ºç«‹å¥½ï¼Œæ‰èƒ½è§‚å¯Ÿåˆ°æ•°æ®å¯¹è±¡å±æ€§çš„å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Proxy&lt;/code&gt; : å¯ä»¥åšåˆ°ç›‘å¬å¯¹è±¡å±æ€§çš„å¢åˆ å’Œæ•°ç»„å…ƒç´ å’Œé•¿åº¦çš„ä¿®æ”¹ï¼Œè¿˜å¯ä»¥ç›‘å¬&lt;code&gt;Map&lt;/code&gt;ã€&lt;code&gt;Set&lt;/code&gt;ã€&lt;code&gt;WeakSet&lt;/code&gt;ã€&lt;code&gt;WeakMap&lt;/code&gt;ï¼ŒåŒæ—¶è¿˜å®ç°äº†æƒ°æ€§çš„ç›‘å¬ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ›å»ºæ‰€æœ‰çš„Observerï¼Œè€Œæ˜¯ä¼šåœ¨ç”¨åˆ°çš„æ—¶å€™æ‰å»ç›‘å¬ã€‚&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ES6" scheme="https://zhangone.site/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>ES6-Reflect</title>
    <link href="https://zhangone.site/posts/7db6df7e/"/>
    <id>https://zhangone.site/posts/7db6df7e/</id>
    <published>2020-05-11T04:12:09.000Z</published>
    <updated>2020-05-11T04:12:09.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€å•äº†è§£Reflect"><a href="#ç®€å•äº†è§£Reflect" class="headerlink" title="ç®€å•äº†è§£Reflect"></a>ç®€å•äº†è§£<code>Reflect</code></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Reflect</span>);  <span class="comment">// Error ==&gt; Reflect is not a constructor</span></span><br><span class="line"><span class="comment">// =&gt; è™½ç„¶æ˜¯å¤§å†™å¼€å¤´ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œä¸å¯ä»¥è¢«newï¼›</span></span><br></pre></td></tr></table></figure><p> æ¦‚è¿°ï¼š</p><ol><li>å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰ï¼Œæ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨<code>Object</code>å’Œ<code>Reflect</code>å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚ <span id="more"></span></li><li>ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼Œ<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code>ã€‚</li><li>è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="string">&quot;a&quot;</span> <span class="keyword">in</span> obj <span class="comment">// =&gt; true  ä¹‹å‰çš„æ—§è¯­æ³•ï¼Œç”¨å…³é”®å­— in åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å±äºæŸä¸ªå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">has</span>(obj, <span class="string">&quot;a&quot;</span>); <span class="comment">// =&gt; true  Reflect.has(); å‡½æ•°å½¢å¼çš„æ–°è¯­æ³•ï¼Œä½œç”¨ç­‰åŒäºä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ—å¦‚ï¼šè¿˜æœ‰åƒåˆ é™¤å±æ€§çš„å…³é”®å­— delete obj[key] ==&gt; Reflect.deleteProperty(obj,key);</span></span><br></pre></td></tr></table></figure></li><li><code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡<code>Proxy</code>æ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨<code>Reflect</code>ä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚</li></ol><h2 id="ç®€å•ç²—æš´ï¼šç›´æ¥æ‰“å°å®ƒ"><a href="#ç®€å•ç²—æš´ï¼šç›´æ¥æ‰“å°å®ƒ" class="headerlink" title="ç®€å•ç²—æš´ï¼šç›´æ¥æ‰“å°å®ƒ"></a>ç®€å•ç²—æš´ï¼šç›´æ¥æ‰“å°å®ƒ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Reflect</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// çœå¼ å›¾ç‰‡ï¼Œæ§åˆ¶å°ç»“æœç²˜è¿‡æ¥</span></span><br><span class="line">&#123;<span class="attr">defineProperty</span>: Æ’, <span class="attr">deleteProperty</span>: Æ’, <span class="attr">apply</span>: Æ’, <span class="attr">construct</span>: Æ’, <span class="attr">get</span>: Æ’, â€¦&#125;</span><br><span class="line"><span class="attr">apply</span>: Æ’ <span class="title function_">apply</span>()</span><br><span class="line"><span class="attr">construct</span>: Æ’ <span class="title function_">construct</span>()</span><br><span class="line"><span class="attr">defineProperty</span>: Æ’ <span class="title function_">defineProperty</span>()</span><br><span class="line"><span class="attr">deleteProperty</span>: Æ’ <span class="title function_">deleteProperty</span>()</span><br><span class="line"><span class="attr">get</span>: Æ’ ()</span><br><span class="line"><span class="attr">getOwnPropertyDescriptor</span>: Æ’ <span class="title function_">getOwnPropertyDescriptor</span>()</span><br><span class="line"><span class="attr">getPrototypeOf</span>: Æ’ <span class="title function_">getPrototypeOf</span>()</span><br><span class="line"><span class="attr">has</span>: Æ’ <span class="title function_">has</span>()</span><br><span class="line"><span class="attr">isExtensible</span>: Æ’ <span class="title function_">isExtensible</span>()</span><br><span class="line"><span class="attr">ownKeys</span>: Æ’ <span class="title function_">ownKeys</span>()</span><br><span class="line"><span class="attr">preventExtensions</span>: Æ’ <span class="title function_">preventExtensions</span>()</span><br><span class="line"><span class="attr">set</span>: Æ’ ()</span><br><span class="line"><span class="attr">setPrototypeOf</span>: Æ’ <span class="title function_">setPrototypeOf</span>()</span><br><span class="line"><span class="attr">__proto__</span>: <span class="title class_">Object</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="Reflectå¯¹è±¡ç›®å‰ä¸€å…±æœ‰-13-ä¸ªé™æ€æ–¹æ³•"><a href="#Reflectå¯¹è±¡ç›®å‰ä¸€å…±æœ‰-13-ä¸ªé™æ€æ–¹æ³•" class="headerlink" title="Reflectå¯¹è±¡ç›®å‰ä¸€å…±æœ‰ 13 ä¸ªé™æ€æ–¹æ³•"></a>Reflectå¯¹è±¡ç›®å‰ä¸€å…±æœ‰ 13 ä¸ªé™æ€æ–¹æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">apply</span>(target, thisArg, args) </span><br><span class="line"><span class="comment">//=&gt; Reflect.applyæ–¹æ³•ç­‰åŒäºFunction.prototype.apply.call(func, thisArg, args)ï¼Œç”¨äºç»‘å®šthiså¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè¦ç»‘å®šä¸€ä¸ªå‡½æ•°çš„thiså¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·å†™fn.apply(obj, args)ï¼Œä½†æ˜¯å¦‚æœå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„applyæ–¹æ³•ï¼Œå°±åªèƒ½å†™æˆFunction.prototype.apply.call(fn, obj, args)ï¼Œé‡‡ç”¨Reflectå¯¹è±¡å¯ä»¥ç®€åŒ–è¿™ç§æ“ä½œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">construct</span>(target, args) </span><br><span class="line"><span class="comment">//=&gt; ä»¥ new æ–¹å¼å»æ‰§è¡Œä¸€ä¸ªæ„é€ å‡½æ•°  new Fn() ==&gt; Reflect.construct(Fn,å®å‚)</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, name, receiver) </span><br><span class="line"><span class="comment">//=&gt; è·å–å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å€¼ ==&gt; obj.key</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, name, value, receiver) </span><br><span class="line"><span class="comment">//=&gt; è®¾ç½®å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å€¼ ==&gt; obj.key = &quot;new value&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">defineProperty</span>(target, name, desc)  </span><br><span class="line"><span class="comment">// =&gt; Reflect.definePropertyæ–¹æ³•åŸºæœ¬ç­‰åŒäºObject.definePropertyï¼Œç”¨æ¥ä¸ºå¯¹è±¡å®šä¹‰å±æ€§ã€‚æœªæ¥ï¼Œåè€…ä¼šè¢«é€æ¸åºŸé™¤ï¼Œè¯·ä»ç°åœ¨å¼€å§‹å°±ä½¿ç”¨Reflect.definePropertyä»£æ›¿å®ƒã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, name)  </span><br><span class="line"><span class="comment">// =&gt; Reflect.deletePropertyæ–¹æ³•ç­‰åŒäºdelete obj[name]ï¼Œç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">has</span>(target, name) </span><br><span class="line"><span class="comment">// =&gt; Reflect.hasæ–¹æ³•å¯¹åº”name in objé‡Œé¢çš„inè¿ç®—ç¬¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">ownKeys</span>(target)  </span><br><span class="line"><span class="comment">// =&gt; Reflect.ownKeysæ–¹æ³•ç”¨äºè¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ŒåŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNamesä¸Object.getOwnPropertySymbolsä¹‹å’Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">isExtensible</span>(target) </span><br><span class="line"><span class="comment">// =&gt; Reflect.isExtensibleæ–¹æ³•å¯¹åº”Object.isExtensibleï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">preventExtensions</span>(target) </span><br><span class="line"><span class="comment">// =&gt; Reflect.preventExtensionså¯¹åº”Object.preventExtensionsæ–¹æ³•ï¼Œç”¨äºè®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ“ä½œæˆåŠŸã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">getOwnPropertyDescriptor</span>(target, name) </span><br><span class="line"><span class="comment">// =&gt; Reflect.getOwnPropertyDescriptoråŸºæœ¬ç­‰åŒäºObject.getOwnPropertyDescriptorï¼Œç”¨äºå¾—åˆ°æŒ‡å®šå±æ€§çš„æè¿°å¯¹è±¡ï¼Œå°†æ¥ä¼šæ›¿ä»£æ‰åè€…ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">getPrototypeOf</span>(target)  </span><br><span class="line"><span class="comment">// =&gt; Reflect.getPrototypeOfæ–¹æ³•ç”¨äºè¯»å–å¯¹è±¡çš„__proto__å±æ€§ï¼Œå¯¹åº”Object.getPrototypeOf(obj)ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Reflect</span>.<span class="title function_">setPrototypeOf</span>(target, prototype) </span><br><span class="line"><span class="comment">// =&gt; Reflect.setPrototypeOfæ–¹æ³•ç”¨äºè®¾ç½®ç›®æ ‡å¯¹è±¡çš„åŸå‹ï¼ˆprototypeï¼‰ï¼Œå¯¹åº”Object.setPrototypeOf(obj, newProto)æ–¹æ³•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®æˆåŠŸã€‚</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œ å¤§éƒ¨åˆ†ä¸<code>Object</code>å¯¹è±¡çš„åŒåæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œ è€Œä¸”å®ƒä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ </p><p>æœªæ¥<code>Object</code>ä¸Šçš„ä¸€äº›æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å¯¹è±¡çš„æ“ä½œè¯­æ³•ï¼Œéƒ½ä¼šè¿›è¡Œè§„èŒƒå¼çš„å¤„ç†ï¼Œæœ‰çš„å¯èƒ½ä¼šç¨å¾®æ”¹åŠ¨ã€‚ å¹¶ä¸”ä¼šé€æ¸åºŸå¼ƒ<code>Object</code>ä¸Šçš„æŸäº›æ–¹æ³•ï¼Œä½†ä¼šè½¬ç§»åˆ°æ–°çš„ <code>Reflect</code> è¿™ä¸ªå¯¹è±¡ä¸Šé¢ã€‚</p><p><a href="https://es6.ruanyifeng.com/#docs/reflect">æ›´åŠ è¯¦æƒ…äº†è§£â€“ES6-Reflect</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç®€å•äº†è§£Reflect&quot;&gt;&lt;a href=&quot;#ç®€å•äº†è§£Reflect&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•äº†è§£Reflect&quot;&gt;&lt;/a&gt;ç®€å•äº†è§£&lt;code&gt;Reflect&lt;/code&gt;&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Reflect&lt;/span&gt;);  &lt;span class=&quot;comment&quot;&gt;// Error ==&amp;gt; Reflect is not a constructor&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// =&amp;gt; è™½ç„¶æ˜¯å¤§å†™å¼€å¤´ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œä¸å¯ä»¥è¢«newï¼›&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt; æ¦‚è¿°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†&lt;code&gt;Object&lt;/code&gt;å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚&lt;code&gt;Object.defineProperty&lt;/code&gt;ï¼‰ï¼Œæ”¾åˆ°&lt;code&gt;Reflect&lt;/code&gt;å¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨&lt;code&gt;Object&lt;/code&gt;å’Œ&lt;code&gt;Reflect&lt;/code&gt;å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨&lt;code&gt;Reflect&lt;/code&gt;å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»&lt;code&gt;Reflect&lt;/code&gt;å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ES6" scheme="https://zhangone.site/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>Vueæ•°æ®åŒå‘ç»‘å®šåŸç†</title>
    <link href="https://zhangone.site/posts/cec8bac/"/>
    <id>https://zhangone.site/posts/cec8bac/</id>
    <published>2020-04-25T04:23:13.000Z</published>
    <updated>2020-05-04T15:21:32.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="MVC-amp-MVVM"><a href="#MVC-amp-MVVM" class="headerlink" title="MVC &amp; MVVM"></a>MVC &amp; MVVM</h4><ul><li><p>ä¼ ç»Ÿæ“ä½œ<code>DOM</code>æ¨¡å¼</p></li><li><p>MVCï¼š<code>model view controller</code></p></li><li><p>MVVMï¼š<code>model view viewModel</code></p><span id="more"></span><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/Vue/VueMVVM-1.png"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/Vue/MVVM-2.png" alt="MVVM-2"></p></li></ul><h3 id="åŒå‘æ•°æ®ç»‘å®šçš„å®ç°åŸç†"><a href="#åŒå‘æ•°æ®ç»‘å®šçš„å®ç°åŸç†" class="headerlink" title="åŒå‘æ•°æ®ç»‘å®šçš„å®ç°åŸç†"></a>åŒå‘æ•°æ®ç»‘å®šçš„å®ç°åŸç†</h3><ul><li>Object.defineProperty</li><li>å®ç°çš„åº•å±‚åŸç†  :   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//obServer:è§‚å¯Ÿè€…</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">obServer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!obj.<span class="title function_">hasOwnProperty</span>(key)) <span class="keyword">break</span>;</span><br><span class="line">            <span class="title function_">defineReactive</span>(obj, key, obj[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">defineReactive</span>(<span class="params">obj, key, value</span>) &#123;</span><br><span class="line">    <span class="title function_">obServer</span>(value);</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">            <span class="title function_">observer</span>(newValue);</span><br><span class="line">            <span class="keyword">if</span> (value === newValue) <span class="keyword">return</span>;</span><br><span class="line">            value = newValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">$set</span>(<span class="params">data, key, value</span>) &#123;</span><br><span class="line">    <span class="title function_">defineReactive</span>(data, key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ ¸å¿ƒåŸç†åŠä»£ç å®ç°"><a href="#æ ¸å¿ƒåŸç†åŠä»£ç å®ç°" class="headerlink" title="æ ¸å¿ƒåŸç†åŠä»£ç å®ç°"></a>æ ¸å¿ƒåŸç†åŠä»£ç å®ç°</h4><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/Vue/MVVM-3.png" alt="MVVM-3"></p><ol><li>è§£æVueæŒ‡ä»¤çš„  â€”â€” <code>v-model</code></li><li>ç¼–è¯‘Vueä¸­çš„å–å€¼è¯­æ³• â€”â€” <code>&#123; &#123;...&#125; &#125;</code></li><li>å®ç°å¯¹è¡¨å•å…ƒç´ <code>input</code> åŒå‘æ•°æ®ç›‘å¬</li></ol><p><strong>è¿™æ¬¡ä½¿ç”¨ES6å®šä¹‰classç±»çš„å½¢å¼æ¥å®ç°ã€‚å°±ä¸ä½¿ç”¨ES5äº†</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vue-MVVM<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">a</span>=<span class="string">&quot;21&quot;</span>&gt;</span>&#123;&#123; msg &#125;&#125; <span class="symbol">&amp;nbsp;</span> è¿™æ˜¯é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;val&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; val &#125;&#125; é™æ€æ–‡æœ¬<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/npm/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * obServer: æ•°æ®ç›‘å¬ï¼ˆæ‹¦æˆªï¼‰</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * compile: æŒ‡ä»¤è§£æ</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * Dep: è®¢é˜…å™¨ï¼ˆäº‹ä»¶æ± ï¼Œå‘å¸ƒå™¨ï¼‰</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         * Watcher: è®¢é˜…è€…ï¼šï¼ˆè®¢é˜…ï¼‰</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Dep</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Dep</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">subs</span> = [];</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">subscribe</span>(<span class="params">sub</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(sub);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">notify</span>(<span class="params">oldValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">subs</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    item.<span class="title function_">update</span>(oldValue);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Watcher</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">constructor</span>(<span class="params">node, key, vm</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">node</span> = node;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">key</span> = key;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">vm</span> = vm;</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Dep</span>.<span class="property">curWatcher</span> = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Dep</span>.<span class="property">curWatcher</span> = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">vm</span>.<span class="property">_data</span>[<span class="variable language_">this</span>.<span class="property">key</span>];</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">update</span>(<span class="params">oldValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">nodeType</span> == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">nodeName</span> === <span class="string">&quot;INPUT&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="title function_">getData</span>();</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// .....</span></span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> oldText = <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">nodeValue</span>;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">node</span>.<span class="property">nodeValue</span> = oldText.<span class="title function_">replace</span>(oldValue, <span class="variable language_">this</span>.<span class="title function_">getData</span>());</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">myVue</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> _this;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//=&gt; init example</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">_data</span> = <span class="keyword">typeof</span> options.<span class="property">data</span> === <span class="string">&quot;function&quot;</span> ? options.<span class="title function_">data</span>() : options.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$el</span> = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(options.<span class="property">el</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// data obServer</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">obServer</span>(<span class="variable language_">this</span>.<span class="property">_data</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// nodeToFragment &amp;&amp; Compile</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">nodeToFragment</span>(<span class="variable language_">this</span>.<span class="property">$el</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">$root</span> = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                _this = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>.<span class="property">_data</span>, <span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> _this;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// prototype</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">obServer</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (data &amp;&amp; <span class="keyword">typeof</span> data === <span class="string">&quot;object&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (!data.<span class="title function_">hasOwnProperty</span>(key)) <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">defineReactive</span>(data, key, data[key]);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// data intercept</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">defineReactive</span>(<span class="params">data, key, value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">obServer</span>(value);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> oldValue = value;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, key, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (<span class="title class_">Dep</span>.<span class="property">curWatcher</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            dep.<span class="title function_">subscribe</span>(<span class="title class_">Dep</span>.<span class="property">curWatcher</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> value;</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (newValue === oldValue) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                        oldValue = value;</span></span><br><span class="line"><span class="language-javascript">                        value = newValue;</span></span><br><span class="line"><span class="language-javascript">                        dep.<span class="title function_">notify</span>(oldValue);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// instruct-model</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">instructModel</span>(<span class="params">node, attr</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¯æ ¹æ®inputä¸åŒçš„typeç±»å‹ï¼Œè®¾ç½®ä¸åŒçš„å±æ€§ã€‚  å¦‚ï¼š checked</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> nodeValue = attr.<span class="property">nodeValue</span>,</span></span><br><span class="line"><span class="language-javascript">                    nodeName = attr.<span class="property">nodeName</span>;</span></span><br><span class="line"><span class="language-javascript">                node.<span class="property">value</span> = <span class="variable language_">this</span>.<span class="property">_data</span>[nodeValue]; <span class="comment">// nodeValue å–åˆ° data ä¸­å¯¹åº”çš„å­—æ®µ</span></span></span><br><span class="line"><span class="language-javascript">                node.<span class="title function_">removeAttribute</span>(nodeName); <span class="comment">// åˆ é™¤è¡Œé—´æŒ‡ä»¤</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                node.<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, <span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">_data</span>[nodeValue] = ev.<span class="property">currentTarget</span>.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// åˆ›å»ºè§‚å¯Ÿè€…ï¼ˆç›‘å¬ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">new</span> <span class="title class_">Watcher</span>(node, nodeValue, <span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// Compile</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">compile</span>(<span class="params">node</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (node.<span class="property">nodeType</span> == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è·å–å…ƒç´ çš„èŠ‚ç‚¹çš„è¡Œé—´å±æ€§</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> attrs = node.<span class="property">attributes</span>,</span></span><br><span class="line"><span class="language-javascript">                        nodes = node.<span class="property">childNodes</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; attrs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">let</span> curAttr = attrs[i],</span></span><br><span class="line"><span class="language-javascript">                            curAttrName = curAttr.<span class="property">nodeName</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (<span class="regexp">/^v\-/</span>.<span class="title function_">test</span>(curAttrName)) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">switch</span> (curAttrName.<span class="title function_">substring</span>(<span class="number">2</span>)) &#123; <span class="comment">//=&gt; åŒ¹é…å¯¹åº”v-æŒ‡ä»¤</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">case</span> <span class="string">&quot;model&quot;</span>:</span></span><br><span class="line"><span class="language-javascript">                                    <span class="variable language_">this</span>.<span class="title function_">instructModel</span>(node, curAttr);</span></span><br><span class="line"><span class="language-javascript">                                    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="language-javascript">                                    <span class="comment">// .... æ›´å¤šæŒ‡ä»¤</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// é€’å½’å¤„ç†å…¶å­èŠ‚ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodes.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="title function_">compile</span>(nodes[i]);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// è§£æéå…ƒç´ èŠ‚ç‚¹</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> text = node.<span class="property">nodeValue</span>,</span></span><br><span class="line"><span class="language-javascript">                        reg = <span class="regexp">/\&#123;\&#123;(.+?)\&#125;\&#125;/g</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (reg.<span class="title function_">test</span>(text)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        text = text.<span class="title function_">replace</span>(reg, <span class="function">(<span class="params">g, key</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            key = key.<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (key) <span class="keyword">new</span> <span class="title class_">Watcher</span>(node, key, <span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_data</span>[key];</span></span><br><span class="line"><span class="language-javascript">                        &#125;);</span></span><br><span class="line"><span class="language-javascript">                        node.<span class="property">nodeValue</span> = text;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// nodeToFragment</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">nodeToFragment</span>(<span class="params">element</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> frag = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> firstNode = element.<span class="property">firstChild</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">while</span> (firstNode) &#123;</span></span><br><span class="line"><span class="language-javascript">                    frag.<span class="title function_">appendChild</span>(firstNode);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">compile</span>(firstNode);</span></span><br><span class="line"><span class="language-javascript">                    firstNode = element.<span class="property">firstChild</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                element.<span class="title function_">appendChild</span>(frag);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> myVm = <span class="keyword">new</span> <span class="title function_">myVue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">msg</span>: <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æ·»åŠ çš„æ–‡æœ¬&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">val</span>: <span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(myVm);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// const vm = new Vue(&#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     el: &quot;#app&quot;,</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     data() &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         return &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//             msg: &quot;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€æ·»åŠ çš„æ–‡æœ¬&quot;,</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//             val: 666</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(vm);</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹çœŸ<code>Vue</code>çš„æ•ˆæœï¼š<br><img src="https://cdn.zhangone.site/PhotoBed/img/blog/Vue/Vue-effect.png" alt="Vue-effect"></p><p><strong>å†æ¥çœ‹ä¸€ä¸‹<code>myVue</code></strong>:<br><img src="https://cdn.zhangone.site/PhotoBed/img/blog/Vue/myVue-effect.png" alt="myVue-effect"><br>ç¨æœ‰ç‘•ç–µï¼Œé—®é¢˜ä¸å¤§</p><h4 id="ç®€å•æ€»ç»“"><a href="#ç®€å•æ€»ç»“" class="headerlink" title="ç®€å•æ€»ç»“"></a>ç®€å•æ€»ç»“</h4><p><code>Vue</code> ä¸»è¦é€šè¿‡ä»¥ä¸‹ 4 ä¸ªæ­¥éª¤æ¥å®ç°æ•°æ®åŒå‘ç»‘å®šçš„ï¼š</p><ul><li><p>å®ç°ä¸€ä¸ªç›‘å¬å™¨ <code>Observer</code>ï¼šå¯¹æ•°æ®å¯¹è±¡è¿›è¡Œéå†ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œåˆ©ç”¨ <code>Object.defineProperty()</code> å¯¹å±æ€§éƒ½åŠ ä¸Š <code>setter</code> å’Œ <code>getter</code>ã€‚è¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘ <code>setter</code>ï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–ã€‚</p></li><li><p>å®ç°ä¸€ä¸ªè§£æå™¨ <code>Compile</code>ï¼šè§£æ <code>Vue</code> æ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡éƒ½æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œè°ƒç”¨æ›´æ–°å‡½æ•°è¿›è¡Œæ•°æ®æ›´æ–°ã€‚</p></li><li><p>å®ç°ä¸€ä¸ªè®¢é˜…è€… <code>Watcher</code>ï¼š<code>Watcher</code> è®¢é˜…è€…æ˜¯ <code>Observer</code> å’Œ <code>Compile</code> ä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ ï¼Œä¸»è¦çš„ä»»åŠ¡æ˜¯è®¢é˜… <code>Observer</code> ä¸­çš„å±æ€§å€¼å˜åŒ–çš„æ¶ˆæ¯ï¼Œå½“æ”¶åˆ°å±æ€§å€¼å˜åŒ–çš„æ¶ˆæ¯æ—¶ï¼Œè§¦å‘è§£æå™¨ <code>Compile</code> ä¸­å¯¹åº”çš„æ›´æ–°å‡½æ•°ã€‚</p></li><li><p>å®ç°ä¸€ä¸ªè®¢é˜…å™¨ <code>Dep</code>ï¼šè®¢é˜…å™¨é‡‡ç”¨ å‘å¸ƒ-è®¢é˜… è®¾è®¡æ¨¡å¼ï¼Œç”¨æ¥æ”¶é›†è®¢é˜…è€… <code>Watcher</code>ï¼Œå¯¹ç›‘å¬å™¨ <code>Observer</code> å’Œ è®¢é˜…è€… <code>Watcher</code> è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;MVC-amp-MVVM&quot;&gt;&lt;a href=&quot;#MVC-amp-MVVM&quot; class=&quot;headerlink&quot; title=&quot;MVC &amp;amp; MVVM&quot;&gt;&lt;/a&gt;MVC &amp;amp; MVVM&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¼ ç»Ÿæ“ä½œ&lt;code&gt;DOM&lt;/code&gt;æ¨¡å¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MVCï¼š&lt;code&gt;model view controller&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MVVMï¼š&lt;code&gt;model view viewModel&lt;/code&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://zhangone.site/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>redux-compose.js</title>
    <link href="https://zhangone.site/posts/83dcefb7/"/>
    <id>https://zhangone.site/posts/83dcefb7/</id>
    <published>2020-03-30T19:14:09.000Z</published>
    <updated>2020-03-30T19:14:09.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>redux</code>æ˜¯jsæ¨¡å—å¼€å‘ä¸­çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Œä¸å…¶ä»–æ¡†æ¶æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œå¦‚ï¼š<code>react</code>ã€‚ æ‰€ä»¥<code>redux</code>å¯ä»¥ç›´æ¥åœ¨åˆ«çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ç”±äºæ²¡æœ‰å’Œ<code>react</code> ç›¸å…³é€»è¾‘è€¦åˆï¼Œæ‰€ä»¥<code> redux</code> çš„æºç å¾ˆçº¯ç²¹ï¼Œç›®çš„å°±æ˜¯æŠŠå¦‚ä½•æ•°æ®ç®¡ç†å¥½ã€‚è€ŒçœŸæ­£åœ¨ <code>react</code> é¡¹ç›®ä¸­ä½¿ç”¨ <code>redux</code> æ—¶ï¼Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ª<code>react-redux</code>å½“ä½œè¿æ¥å™¨ï¼Œå»è¿æ¥<code>react</code>å’Œ <code>redux</code> ã€‚</p><span id="more"></span><h4 id="compose-js"><a href="#compose-js" class="headerlink" title="compose.js"></a>compose.js</h4><p><code>redux</code>åŸºæœ¬çš„äº”ä¸ª<code>API</code>ä¸­ï¼Œcompose.jsæ˜¯å”¯ä¸€ä¸€ä¸ªèƒ½å•ç‹¬æ‹¿å‡ºæ¥ä½¿ç”¨çš„å‡½æ•°ã€‚å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸ç”¨çš„ç»„åˆå‡½æ•°ï¼Œå’Œ<code>redux</code>æœ¬èº«è”ç³»ä¸å¤§</p><ul><li><p>å…ˆçœ‹ä¸€ä¸‹ <strong>compose.js</strong> æºç </p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">compose</span>(<span class="params">...funcs</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (funcs.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">arg</span> =&gt;</span> arg</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (funcs.<span class="property">length</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> funcs[<span class="number">0</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> funcs.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> <span class="title function_">a</span>(<span class="title function_">b</span>(...args)))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  å…¶å® <code>compose</code> å‡½æ•°åšçš„äº‹å°±æ˜¯æŠŠ <code>A(B(C(10)));</code> è¿™ç§åµŒå¥—çš„è°ƒç”¨æ–¹å¼æ”¹æˆ <code>compose(A, B, C)(10);</code> çš„æ–¹å¼è°ƒç”¨ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params">y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> y - <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">z</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŠŠä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„ç»“æœå½“ä½œå¦å¤–ä¸€ä¸ªå‡½æ•°æ‰§è¡Œçš„å®å‚</span></span><br><span class="line"><span class="comment">// A(B(C(10)));  // --&gt; 10</span></span><br><span class="line">â¬‡</span><br><span class="line"><span class="comment">// compose(A, B, C)(10); </span></span><br></pre></td></tr></table></figure></li></ul><h4 id="å…ˆç®€å•äº†è§£ä¸‹æ•°ç»„æ–¹æ³•-reduce"><a href="#å…ˆç®€å•äº†è§£ä¸‹æ•°ç»„æ–¹æ³•-reduce" class="headerlink" title="å…ˆç®€å•äº†è§£ä¸‹æ•°ç»„æ–¹æ³• reduce"></a>å…ˆç®€å•äº†è§£ä¸‹æ•°ç»„æ–¹æ³• <code>reduce</code></h4><ul><li>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev,cur,index,arr</span>)&#123;</span><br><span class="line">  <span class="comment">// å‚æ•°ä»‹ç»</span></span><br><span class="line">  arr è¡¨ç¤ºåŸæ•°ç»„ï¼›</span><br><span class="line">prev è¡¨ç¤ºä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶çš„è¿”å›å€¼ï¼Œæˆ–è€…åˆå§‹å€¼ init;</span><br><span class="line">cur è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ï¼›</span><br><span class="line">index è¡¨ç¤ºå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ çš„ç´¢å¼•ï¼Œè‹¥æä¾› init å€¼ï¼Œåˆ™ç´¢å¼•ä¸º<span class="number">0</span>ï¼Œå¦åˆ™ç´¢å¼•ä¸º<span class="number">1</span>ï¼›</span><br><span class="line">init è¡¨ç¤ºåˆå§‹å€¼</span><br><span class="line">&#125;, init);</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨reduceåšä¸€ä¸ªnumberæ±‚å’Œ</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>].<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b);</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">    <span class="comment">// a : æ¯ä¸€æ¬¡å¾ªç¯å¤„ç†è¿”å›çš„ç»“æœï¼›å¦‚æœè®¾ç½®äº†initåˆå§‹å€¼ï¼Œç¬¬ä¸€è½®aå°±æ˜¯init</span></span><br><span class="line">    <span class="comment">// b : ä¾æ¬¡å¾ªç¯ä¸­æ•°ç»„çš„æ¯ä¸€é¡¹</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ‹†åˆ†reduceæ‰§è¡Œæ­¥éª¤ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹å¤„ç†æµç¨‹"><a href="#æ‹†åˆ†reduceæ‰§è¡Œæ­¥éª¤ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹å¤„ç†æµç¨‹" class="headerlink" title="æ‹†åˆ†reduceæ‰§è¡Œæ­¥éª¤ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹å¤„ç†æµç¨‹"></a>æ‹†åˆ†<code>reduce</code>æ‰§è¡Œæ­¥éª¤ï¼Œç®€å•æ¢³ç†ä¸€ä¸‹å¤„ç†æµç¨‹</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">compose</span>(<span class="params">...funcs</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (funcs.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (funcs.<span class="property">length</span> === <span class="number">1</span>) <span class="keyword">return</span> funcs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç®­å¤´å‡½æ•°è½¬æˆfunctionå½¢å¼</span></span><br><span class="line">    <span class="keyword">return</span> funcs.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">a</span>(<span class="title function_">b</span>(...args));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [A, B, C, D, E, F] ï¼š å‡è®¾æœ‰å…­ä¸ªå‡½æ•°</span></span><br><span class="line">    <span class="comment">// ç¬¬ä¸€è½®</span></span><br><span class="line">    a = A, b = B</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123; <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(...args)) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬äºŒè½®</span></span><br><span class="line">    a = <span class="keyword">function</span> (<span class="params">...args</span>) &#123; <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(...args)) &#125;, b = C</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123; <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(...args)) &#125;(<span class="title function_">C</span>(...args))</span><br><span class="line">    &#125;</span><br><span class="line">        ==&gt; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">                     ...args ==&gt; [<span class="title function_">C</span>(...args)]</span><br><span class="line">                 <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(<span class="title function_">C</span>(...args))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¬¬ä¸‰è½®</span></span><br><span class="line">    a = <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123; <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(...args)) &#125;(<span class="title function_">C</span>(...args))</span><br><span class="line">    &#125;, b = D</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123; <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(...args)) &#125;(<span class="title function_">C</span>(...args))</span><br><span class="line">        &#125;(<span class="title function_">D</span>(...args))</span><br><span class="line">    &#125;</span><br><span class="line">        ==&gt; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">                     ...args ==&gt; [<span class="title function_">D</span>(...args)]</span><br><span class="line">                 <span class="keyword">return</span> <span class="title function_">A</span>(<span class="title function_">b</span>(<span class="title function_">C</span>(<span class="title function_">D</span>(...args)))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ............è‡³æ•°ç»„æœ€åä¸€é¡¹ä¹‹åç»“æŸå¾ªç¯ --&gt;</span></span><br><span class="line">    <span class="comment">// ===&gt;  A(B(C(D(E(F(...args)))))) --&gt; (10)  --&gt;  A(B(C(D(E(F(10))))))</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> funcs.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> <span class="title function_">a</span>(<span class="title function_">b</span>(...args)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compose(A, B, C)(10);</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">compose</span>(A, B, C)(<span class="number">10</span>)); <span class="comment">// --&gt; 10</span></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>compose</code> å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆå¸¸è§ã€‚è¿™é‡Œ<code>redux</code>çš„å¯¹ <code>compose</code> å®ç°å¾ˆç®€å•ï¼Œç†è§£èµ·æ¥å´æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºå¯¹ <code>Array.prototype.reduce</code> è¿™ä¸ªæ•°ç»„å‡½æ•°æ²¡æœ‰é‚£ä¹ˆç†Ÿç»ƒï¼Œå…¶æ¬¡å°±æ˜¯è¿™ç§æ¥å—å‡½æ•°è¿”å›å‡½æ•°çš„å†™æ³•ï¼Œå†é…ä¸Šç®­å¤´å‡½æ•°å‡ ä¸ªè¿ç»­çš„ &#x3D;&gt; ï¼Œè®©äººå®¹æ˜“çœ‹æ™•ã€‚ä¸è¿‡åªè¦æŒ‰æ‰§è¡Œæ­¥éª¤æ…¢æ…¢çš„æ‹æ‰§è¡Œé¡ºåºï¼Œè¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ã€‚ã€‚å—~</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;redux&lt;/code&gt;æ˜¯jsæ¨¡å—å¼€å‘ä¸­çš„ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ï¼Œä¸å…¶ä»–æ¡†æ¶æ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œå¦‚ï¼š&lt;code&gt;react&lt;/code&gt;ã€‚ æ‰€ä»¥&lt;code&gt;redux&lt;/code&gt;å¯ä»¥ç›´æ¥åœ¨åˆ«çš„ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚ç”±äºæ²¡æœ‰å’Œ&lt;code&gt;react&lt;/code&gt; ç›¸å…³é€»è¾‘è€¦åˆï¼Œæ‰€ä»¥&lt;code&gt; redux&lt;/code&gt; çš„æºç å¾ˆçº¯ç²¹ï¼Œç›®çš„å°±æ˜¯æŠŠå¦‚ä½•æ•°æ®ç®¡ç†å¥½ã€‚è€ŒçœŸæ­£åœ¨ &lt;code&gt;react&lt;/code&gt; é¡¹ç›®ä¸­ä½¿ç”¨ &lt;code&gt;redux&lt;/code&gt; æ—¶ï¼Œæ˜¯éœ€è¦æœ‰ä¸€ä¸ª&lt;code&gt;react-redux&lt;/code&gt;å½“ä½œè¿æ¥å™¨ï¼Œå»è¿æ¥&lt;code&gt;react&lt;/code&gt;å’Œ &lt;code&gt;redux&lt;/code&gt; ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="redux" scheme="https://zhangone.site/tags/redux/"/>
    
  </entry>
  
  <entry>
    <title>ES6-PromiseåŸç†å®ç°</title>
    <link href="https://zhangone.site/posts/dfe13b31/"/>
    <id>https://zhangone.site/posts/dfe13b31/</id>
    <published>2020-03-21T16:42:08.000Z</published>
    <updated>2020-03-21T16:42:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€å•äº†è§£ä¸€ä¸‹Promise"><a href="#ç®€å•äº†è§£ä¸€ä¸‹Promise" class="headerlink" title="ç®€å•äº†è§£ä¸€ä¸‹Promise"></a>ç®€å•äº†è§£ä¸€ä¸‹Promise</h2><p><strong>åœ¨é˜®ä¸€å³°å¤§ç¥çš„ES6å…¥é—¨æ–‡ç« ä¸­ï¼Œå…³äºå¯¹Promiseçš„ä»‹ç»</strong>ï¼š</p><blockquote><p><code>Promise</code> æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†<code>Promise</code>å¯¹è±¡ã€‚</p></blockquote><blockquote><p>æ‰€è°“<code>Promise</code>ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼Œ<code>Promise</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚<code>Promise</code> æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p></blockquote><span id="more"></span><blockquote><p><code>Promise</code>å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚</p><p>ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚<code>Promise</code>å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰å’Œ<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯<code>Promise</code>è¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚</p><p>ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»<code>pending</code>å˜ä¸º<code>fulfilled</code>å’Œä»<code>pending</code>å˜ä¸º<code>rejected</code>ã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœï¼Œè¿™æ—¶å°±ç§°ä¸º<code> resolved</code>ï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹<code>Promise</code>å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶<code>ï¼ˆEventï¼‰</code>å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚</p></blockquote><p>æœ‰äº†<code>Promise</code>å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼Œ<code>Promise</code>å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</p><p><code>Promise</code>ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆ<code>Promise</code>ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code>å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äº<code>pending</code>çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</p><p>å¦‚æœæŸäº›äº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨ <code>Stream</code> æ¨¡å¼æ˜¯æ¯”éƒ¨ç½²<code>Promise</code>æ›´å¥½çš„é€‰æ‹©ã€‚</p><h2 id="å›è°ƒåœ°ç‹±"><a href="#å›è°ƒåœ°ç‹±" class="headerlink" title="å›è°ƒåœ°ç‹±"></a>å›è°ƒåœ°ç‹±</h2><p>ä»€ä¹ˆæ˜¯ <strong>å›è°ƒåœ°ç‹±</strong>ï¼ˆCallback Hellï¼‰ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªæ˜¾å¾—å¾ˆéœ¸æ°”å´æä¸ºä»¤æ‰€æœ‰JSå¼€å‘è€…æ„Ÿåˆ°æ— æ¯”åŒçƒ¦çš„åå­—â€”â€” <strong>å„è¿é‡‘å­—å¡”</strong>ï¼ˆPyramid of doomï¼‰ã€‚ä¹‹æ‰€ä»¥å…ˆäº†è§£è¿™äº›ï¼Œè¿™æ˜¯å› ä¸º<code>Promise</code>æœ¬æ¥å°±æ˜¯ä¸ºäº†é¿å…åœ¨å¤šé‡å¼‚æ­¥æ“ä½œæ—¶äº§ç”Ÿæ·±å±‚æ¬¡çš„åµŒå¥—å›è°ƒæå‡ºçš„ä¸€ç§æ–°å‹å¼‚æ­¥è§£å†³æ–¹æ¡ˆã€‚</p><p><strong>ä¸¾ä¸ªåˆ—å­</strong>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">load</span> (src,cb) &#123;</span><br><span class="line">     <span class="keyword">let</span> es = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">     es.<span class="property">src</span> = src </span><br><span class="line">     <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(es)</span><br><span class="line">     es.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123; <span class="title function_">cb</span>() &#125;</span><br><span class="line">     es.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123; <span class="title function_">cb</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;failed to load &#x27;</span>+src )) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">load</span>(<span class="string">&#x27;./t1.js&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err === <span class="literal">undefined</span>) &#123;</span><br><span class="line">         <span class="title function_">f1</span>();      <span class="comment">// t1å†…éƒ¨çš„å‡½æ•°</span></span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ˜¯å¾ˆå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œéšä¾¿æ·»åŠ ä¸€ä¸ªjsï¼Œç„¶åæ‰§è¡Œé‡Œé¢çš„å†…å®¹ã€‚ ä½†æ˜¯ä¹Ÿä¼šéœ€è¦åŠ è½½å¤šä¸ªè„šæœ¬ï¼ŒåŒæ—¶æ‰§è¡Œä¸€äº›å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">load</span>(<span class="string">&#x27;./t1.js&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="title function_">f1</span>();      <span class="comment">// t1å†…éƒ¨çš„å‡½æ•°</span></span><br><span class="line">        <span class="title function_">load</span>(<span class="string">&#x27;./t2.js&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(err === <span class="literal">undefined</span>) &#123;</span><br><span class="line">                <span class="title function_">f2</span>();      <span class="comment">// t2å†…éƒ¨çš„å‡½æ•°</span></span><br><span class="line">                <span class="title function_">load</span>(<span class="string">&#x27;./t3.js&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(err === <span class="literal">undefined</span>) &#123;</span><br><span class="line">                        <span class="title function_">f3</span>();      <span class="comment">// t3å†…éƒ¨çš„å‡½æ•°</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„å¤šé‡æ“ä½œï¼Œä¼šéšç€åµŒå¥—å±‚æ•°å˜æ·±é€æ¸å¤±æ§ï¼Œäºæ˜¯ä¾¿å½¢æˆäº†è‡­åæ˜­è‘—çš„å„è¿é‡‘å­—å¡”ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯<code>Promise</code>ä¾¿åº”è¿è€Œç”Ÿâ€”â€”ä¸»è¦æ˜¯å°†<strong>æ·±å±‚å›è°ƒ</strong>å˜æˆäº†<strong>é“¾å¼è°ƒç”¨</strong>ï¼Œè¿™æ ·èƒ½æ›´ç¬¦åˆäººç±»é€»è¾‘ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šå…ˆè®©<code>load</code>è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯ä¸ª load è¿”å›ä¸€ä¸ª Promise å¯¹è±¡</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªPromiseå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª then æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">load</span> (src) &#123;</span><br><span class="line">    <span class="keyword">let</span> es = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line">    es.<span class="property">src</span> = src </span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">append</span>(es)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        es.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123; <span class="title function_">resolve</span>(<span class="string">&#x27;success &#x27;</span>+ src) &#125;</span><br><span class="line">        es.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123; <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;failed to load &#x27;</span>+src )) &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼š é“¾å¼è°ƒç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">load</span>(<span class="string">&#x27;./t1.js&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">        <span class="title function_">f1</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">load</span>(<span class="string">&#x27;./t2.js&#x27;</span>)   <span class="comment">//è¿™é‡Œè¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line">    &#125;)                           <span class="comment">// ç›´æ¥å°±èƒ½ç”¨ then</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">        <span class="title function_">f2</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">load</span>(<span class="string">&#x27;./t3.js&#x27;</span>)<span class="comment">// å†è¿”å›ä¸€ä¸ªPromise</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> &#123;           </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">        <span class="title function_">f3</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">er</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(er.<span class="property">message</span>);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„ä»£ç çœ‹ç€å°±å¾ˆèˆ’æœ~</p><p><code>Promise</code>æå…¶é‡è¦çš„ç‰¹å¾æ˜¯é“¾å¼è°ƒç”¨ï¼Œæ¯ä¸ª<code>load</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>ï¼Œè¯¥<code>Promise</code>åœ¨<strong>ç¡®å®šæ˜¯å¼‚æ­¥åŠ è½½æˆåŠŸè¿˜æ˜¯å¤±è´¥ä¹‹å</strong>å°±ä¼šè¢«è¿”å›ç„¶åæä¾›ç»™ä¸‹ä¸€ä¸ªæ“ä½œä½¿ç”¨ã€‚ ä¸€ä¸ª<code>Promise</code>é˜Ÿåˆ—å°±åƒæ˜¯ä½¿ç”¨åŒæ­¥ä»£ç æ¥å®ç°å¼‚æ­¥æ“ä½œä¸€æ ·ã€‚</p><ul><li>å¼•ç”¨ MDN ä¸Šçš„<code>Promise</code>æ¦‚å¿µï¼š<blockquote><p><code>Promise</code> å¯¹è±¡æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆä»£ç†ä¸€ä¸ªå€¼ï¼‰ï¼Œè¢«ä»£ç†çš„å€¼åœ¨<code>Promise</code>å¯¹è±¡åˆ›å»ºæ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„ã€‚å®ƒå…è®¸ä½ ä¸ºå¼‚æ­¥æ“ä½œçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚ è¿™è®©å¼‚æ­¥æ–¹æ³•å¯ä»¥åƒåŒæ­¥æ–¹æ³•é‚£æ ·è¿”å›å€¼ï¼Œä½†å¹¶ä¸æ˜¯ç«‹å³è¿”å›æœ€ç»ˆæ‰§è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ä»£è¡¨æœªæ¥å‡ºç°çš„ç»“æœçš„<code>Promise</code>å¯¹è±¡</p></blockquote></li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Javascript ä¸­çš„ Promise ä¹Ÿå‚è€ƒäº† Promise/A+ è§„èŒƒã€‚</span><br></pre></td></tr></table></figure><h2 id="ES6ä¸­çš„PromiseåŸç†å®ç°"><a href="#ES6ä¸­çš„PromiseåŸç†å®ç°" class="headerlink" title="ES6ä¸­çš„PromiseåŸç†å®ç°"></a>ES6ä¸­çš„<code>Promise</code>åŸç†å®ç°</h2><p><code>Promise</code>çš„ç”¨æ³•å°±ä¸å¤šä»‹ç»äº†ã€‚å¯ä»¥å» <strong>MDN</strong>çš„å®˜æ–¹æ–‡æ¡£ æˆ–è€… é˜®ä¸€å³°çš„ES6å…¥é—¨æ•™ç¨‹è¯¦æƒ…äº†è§£</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise principle</span></span><br><span class="line"><span class="comment">// å‘å¸ƒè®¢é˜…</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">excutor</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">PromiseStatus</span> = <span class="string">&quot;pending&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">resolveEvent</span> = [];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">rejectEvent</span> = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">...arg</span>) =&gt; &#123;</span><br><span class="line">            <span class="comment">// Promiseå®ä¾‹çŠ¶æ€åªèƒ½æ”¹å˜ä¸€æ¬¡</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseStatus</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">PromiseStatus</span> = <span class="string">&quot;fulfilled&quot;</span>;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">resolveEvent</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">typeof</span> item === <span class="string">&quot;function&quot;</span> ? <span class="title function_">item</span>(arg) : <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;, <span class="number">0</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">reject</span> = (<span class="params">...arg</span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">PromiseStatus</span> !== <span class="string">&quot;pending&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">PromiseStatus</span> = <span class="string">&quot;rejected&quot;</span>;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">rejectEvent</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">typeof</span> item === <span class="string">&quot;function&quot;</span> ? <span class="title function_">item</span>(arg) : <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœç”¨functionå®šä¹‰çš„resolve/reject, å¯ä»¥ç”¨bindå®šå‘ä¸€ä¸‹thisæŒ‡å‘</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="title function_">excutor</span>(resolve, reject);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// prototype </span></span><br><span class="line">    <span class="title function_">then</span>(<span class="params">resolveFn, rejectFn</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> resolveFn !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            resolveFn = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> rejectFn !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            rejectFn = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é“¾å¼è°ƒç”¨thenï¼Œé»˜è®¤è¿”å›çš„æ˜¯ä¸€ä¸ªæˆåŠŸæ€çš„Promiseå®åˆ—</span></span><br><span class="line">        <span class="comment">// å¦‚æœä¸Šä¸€ä¸ªthenå…¶å›è°ƒæ‰§è¡Œè¿”å›çš„æ˜¯Promiseå®åˆ—ï¼Œé‚£ä¹ˆé»˜è®¤è¿”å›çš„çŠ¶æ€å—åˆ°å…¶å½±å“</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">resolveEvent</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// push ä¸€ä¸ªåŒ¿åç®­å¤´å‡½æ•°ï¼Œå¼‚æ­¥æ‰§è¡Œçš„æ˜¯è¿™ä¸ªåŒ¿åå‡½æ•°ã€</span></span><br><span class="line">                <span class="comment">// é€šè¿‡ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾åˆ°thençš„å›è°ƒè®©å…¶æ‰§è¡Œï¼Œåˆ¤æ–­å…¶è¿”å›å€¼</span></span><br><span class="line">                <span class="keyword">const</span> result = <span class="title function_">resolveFn</span>(...arg);</span><br><span class="line">                result <span class="keyword">instanceof</span> <span class="title class_">MyPromise</span> ? result.<span class="title function_">then</span>(resolve, reject) : <span class="title function_">resolve</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">rejectEvent</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> result = <span class="title function_">rejectFn</span>(...arg);</span><br><span class="line">                result <span class="keyword">instanceof</span> <span class="title class_">MyPromise</span> ? result.<span class="title function_">then</span>(resolve, reject) : <span class="title function_">resolve</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç®€æ˜“ç‰ˆçš„<code>Promise</code>å®ç°äº†ï¼Œ<code>Promise</code>åŸå‹ä¸Šçš„æ–¹æ³•è¿˜æœ‰å¥½å‡ ä¸ªï¼Œè¿™é‡Œåªç®€å•å®ç°äº†æœ€å¸¸ç”¨çš„ <code>then</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mp1 = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Promise callback&quot;</span>);</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;resolve ok&quot;</span>);</span><br><span class="line">    <span class="comment">// reject(&quot;reject not&quot;);</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mp1.<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;, <span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸Šä¸€ä¸ªthenå›è°ƒæ‰§è¡Œæ—¶æ²¡æœ‰è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œé‚£ä¹ˆä¼šé»˜è®¤è¿”å›ä¸€ä¸ªæˆåŠŸæ€çš„Promiseå®åˆ—</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str); <span class="comment">// undefined</span></span><br><span class="line">&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;rejected callback 2&quot;</span>);  <span class="comment">// é»˜è®¤æˆåŠŸæ€ï¼Œè¿™é‡Œçš„rejectedå›è°ƒä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;resolve callback 3&quot;</span>); <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;synchronization&quot;</span>);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/ES6/Promise.then/Promise-then.png"></p><p>è¯•äº†å‡ ä¸‹ï¼Œå®Œç¾å®ç°~   å— ~~</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;ç®€å•äº†è§£ä¸€ä¸‹Promise&quot;&gt;&lt;a href=&quot;#ç®€å•äº†è§£ä¸€ä¸‹Promise&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•äº†è§£ä¸€ä¸‹Promise&quot;&gt;&lt;/a&gt;ç®€å•äº†è§£ä¸€ä¸‹Promise&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;åœ¨é˜®ä¸€å³°å¤§ç¥çš„ES6å…¥é—¨æ–‡ç« ä¸­ï¼Œå…³äºå¯¹Promiseçš„ä»‹ç»&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Promise&lt;/code&gt; æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†&lt;code&gt;Promise&lt;/code&gt;å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ‰€è°“&lt;code&gt;Promise&lt;/code&gt;ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼Œ&lt;code&gt;Promise&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚&lt;code&gt;Promise&lt;/code&gt; æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ES6" scheme="https://zhangone.site/tags/ES6/"/>
    
  </entry>
  
  <entry>
    <title>redux-æ ¸å¿ƒåŸç†å®ç°</title>
    <link href="https://zhangone.site/posts/a1c455e0/"/>
    <id>https://zhangone.site/posts/a1c455e0/</id>
    <published>2020-02-14T17:29:15.000Z</published>
    <updated>2020-04-09T16:32:11.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="reduxæ˜¯ä»€ä¹ˆ"><a href="#reduxæ˜¯ä»€ä¹ˆ" class="headerlink" title="reduxæ˜¯ä»€ä¹ˆ"></a>reduxæ˜¯ä»€ä¹ˆ</h3><blockquote><p>å¾ˆå¤šäººè®¤ä¸ºreduxå¿…é¡»è¦ç»“åˆReactä½¿ç”¨ï¼Œå…¶å®å¹¶ä¸æ˜¯çš„ï¼ŒRedux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œåªè¦ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€ååˆ†å¤æ‚ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨Reduxç®¡ç†ä½ çš„é¡¹ç›®çŠ¶æ€ï¼Œå®ƒå¯ä»¥ä½¿ç”¨åœ¨reactä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­åœ¨Vueä¸­ï¼Œå½“ç„¶ä¹Ÿé€‚ç”¨å…¶ä»–çš„æ¡†æ¶ã€‚</p></blockquote><span id="more"></span><h4 id="redux-å·¥ä½œåŸç†"><a href="#redux-å·¥ä½œåŸç†" class="headerlink" title="redux å·¥ä½œåŸç†"></a>redux å·¥ä½œåŸç†</h4><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/React-Redux/85eda507gy1fpkak6pk3pj20p10e1abo.jpg"></p><ol><li>é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°æœ€ä¸Šé¢çš„ <strong>state</strong></li><li>åœ¨ <strong>react</strong> ä¸­ <strong>state</strong> å†³å®šäº†è§†å›¾ï¼ˆuiï¼‰ï¼Œ<strong>state</strong>çš„å˜åŒ–å°±ä¼šè°ƒç”¨<strong>React</strong>çš„ <strong>render</strong>ï¼ˆï¼‰æ–¹æ³•ï¼Œä»è€Œæ”¹å˜è§†å›¾</li><li>ç”¨æˆ·é€šè¿‡ä¸€äº›äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼Œç§»åŠ¨é¼ æ ‡ï¼‰å°±ä¼šåƒ<strong>reducer</strong>æ´¾å‘ä¸€ä¸ª<strong>action</strong></li><li><strong>reducer</strong>æ¥æ”¶åˆ°<strong>action</strong>åå°±ä¼šå»æ›´æ–°<strong>state</strong></li><li><strong>store</strong>æ˜¯åŒ…å«äº†æ‰€æœ‰äº†<strong>state</strong>ï¼Œå¯ä»¥æŠŠä»–çœ‹åšæ‰€æœ‰çŠ¶æ€çš„é›†åˆ</li></ol><blockquote><p><code>redux</code>çš„ä¸€äº›<code>api</code>åŠä½¿ç”¨æ–¹æ³•è¿™é‡Œä¸å†è¿‡å¤šå™è¿°  <strong>è¯¦æƒ…å¯ä»¥äº†è§£ redux æ–‡æ¡£</strong>ï¼š<a href="https://www.redux.org.cn/">redux ä¸­æ–‡æ–‡æ¡£</a></p></blockquote><h3 id="redux-æºç å‰–æ-ä¸ç‰ˆå®ç°"><a href="#redux-æºç å‰–æ-ä¸ç‰ˆå®ç°" class="headerlink" title="redux æºç å‰–æ, ä¸ç‰ˆå®ç°"></a>redux æºç å‰–æ, ä¸ç‰ˆå®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// redux : ç²¾ç®€æºç ï¼Œåªå†™äº†æ ¸å¿ƒåŸç†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createStore</span>(<span class="params">reducer</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºstoreçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">let</span> state;</span><br><span class="line">    <span class="comment">// storeäº‹ä»¶æ± </span></span><br><span class="line">    <span class="keyword">let</span> listeners = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–stateçŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getState</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// reduxä¸å…è®¸ç›´æ¥æ›´æ”¹stateï¼Œä½†æ˜¯æºç ä¸­åˆæ²¡æœ‰åšç›¸åº”çš„å¤„ç†</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œç”¨JSONåšä¸€ä¸ªç®€å•çš„æ·±å…‹éš†å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ´¾å‘æäº¤</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">dispatch</span>(<span class="params">action</span>) &#123;</span><br><span class="line">        state = <span class="title function_">reducer</span>(state, action);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¯æ¬¡dispatchä»¥åï¼Œéƒ½è¦å‘å¸ƒä¸€ä¸‹äº‹ä»¶æ± </span></span><br><span class="line">        listeners.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">&quot;function&quot;</span>) <span class="title function_">item</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¢é˜…</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">subscribe</span>(<span class="params">func</span>) &#123;</span><br><span class="line">        <span class="comment">// åœ¨reduxæºç ä¸­å¹¶æ²¡æœ‰åšäº‹ä»¶æ± å»é‡ï¼› ä¸ªäººè§‰å¾—è¦åšä¸€ä¸‹å»é‡</span></span><br><span class="line">        <span class="keyword">if</span> (!listeners.<span class="title function_">includes</span>(func)) listeners.<span class="title function_">push</span>(func);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// subscribe(): ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ä»äº‹ä»¶æ± ä¸­ç§»é™¤å½“å‰äº‹ä»¶ (å–æ¶ˆè®¢é˜…)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">unSubscribe</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸ºé˜²æ­¢æ•°ç»„å¡Œé™·é—®é¢˜ï¼Œè¿™é‡Œç”¨filteræ›¿ä»£spliceç§»é™¤æ•°ç»„é¡¹</span></span><br><span class="line">            listeners = listeners.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item !== func);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–stateï¼Œåˆ›å»ºstoreæ—¶é»˜è®¤æ´¾å‘ä¸€æ¬¡</span></span><br><span class="line">    <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹æ´¾å‘çš„typeå€¼ä¸€å®šä¸è¦å’Œé¡¹ç›®ä¸­çš„typeå€¼æœ‰é‡å¤çš„ï¼›è¿™é‡Œreduxæºç åšäº†ä¸€ä¸ªéšæœºæ•°æˆªå–å¤„ç†è½¬å­—ç¬¦ä¸²æ‰€ç”Ÿæˆçš„ä¸€ä¸ªå°½å¯èƒ½ä¸é‡å¤çš„typeåˆå§‹å€¼</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;@@redux/INIT&quot;</span> + <span class="title class_">Date</span>.<span class="title function_">now</span>()  <span class="comment">// ç®€å•æ“ä½œä¸€ä¸‹ï¼Œå…¶å®ä¹Ÿå¯ä»¥ä¸ä¼ type</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getState,</span><br><span class="line">        dispatch,</span><br><span class="line">        subscribe</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// combineReducers: åˆå¹¶reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">combineReducers</span>(<span class="params">reducers</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºstoreåˆå§‹åŒ–stateã€‚é»˜è®¤ = &#123;&#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">state = &#123;&#125;, action</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> combineState = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> reducers) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!reducers.<span class="title function_">hasOwnProperty</span>(key)) <span class="keyword">break</span>;</span><br><span class="line">            combineState[key] = reducers[key](state[key], action);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> combineState;</span><br><span class="line">        <span class="comment">// æœ€ç»ˆstate : &#123; module1: &#123;..&#125;, module2: &#123;..&#125;, .....&#125;</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–åˆ›å»ºä¹‹åï¼Œä»¥åçš„æ¯ä¸€æ¬¡æ‰§è¡Œdispatchï¼Œéƒ½ä¼šè®©æ¯ä¸€ä¸ªç»„ä»¶æ¨¡å—ä¸‹çš„reduceræ‰§è¡Œï¼Œä¸”ä¼šæŠŠstateä¸­å¯¹åº”ç»„ä»¶åçš„å¯¹åº”æ•°æ®ä¼ å…¥reducer   ==&gt;  reducer(state.module, action)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œåªç²¾ç®€å†™äº†ä¸€ä¸‹<code>redux</code>æ ¸å¿ƒå·¥ä½œåŸç†, è¿˜æœ‰ä¸€äº›<code>bindActionCreators</code>ã€<code>applyMiddleware</code>ã€<code>compose</code>â€¦..å…¶ä»–çš„<code>api</code>åç»­å†è¯¦æƒ…æ¢ç©¶ä¸€ä¸‹</p><p>~~å—äº†</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;reduxæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#reduxæ˜¯ä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;reduxæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;/a&gt;reduxæ˜¯ä»€ä¹ˆ&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;å¾ˆå¤šäººè®¤ä¸ºreduxå¿…é¡»è¦ç»“åˆReactä½¿ç”¨ï¼Œå…¶å®å¹¶ä¸æ˜¯çš„ï¼ŒRedux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œåªè¦ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€ååˆ†å¤æ‚ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ä½¿ç”¨Reduxç®¡ç†ä½ çš„é¡¹ç›®çŠ¶æ€ï¼Œå®ƒå¯ä»¥ä½¿ç”¨åœ¨reactä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­åœ¨Vueä¸­ï¼Œå½“ç„¶ä¹Ÿé€‚ç”¨å…¶ä»–çš„æ¡†æ¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="redux" scheme="https://zhangone.site/tags/redux/"/>
    
  </entry>
  
  <entry>
    <title>VUE-component</title>
    <link href="https://zhangone.site/posts/b0880b06/"/>
    <id>https://zhangone.site/posts/b0880b06/</id>
    <published>2019-12-11T04:22:59.000Z</published>
    <updated>2019-12-11T04:22:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="VUEä¸­çš„ç»„ä»¶"><a href="#VUEä¸­çš„ç»„ä»¶" class="headerlink" title="VUEä¸­çš„ç»„ä»¶"></a>VUEä¸­çš„ç»„ä»¶</h2><p>ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li><p>æ¯ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾</p></li><li><p>å¯å¤ç”¨</p></li><li><p>æ–¹ä¾¿ç»´æŠ¤</p></li><li><p>æ–¹ä¾¿æ‹†åˆ†</p></li><li><p>æ¯ä¸ªç»„ä»¶ä½œç”¨åŸŸéš”ç¦»ï¼ˆäº’ä¸å¹²æ‰°ï¼‰</p></li><li><p>æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</p></li><li><p>æœ‰è‡ªå·±çš„å“åº”å¼æ•°æ®å’Œå„ç§æ–¹æ³•ï¼ˆäº‹ä»¶ï¼‰</p></li><li><p>â€¦</p><span id="more"></span></li></ul><p><strong>ç»„ä»¶çš„ç»„ç»‡</strong></p><ul><li>é€šå¸¸ä¸€ä¸ªåº”ç”¨ä¼šä»¥ä¸€æ£µåµŒå¥—çš„ç»„ä»¶æ ‘çš„å½¢å¼æ¥ç»„ç»‡ï¼š<br>  <img src="https://cn.vuejs.org/images/components.png" alt="å›¾ç‰‡æŒ‚äº†"></li></ul><h3 id="1-å…¨å±€ç»„ä»¶-amp-ç»„ä»¶çš„åŸºæœ¬è¯­æ³•"><a href="#1-å…¨å±€ç»„ä»¶-amp-ç»„ä»¶çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="1. å…¨å±€ç»„ä»¶ &amp; ç»„ä»¶çš„åŸºæœ¬è¯­æ³•"></a>1. å…¨å±€ç»„ä»¶ &amp; ç»„ä»¶çš„åŸºæœ¬è¯­æ³•</h3><blockquote><p>åœ¨ä»»ä½•ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ˆä¸éœ€è¦å¼•å…¥ï¼Œç›´æ¥åœ¨ç»„ä»¶æ¨¡æ¿ä¸­è°ƒç”¨å³å¯ï¼‰<br><code>Vue.component(componentName,options)</code></p></blockquote><ul><li><p>ç»„ä»¶åå­—ä¸­çš„ä¸€ç‚¹è§„èŒƒ</p><ul><li><code>kebab-case</code>ï¼šåªèƒ½<code>&lt;kebab-case&gt;</code>è°ƒç”¨</li><li><code>PasalCase</code>ï¼šæ—¢å¯ç±»ä¼¼å‰ç§æ–¹å¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥<code>&lt;pasalcase&gt;</code>æ–¹å¼è°ƒç”¨ï¼ˆæ¸²æŸ“çš„æ—¶å€™ä¼šæŠŠæ‰€æœ‰å•è¯å­—æ¯éƒ½æ¸²æŸ“ä¸ºå°å†™ï¼Œä½†æ˜¯åœ¨ç»„ä»¶ä¸­å¯ä»¥å¤§å†™ï¼‰</li></ul></li><li><p>è°ƒç”¨ç»„ä»¶çš„ç»†èŠ‚è§„èŒƒ</p><ul><li>é‡‡ç”¨åŒé—­åˆæ–¹å¼</li><li>å•é—­åˆæ–¹å¼ä¸ç¬¦åˆ<code>w3c</code>è§„èŒƒï¼ˆåªèƒ½è¯†åˆ«ä¸€ä¸ªï¼‰</li></ul></li><li><p>template</p><ul><li><p>æ¯ä¸ªç»„ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ </p></li><li><p>æ¨¡æ¿å­—ç¬¦ä¸²æ–¹å¼</p></li><li><p>templateæ ‡è®°æ–¹å¼</p></li><li><p>slotæ’æ§½å¤„ç†</p></li><li><p>åŸºç¡€æ“ä½œ</p></li><li><p>å¤šæ’æ§½çš„æŒ‡å®š</p></li><li><p>dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¿è¯ä¸åŒç»„ä»¶ä¹‹é—´çš„æ•°æ®äº’ä¸å¹²æ‰°ï¼ˆè¿”å›çš„å¯¹è±¡ä¸­åˆå§‹åŒ–æ•°æ®ï¼‰</p></li><li><p>â€¦</p></li></ul></li></ul><h3 id="2-å±€éƒ¨ç»„ä»¶"><a href="#2-å±€éƒ¨ç»„ä»¶" class="headerlink" title="2. å±€éƒ¨ç»„ä»¶"></a>2. å±€éƒ¨ç»„ä»¶</h3><ul><li>åˆ›å»ºç»„ä»¶ï¼š<code>let</code> <code>componenName=&#123;â€¦&#125;</code></li><li>åŸºäº<code>components</code>å±æ€§å£°æ˜ç»„ä»¶ï¼šæƒ³ç”¨å“ªä¸ªç»„ä»¶éœ€è¦å…ˆå£°æ˜</li><li>ä½¿ç”¨ç»„ä»¶</li></ul><h3 id="3-ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹çˆ¶ä¼ å­ï¼špropså±æ€§ä¼ é€’"><a href="#3-ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹çˆ¶ä¼ å­ï¼špropså±æ€§ä¼ é€’" class="headerlink" title="3. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹çˆ¶ä¼ å­ï¼špropså±æ€§ä¼ é€’"></a>3. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹çˆ¶ä¼ å­ï¼š<code>props</code>å±æ€§ä¼ é€’</h3><ul><li><p>çˆ¶ç»„ä»¶è°ƒç”¨åˆ°çš„æ—¶å€™</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component aa=&#x27;AAAA&#x27; :bb=&#x27;xxx&#x27;&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure></li><li><p>å­ç»„ä»¶ä¸­åŸºäº<code>props</code>å£°æ˜éœ€è¦æ¥æ”¶çš„å±æ€§å€¼</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#x27;my-component&#x27;,&#123;</span><br><span class="line">   props:[&#x27;aa&#x27;,&#x27;bb&#x27;],</span><br><span class="line">   ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><code>props</code>ä¸­å£°æ˜çš„å±æ€§å’Œ<code>data</code>ä¸€æ ·ï¼Œæ˜¯å“åº”å¼æ•°æ®ï¼ŒæŒ‚è½½åˆ°<code>vm</code>å®ä¾‹ä¸Šï¼Œå¯æ§åˆ¶è§†å›¾æ¸²æŸ“</p></li><li><p><code>props</code>ä¸­çš„ä¸€äº›ç»†èŠ‚é—®é¢˜</p><ul><li><p>å‘½åå¤§å°å†™ï¼šä¼ é€’çš„æ˜¯<code>kebab-case</code>æ ¼å¼ï¼Œ<code>props</code>ä¸­è·å–çš„æ˜¯<code>camelCase</code>é©¼å³°å‘½å</p></li><li><p>æŒ‡å®šå±æ€§çš„ç±»å‹ï¼š<code>props:&#123;xxx:String,â€¦&#125;</code></p></li><li><p>æŒ‡å®šå±æ€§çš„é»˜è®¤å€¼ï¼š<code>props:&#123;xxx:&#123;type:String,default:â€™xxxâ€™,required:true&#125;&#125;</code></p><ul><li><p><code>type</code>å¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ„ä¸ºæŒ‡å®šçš„å¤šç±»å‹çš†å¯ä»¥</p></li><li><p><code>default</code>å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°è¿”å›å€¼æ˜¯é»˜è®¤å€¼</p></li><li><p><code>validator</code>è‡ªå®šä¹‰éªŒè¯è§„åˆ™å‡½æ•°ï¼šå¿…é¡»ç¬¦åˆå‡½æ•°ä¸­æŒ‡å®šçš„è§„åˆ™ï¼Œè¿”å›<code>true/false</code></p></li></ul></li><li><p>ä¼ é€’çš„å±æ€§å€¼é»˜è®¤éƒ½æ˜¯å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¦‚æœæƒ³è¦è®©ä¼ é€’çš„å€¼æ˜¯<code>æ•°å­—</code>ã€<code>å¸ƒå°”</code>ã€<code>æ•°ç»„</code>ã€<code>å¯¹è±¡</code>ç­‰æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>v-bind</code>å¤„ç†</p></li><li><p>æ ·å¼å’Œ<code>class</code>è‡ªåŠ¨åˆå¹¶é—®é¢˜</p></li></ul></li></ul><h3 id="4-Vueçš„å•å‘æ•°æ®æµ"><a href="#4-Vueçš„å•å‘æ•°æ®æµ" class="headerlink" title="4. Vueçš„å•å‘æ•°æ®æµ"></a>4. Vueçš„å•å‘æ•°æ®æµ</h3><p>æ‰€æœ‰çš„ <code>prop</code> éƒ½ä½¿å¾—å…¶çˆ¶å­ <code>prop</code> ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§ <code>prop</code> çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚</p><p><code>Vue</code> çš„çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°æ‰§è¡Œé¡ºåºå¯ä»¥å½’ç±»ä¸ºä»¥ä¸‹ 4 éƒ¨åˆ†ï¼š</p><ul><li><p>åŠ è½½æ¸²æŸ“è¿‡ç¨‹ï¼šçˆ¶ <code>beforeCreate </code>-&gt; çˆ¶ <code>created</code> -&gt; çˆ¶ <code>beforeMount</code> -&gt; å­ <code>beforeCreate</code> -&gt; å­ <code>created </code>-&gt; å­<code>beforeMount</code>-&gt; å­ <code>mounted</code> -&gt; çˆ¶ <code>mounted</code></p></li><li><p>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼šçˆ¶ <code>beforeUpdate</code> -&gt; å­<code>beforeUpdate</code> -&gt; å­ <code>updated</code> -&gt; çˆ¶ <code>updated</code></p></li><li><p>çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼šçˆ¶ <code>beforeUpdate</code> -&gt; çˆ¶ <code>updated</code></p></li><li><p>é”€æ¯è¿‡ç¨‹ï¼šçˆ¶ <code>beforeDestroy</code> -&gt; å­ <code>beforeDestroy </code>-&gt; å­ <code>destroyed </code>-&gt; çˆ¶ <code>destroyed</code></p></li></ul><p>æ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„<code> prop</code> éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜<code> prop</code>ã€‚å¦‚æœè¿™æ ·åšäº†ï¼Œ<code>Vue</code> ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚å­ç»„ä»¶æƒ³ä¿®æ”¹æ—¶ï¼Œåªèƒ½é€šè¿‡ <code>$emit</code> æ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚æœ‰ä¸¤ç§å¸¸è§çš„è¯•å›¾æ”¹å˜ä¸€ä¸ª <code>prop</code> çš„æƒ…å½¢ :</p><ul><li><p>è¿™ä¸ª <code>prop</code> ç”¨æ¥ä¼ é€’ä¸€ä¸ªåˆå§‹å€¼ï¼›è¿™ä¸ªå­ç»„ä»¶æ¥ä¸‹æ¥å¸Œæœ›å°†å…¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°çš„ <code>prop</code> æ•°æ®æ¥ä½¿ç”¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªæœ¬åœ°çš„ <code>data</code> å±æ€§å¹¶å°†è¿™ä¸ª <code>prop</code> ç”¨ä½œå…¶åˆå§‹å€¼</p></li><li><p>è¿™ä¸ª <code>prop</code> ä»¥ä¸€ç§åŸå§‹çš„å€¼ä¼ å…¥ä¸”éœ€è¦è¿›è¡Œè½¬æ¢ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨è¿™ä¸ª <code>prop</code> çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§</p></li></ul><h3 id="5-ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹å­æ”¹çˆ¶ï¼šthis-emit"><a href="#5-ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹å­æ”¹çˆ¶ï¼šthis-emit" class="headerlink" title="5. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹å­æ”¹çˆ¶ï¼šthis.$emit"></a>5. ç»„ä»¶ä¿¡æ¯é€šè®¯ä¹‹å­æ”¹çˆ¶ï¼š<code>this.$emit</code></h3><ul><li>è®¢é˜…è‡ªå®šä¹‰äº‹ä»¶ï¼šè°ƒç”¨ç»„ä»¶çš„æ—¶å€™åŸºäºå±æ€§ä¼ é€’ä¸€ä¸ªæ–¹æ³• ï¼ˆçˆ¶ï¼‰<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component @func=<span class="string">&#x27;xxx&#x27;</span>&gt;&lt;/my-component&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">xxx</span>(<span class="params">value</span>)&#123;</span><br><span class="line">            <span class="comment">//=&gt; valueæ˜¯this.$emitæ—¶å€™ä¼ é€’çš„ç¬¬äºŒä¸ªå‚æ•°å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>é€šçŸ¥è‡ªå®šä¹‰äº‹ä»¶æ‰§è¡Œ ï¼ˆå­ï¼‰<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">xxx</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;func&#x27;</span>,<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ä¹Ÿå¯ä»¥åŸºäºæ­¤æ–¹æ³•å®ç°å…„å¼Ÿç»„ä»¶ï¼ˆçˆ¶å­ç»„ä»¶ã€éš”ä»£ç»„ä»¶ï¼‰ä¹‹é—´çš„ä¿¡æ¯é€šä¿¡<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> eventBus=<span class="keyword">new</span> <span class="title class_">Vue</span>; <span class="comment">//=&gt;åˆ›å»ºäº‹ä»¶æ€»çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Aç»„ä»¶</span></span><br><span class="line">eventBus.$on(<span class="string">&#x27;xxxA&#x27;</span>,<span class="variable language_">this</span>.<span class="property">func</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Bç»„ä»¶</span></span><br><span class="line">eventBus.$emit(<span class="string">&#x27;xxxA&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-åŸºäºrefå®ç°çˆ¶å­ç»„ä»¶ä¿¡æ¯é€šä¿¡"><a href="#6-åŸºäºrefå®ç°çˆ¶å­ç»„ä»¶ä¿¡æ¯é€šä¿¡" class="headerlink" title="6.  åŸºäºrefå®ç°çˆ¶å­ç»„ä»¶ä¿¡æ¯é€šä¿¡"></a>6.  åŸºäº<code>ref</code>å®ç°çˆ¶å­ç»„ä»¶ä¿¡æ¯é€šä¿¡</h3><ul><li><code>ref</code> å¦‚æœåœ¨æ™®é€šçš„ <code>DOM </code>å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ <code>DOM </code>å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼ŒåŸºäºæ­¤å¯ä»¥å¿«é€Ÿè·å–å’Œæ“ä½œå­ç»„ä»¶ä¸­çš„æ•°æ®</li><li><code>$parent</code>å’Œ<code>$children</code>æ˜¯è·å–çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„å®ä¾‹ï¼Œåªä¸è¿‡<code>$children</code>æ˜¯ä¸€ä¸ªæ•°ç»„é›†åˆï¼Œéœ€è¦è®°ä½ç»„ä»¶é¡ºåºæ‰å¯ä»¥</li></ul><h3 id="7-åŸºäºprovideå’Œinjectå®ç°ç¥–å…ˆä¸åä»£çš„é€šä¿¡"><a href="#7-åŸºäºprovideå’Œinjectå®ç°ç¥–å…ˆä¸åä»£çš„é€šä¿¡" class="headerlink" title="7.  åŸºäºprovideå’Œinjectå®ç°ç¥–å…ˆä¸åä»£çš„é€šä¿¡"></a>7.  åŸºäº<code>provide</code>å’Œ<code>inject</code>å®ç°ç¥–å…ˆä¸åä»£çš„é€šä¿¡</h3><ul><li>ç¥–å…ˆç»„ä»¶åŸºäº<code>provide</code>æ³¨å†Œéœ€è¦ä¾›åä»£ç»„ä»¶ä½¿ç”¨çš„æ•°æ®<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">provide</span>:&#123; <span class="comment">//=&gt;å¯¹è±¡æˆ–è€…è¿”å›å¯¹è±¡çš„å‡½æ•°éƒ½å¯ä»¥ï¼ˆå±æ€§å€¼å¦‚æœæ˜¯dataä¸­çš„æ•°æ®ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å‡½æ•°çš„æ–¹æ³•è¿›è¡Œå¤„ç†ï¼‰</span></span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">        <span class="attr">year</span>:<span class="number">10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åä»£ç»„ä»¶åŸºäº<code>inject</code>å£°æ˜éœ€è¦ä½¿ç”¨çš„æ•°æ®å¹¶è°ƒå–ä½¿ç”¨<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">inject</span>:[<span class="string">&#x27;name&#x27;</span>],</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="title function_">func</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> name=<span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p>Vueå®˜æ–¹æ–‡æ¡£  &#x3D;&#x3D;&gt;  <strong><a href="https://doc.vue-js.com/v2/guide/components-registration.html">æ·±å…¥äº†è§£ç»„ä»¶</a></strong></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;VUEä¸­çš„ç»„ä»¶&quot;&gt;&lt;a href=&quot;#VUEä¸­çš„ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;VUEä¸­çš„ç»„ä»¶&quot;&gt;&lt;/a&gt;VUEä¸­çš„ç»„ä»¶&lt;/h2&gt;&lt;p&gt;ç»„ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ¯ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¯å¤ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ–¹ä¾¿ç»´æŠ¤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ–¹ä¾¿æ‹†åˆ†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ¯ä¸ªç»„ä»¶ä½œç”¨åŸŸéš”ç¦»ï¼ˆäº’ä¸å¹²æ‰°ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ‰è‡ªå·±çš„å“åº”å¼æ•°æ®å’Œå„ç§æ–¹æ³•ï¼ˆäº‹ä»¶ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;â€¦&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://zhangone.site/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>JS-è´ªåƒè›‡å°æ¸¸æˆ</title>
    <link href="https://zhangone.site/posts/ba633e46/"/>
    <id>https://zhangone.site/posts/ba633e46/</id>
    <published>2019-11-11T04:17:36.000Z</published>
    <updated>2019-11-18T23:30:31.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®¾å®šè§„åˆ™éœ€æ±‚"><a href="#è®¾å®šè§„åˆ™éœ€æ±‚" class="headerlink" title="è®¾å®šè§„åˆ™éœ€æ±‚"></a>è®¾å®šè§„åˆ™éœ€æ±‚</h2><ul><li>ç‚¹å‡»å¼€å§‹æ¸¸æˆ</li><li>åˆå§‹åŒ–ä¸€ä¸ªè›‡å¤´+ä¸¤ä¸ªèº«ä½“ï¼Œé»˜è®¤å‘å³ç§»åŠ¨</li><li>é£Ÿç‰©ä½ç½®éšæœºåæ ‡ï¼Œæ¯æ¬¡é£Ÿç‰©ç”Ÿæˆæ—¶çš„åæ ‡ä¸èƒ½å’Œè›‡èº«åæ ‡é‡å¤</li><li>é”®ç›˜å››ä¸ªæ–¹å‘é”®æ§åˆ¶è›‡å¤´ç§»åŠ¨æ–¹å‘</li><li>æ’åˆ°å¢™(åœ°å›¾è¾¹ç•Œ)ã€æ’åˆ°è‡ªå·±(è›‡èº«)æ¸¸æˆå¤±è´¥</li><li>æ’åˆ°é£Ÿç‰©ï¼Œåƒæ‰ï¼Œè›‡èº«åŠ ä¸€ã€‚é‡æ–°ç”Ÿæˆé£Ÿç‰©<span id="more"></span></li></ul><h2 id="ES5-æ„é€ å‡½æ•°æ¨¡å¼"><a href="#ES5-æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="ES5-æ„é€ å‡½æ•°æ¨¡å¼"></a>ES5-æ„é€ å‡½æ•°æ¨¡å¼</h2><blockquote><p>é¢å‘å¯¹è±¡<code>OOP</code>ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€</p></blockquote><p>ä½¿ç”¨JSçš„ES5ç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚</p><p>JS â€”â€“ é¢å‘å¯¹è±¡æ€æƒ³ã€‚è¿™ä¸ªæ¸¸æˆä¸»è¦åˆ©ç”¨åˆ°äº†å°è£…ã€‚ã€‚</p><h3 id="jsä»£ç ï¼š"><a href="#jsä»£ç ï¼š" class="headerlink" title="jsä»£ç ï¼š"></a><strong>jsä»£ç ï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// map-size : 100 * 100 = 12 * 9  || 50 * 50 = 24 * 18</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> map = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;snakeWrap&#x27;</span>),</span><br><span class="line">    startBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> snakeGame = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> sw = <span class="number">50</span>,</span><br><span class="line">        sh = <span class="number">50</span>,</span><br><span class="line">        row = <span class="number">1200</span> / sw,</span><br><span class="line">        col = <span class="number">900</span> / sh;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create Food</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Food</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">foodPos</span> = <span class="variable language_">this</span>.<span class="title function_">randomPos</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">foodView</span> = <span class="keyword">new</span> <span class="title class_">CreateDiv</span>(<span class="variable language_">this</span>.<span class="property">foodPos</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">foodPos</span>.<span class="property">y</span>, <span class="string">&#x27;food&#x27;</span>).<span class="title function_">create</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title class_">Food</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">randomPos</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> foodPos;</span><br><span class="line">        <span class="keyword">var</span> include = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (include) &#123;</span><br><span class="line">            foodPos = &#123;</span><br><span class="line">                <span class="attr">x</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * row),</span><br><span class="line">                <span class="attr">y</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * col)</span><br><span class="line">            &#125;</span><br><span class="line">            include = snake.<span class="title function_">includePos</span>(foodPos);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> foodPos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create div</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">CreateDiv</span>(<span class="params">x, y, name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">x</span> = x * sw;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">y</span> = y * sh;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">class</span> = name;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">className</span> = <span class="variable language_">this</span>.<span class="property">class</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">parent</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;snakeWrap&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">CreateDiv</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">create</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">width</span> = sw + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">height</span> = sh + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">left</span> = <span class="variable language_">this</span>.<span class="property">x</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">top</span> = <span class="variable language_">this</span>.<span class="property">y</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">viewEle</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">CreateDiv</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">remove</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>.<span class="property">viewEle</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// snake</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Snake</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">tail</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">// x,y all position</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pos</span> = [</span><br><span class="line">            [<span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        ];</span><br><span class="line">        <span class="comment">// direction change</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">directionStorage</span> = &#123;</span><br><span class="line">            <span class="attr">right</span>: &#123;</span><br><span class="line">                <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">left</span>: &#123;</span><br><span class="line">                <span class="attr">x</span>: -<span class="number">1</span>,</span><br><span class="line">                <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">up</span>: &#123;</span><br><span class="line">                <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">y</span>: -<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">down</span>: &#123;</span><br><span class="line">                <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">y</span>: <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// storage view</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">snakeViewEle</span> = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// test next position</span></span><br><span class="line">    <span class="title class_">Snake</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">PosTesting</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!game.<span class="property">timer</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">var</span> nextPos = &#123;</span><br><span class="line">            <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">head</span>[<span class="number">0</span>] + <span class="variable language_">this</span>.<span class="property">direction</span>.<span class="property">x</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="variable language_">this</span>.<span class="property">head</span>[<span class="number">1</span>] + <span class="variable language_">this</span>.<span class="property">direction</span>.<span class="property">y</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// console.log(nextPos);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// test food</span></span><br><span class="line">        <span class="keyword">if</span> (nextPos.<span class="property">x</span> === <span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodPos</span>.<span class="property">x</span> &amp;&amp; nextPos.<span class="property">y</span> === <span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodPos</span>.<span class="property">y</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">eat</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// test self</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">includePos</span>(nextPos)) &#123;</span><br><span class="line">            game.<span class="title function_">gameOver</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// test boundary</span></span><br><span class="line">        <span class="keyword">if</span> (nextPos.<span class="property">x</span> &gt;= row || nextPos.<span class="property">y</span> &gt;= col || nextPos.<span class="property">x</span> &lt; <span class="number">0</span> || nextPos.<span class="property">y</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            game.<span class="title function_">gameOver</span>();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// GO</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pos</span>.<span class="title function_">unshift</span>([nextPos.<span class="property">x</span>, nextPos.<span class="property">y</span>]);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">play</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Snake start</span></span><br><span class="line">    <span class="title class_">Snake</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">play</span> = <span class="keyword">function</span> (<span class="params">eat</span>) &#123;</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">snakeViewEle</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> curView = <span class="variable language_">this</span>.<span class="property">snakeViewEle</span>[i];</span><br><span class="line">            <span class="keyword">var</span> curPos = <span class="variable language_">this</span>.<span class="property">pos</span>[i];</span><br><span class="line">            curView.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">left</span> = curPos[<span class="number">0</span>] * sw + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            curView.<span class="property">viewEle</span>.<span class="property">style</span>.<span class="property">top</span> = curPos[<span class="number">1</span>] * sh + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = <span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (eat) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">curFood</span> = <span class="keyword">new</span> <span class="title class_">Food</span>;</span><br><span class="line">            game.<span class="property">score</span>++;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pos</span>.<span class="title function_">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// eat food</span></span><br><span class="line">    <span class="title class_">Snake</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pos</span>.<span class="title function_">unshift</span>([<span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodPos</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodPos</span>.<span class="property">y</span>]);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodView</span>.<span class="property">viewEle</span>.<span class="property">className</span> = <span class="string">&#x27;snakeBody&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">snakeViewEle</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">curFood</span>.<span class="property">foodView</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">play</span>(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Snake</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">includePos</span> = <span class="keyword">function</span> (<span class="params">objPos</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">pos</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> item = <span class="variable language_">this</span>.<span class="property">pos</span>[i];</span><br><span class="line">            <span class="keyword">if</span> (item[<span class="number">0</span>] === objPos.<span class="property">x</span> &amp;&amp; item[<span class="number">1</span>] === objPos.<span class="property">y</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="variable language_">this</span>.<span class="property">pos</span>.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Snake</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">init</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// init snake</span></span><br><span class="line">        <span class="keyword">var</span> head = <span class="keyword">new</span> <span class="title class_">CreateDiv</span>(<span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>][<span class="number">0</span>], <span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>][<span class="number">1</span>], <span class="string">&#x27;snakeHead&#x27;</span>).<span class="title function_">create</span>(),</span><br><span class="line">            body1 = <span class="keyword">new</span> <span class="title class_">CreateDiv</span>(<span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">1</span>][<span class="number">0</span>], <span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>][<span class="number">1</span>], <span class="string">&#x27;snakeBody&#x27;</span>).<span class="title function_">create</span>(),</span><br><span class="line">            body2 = <span class="keyword">new</span> <span class="title class_">CreateDiv</span>(<span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">2</span>][<span class="number">0</span>], <span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>][<span class="number">1</span>], <span class="string">&#x27;snakeBody&#x27;</span>).<span class="title function_">create</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// init food &amp;&amp; storage position</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">curFood</span> = <span class="keyword">new</span> <span class="title class_">Food</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// init direction</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">direction</span> = <span class="variable language_">this</span>.<span class="property">directionStorage</span>.<span class="property">right</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// pos relation</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = <span class="variable language_">this</span>.<span class="property">pos</span>[<span class="number">0</span>];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">snakeViewEle</span>.<span class="title function_">push</span>(head, body1, body2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// control direction</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">control</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">37</span> &amp;&amp; snake.<span class="property">direction</span> !== snake.<span class="property">directionStorage</span>.<span class="property">right</span>) &#123;</span><br><span class="line">            snake.<span class="property">direction</span> = snake.<span class="property">directionStorage</span>.<span class="property">left</span>;</span><br><span class="line">            game.<span class="title function_">snakeTurnHead</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">38</span> &amp;&amp; snake.<span class="property">direction</span> !== snake.<span class="property">directionStorage</span>.<span class="property">down</span>) &#123;</span><br><span class="line">            snake.<span class="property">direction</span> = snake.<span class="property">directionStorage</span>.<span class="property">up</span>;</span><br><span class="line">            game.<span class="title function_">snakeTurnHead</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">39</span> &amp;&amp; snake.<span class="property">direction</span> !== snake.<span class="property">directionStorage</span>.<span class="property">left</span>) &#123;</span><br><span class="line">            snake.<span class="property">direction</span> = snake.<span class="property">directionStorage</span>.<span class="property">right</span>;</span><br><span class="line">            game.<span class="title function_">snakeTurnHead</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">40</span> &amp;&amp; snake.<span class="property">direction</span> !== snake.<span class="property">directionStorage</span>.<span class="property">up</span>) &#123;</span><br><span class="line">            snake.<span class="property">direction</span> = snake.<span class="property">directionStorage</span>.<span class="property">down</span>;</span><br><span class="line">            game.<span class="title function_">snakeTurnHead</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define game</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Game</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">score</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// reset map</span></span><br><span class="line">    <span class="title class_">Game</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">gameOver</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;å¾—åˆ† : &quot;</span> + <span class="variable language_">this</span>.<span class="property">score</span>);</span><br><span class="line">        <span class="comment">// remove onkeydown</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, control, <span class="literal">false</span>);</span><br><span class="line">        startBtn.<span class="property">parentNode</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">        snake.<span class="property">snakeViewEle</span> = [];</span><br><span class="line">        map.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        snake.<span class="property">pos</span> = [</span><br><span class="line">            [<span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        ];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">score</span> = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// turn direction</span></span><br><span class="line">    <span class="title class_">Game</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">snakeTurnHead</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">stop</span>();</span><br><span class="line">        snake.<span class="title class_">PosTesting</span>() &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">start</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// stop</span></span><br><span class="line">    <span class="title class_">Game</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">stop</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// start</span></span><br><span class="line">    <span class="title class_">Game</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">start</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// PosTest &amp;&amp; play</span></span><br><span class="line">            snake.<span class="title class_">PosTesting</span>();</span><br><span class="line">        &#125;, <span class="number">250</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// init game</span></span><br><span class="line">    <span class="title class_">Game</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">init</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">        snake.<span class="title function_">init</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">start</span>();</span><br><span class="line">        <span class="comment">// monitor onkeydown</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, control, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create example</span></span><br><span class="line">    <span class="keyword">var</span> snake = <span class="keyword">new</span> <span class="title class_">Snake</span>;</span><br><span class="line">    <span class="keyword">var</span> game = <span class="keyword">new</span> <span class="title class_">Game</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return example</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        snake,</span><br><span class="line">        game</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// End</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// start game</span></span><br><span class="line">startBtn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">parentNode</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    snakeGame.<span class="property">game</span>.<span class="title function_">init</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="cssä»£ç ï¼š"><a href="#cssä»£ç ï¼š" class="headerlink" title="cssä»£ç ï¼š"></a>cssä»£ç ï¼š</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">*&#123;<span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;<span class="attribute">background-color</span>: <span class="number">#f3f3f3</span>;&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">900px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* btn */</span></span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.btn</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">3</span>);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.btn</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.btn</span> <span class="selector-tag">button</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">42px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">35%</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 12 * 9 */</span></span><br><span class="line"><span class="comment">/* snakeWrap */</span></span><br><span class="line"><span class="selector-id">#snakeWrap</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">900px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#snakeWrap</span> <span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* snake style */</span></span><br><span class="line"><span class="selector-id">#snakeWrap</span> <span class="selector-class">.snakeHead</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#snakeWrap</span> <span class="selector-class">.snakeBody</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e0de43</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#snakeWrap</span> <span class="selector-class">.food</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="htmlä»£ç "><a href="#htmlä»£ç " class="headerlink" title="htmlä»£ç "></a>htmlä»£ç </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>snake<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./snake.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;snakeWrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;start&quot;</span>&gt;</span>å¼€å§‹<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./snake.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>     </span><br></pre></td></tr></table></figure><h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><p>æ¸¸æˆæ•ˆæœå›¾ï¼š<br><img src="https://cdn.zhangone.site/PhotoBed/img/blog/JS/GluttonousSnake/snake.png" alt="æ¸¸æˆæ•ˆæœå›¾"></p><p>å¤§æ¦‚å®ç°çš„å·®ä¸å¤šäº†ã€‚ </p><p>ä½†è¿˜æœ‰ä¸€äº›åœ°æ–¹å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œä¾‹å¦‚è›‡çš„ç§»åŠ¨æ–¹å¼ï¼Œä¸Šé¢é‡‡ç”¨çš„æ˜¯å¾ªç¯åæ ‡ï¼Œè®©è›‡èº«æŒ¨ä¸ªå‰è¿›ã€‚è¿™æ ·çš„æ–¹å¼ä¸å…æœ‰äº› â€˜ç¬¨é‡â€™ã€‚éšè›‡èº«è¶Šæ¥è¶Šé•¿ï¼Œä»£ç æ€§èƒ½ä¸é«˜ã€‚</p><p>å¯ä»¥é‡‡ç”¨çš„ä¼˜åŒ–æ–¹å¼ï¼šåˆ©ç”¨ â€˜æå¤´å»å°¾â€™ å®ç°ç§»åŠ¨åŠ¨ä½œã€‚å³åœ¨æ’åˆ°é£Ÿç‰©æ—¶ï¼Œåˆ é™¤é£Ÿç‰©ï¼Œä¸”æ–°å»ºä¸€ä¸ªè›‡å¤´ï¼Œåæ ‡ä¸ºé£Ÿç‰©çš„åæ ‡ã€‚ éšä¹‹åˆ é™¤è›‡èº«å°¾éƒ¨ï¼Œæ–°å»ºä¸€ä¸ªè›‡èº« ï¼Œè¦†ç›–æ—§è›‡å¤´çš„ä½ç½®ã€‚  è¿™æ ·æ¯æ¬¡æ’åˆ°é£Ÿç‰©åªéœ€æ“ä½œè›‡å¤´å’Œè›‡å°¾å°±å¯ä»¥äº†ã€‚ </p><p>å…ˆä¸ä¼˜åŒ–äº†ï¼Œç¡äº†ç¡äº†~</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;è®¾å®šè§„åˆ™éœ€æ±‚&quot;&gt;&lt;a href=&quot;#è®¾å®šè§„åˆ™éœ€æ±‚&quot; class=&quot;headerlink&quot; title=&quot;è®¾å®šè§„åˆ™éœ€æ±‚&quot;&gt;&lt;/a&gt;è®¾å®šè§„åˆ™éœ€æ±‚&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç‚¹å‡»å¼€å§‹æ¸¸æˆ&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–ä¸€ä¸ªè›‡å¤´+ä¸¤ä¸ªèº«ä½“ï¼Œé»˜è®¤å‘å³ç§»åŠ¨&lt;/li&gt;
&lt;li&gt;é£Ÿç‰©ä½ç½®éšæœºåæ ‡ï¼Œæ¯æ¬¡é£Ÿç‰©ç”Ÿæˆæ—¶çš„åæ ‡ä¸èƒ½å’Œè›‡èº«åæ ‡é‡å¤&lt;/li&gt;
&lt;li&gt;é”®ç›˜å››ä¸ªæ–¹å‘é”®æ§åˆ¶è›‡å¤´ç§»åŠ¨æ–¹å‘&lt;/li&gt;
&lt;li&gt;æ’åˆ°å¢™(åœ°å›¾è¾¹ç•Œ)ã€æ’åˆ°è‡ªå·±(è›‡èº«)æ¸¸æˆå¤±è´¥&lt;/li&gt;
&lt;li&gt;æ’åˆ°é£Ÿç‰©ï¼Œåƒæ‰ï¼Œè›‡èº«åŠ ä¸€ã€‚é‡æ–°ç”Ÿæˆé£Ÿç‰©</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-å‘å¸ƒè®¢é˜…æ¨¡å¼</title>
    <link href="https://zhangone.site/posts/fc4d7eca/"/>
    <id>https://zhangone.site/posts/fc4d7eca/</id>
    <published>2019-10-09T18:23:46.000Z</published>
    <updated>2020-04-13T17:33:26.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="äº†è§£è®¾è®¡æ¨¡å¼"><a href="#äº†è§£è®¾è®¡æ¨¡å¼" class="headerlink" title="äº†è§£è®¾è®¡æ¨¡å¼"></a>äº†è§£è®¾è®¡æ¨¡å¼</h3><ol><li><strong>èƒŒæ™¯</strong><blockquote><p>è®¾è®¡æ¨¡å¼å¹¶éæ˜¯è½¯ä»¶å¼€å‘çš„ä¸“ä¸šæœ¯è¯­ï¼Œå®é™…ä¸Šï¼Œâ€œæ¨¡å¼â€æœ€æ—©è¯ç”Ÿäºå»ºç­‘å­¦ã€‚</p><p>è®¾è®¡æ¨¡å¼çš„å®šä¹‰æ˜¯ï¼šåœ¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼æ˜¯åœ¨æŸç§åœºåˆä¸‹å¯¹æŸä¸ªé—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚å¦‚æœå†é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ç»™é¢å‘å¯¹è±¡è½¯ä»¶å¼€å‘ä¸­çš„ä¸€äº›å¥½çš„è®¾è®¡å–ä¸ªåå­—ã€‚</p><p>è¿™äº›â€œå¥½çš„è®¾è®¡â€å¹¶ä¸æ˜¯è°å‘æ˜çš„ï¼Œè€Œæ˜¯æ—©å·²å­˜åœ¨äºè½¯ä»¶å¼€å‘ä¸­ã€‚ä¸€ä¸ªç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿè®¸åœ¨ä¸çŸ¥ä¸è§‰ä¸­æ•°æ¬¡ä½¿ç”¨è¿‡è¿™äº›è®¾è®¡æ¨¡å¼ã€‚GoFï¼ˆGang of Fourâ€“å››äººç»„ï¼Œã€Šè®¾è®¡æ¨¡å¼ã€‹å‡ ä½ä½œè€…ï¼‰æœ€å¤§çš„åŠŸç»©æ˜¯æŠŠè¿™äº›â€œå¥½çš„è®¾è®¡â€ä»æµ©ç€šçš„é¢å‘å¯¹è±¡ä¸–ç•Œä¸­æŒ‘é€‰å‡ºæ¥ï¼Œå¹¶ä¸”ç»™äºˆå®ƒä»¬ä¸€ä¸ªå¥½å¬åˆå¥½è®°çš„åå­—ã€‚</p><p>è®¾è®¡æ¨¡å¼å¹¶ä¸ç›´æ¥ç”¨æ¥å®Œæˆä»£ç çš„ç¼–å†™ï¼Œè€Œæ˜¯æè¿°åœ¨å„ç§ä¸åŒæƒ…å†µä¸‹ï¼Œè¦æ€ä¹ˆè§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ¡ˆï¼Œä»–ä¸æ˜¯ä¸€ä¸ªæ­»çš„æœºåˆ¶ï¼Œä»–æ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ç§å†™ä»£ç çš„å½¢å¼ã€‚æ¯ç§è¯­è¨€å¯¹äºå„ç§è®¾è®¡æ¨¡å¼éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„å®ç°æ–¹å¼ï¼Œå¯¹äºæŸäº›è®¾è®¡æ¨¡å¼æ¥è¯´ï¼Œå¯èƒ½åœ¨æŸäº›è¯­è¨€ä¸‹å¹¶ä¸é€‚ç”¨ï¼Œæ¯”å¦‚å·¥å‚æ–¹æ³•æ¨¡å¼å¯¹äºjavascriptã€‚æ¨¡å¼åº”è¯¥ç”¨åœ¨æ­£ç¡®çš„åœ°æ–¹ã€‚è€Œå“ªäº›æ‰ç®—æ­£ç¡®çš„åœ°æ–¹ï¼Œåªæœ‰åœ¨æˆ‘ä»¬æ·±åˆ»ç†è§£äº†æ¨¡å¼çš„æ„å›¾ä¹‹åï¼Œå†ç»“åˆé¡¹ç›®çš„å®é™…åœºæ™¯æ‰ä¼šçŸ¥é“ã€‚ã€‚</p><p>æ¨¡å¼çš„ç¤¾åŒºä¸€ç›´åœ¨å‘å±•ã€‚GoFåœ¨1995å¹´æå‡ºäº†23ç§è®¾è®¡æ¨¡å¼ï¼Œä½†æ¨¡å¼ä¸ä»…ä»…å±€é™äºè¿™23ç§ï¼Œåé¢å¢åŠ åˆ°äº†24ç§ã€‚åœ¨è¿™20å¤šå¹´çš„æ—¶é—´é‡Œï¼Œä¹Ÿè®¸æœ‰æ›´å¤šçš„æ¨¡å¼å·²ç»è¢«äººå‘ç°å¹¶æ€»ç»“äº†å‡ºæ¥ï¼Œæ¯”å¦‚ä¸€äº›JavaScript å›¾ä¹¦ä¸­ä¼šæåˆ°æ¨¡å—æ¨¡å¼ã€æ²™ç®±æ¨¡å¼ç­‰ã€‚è¿™äº›â€œæ¨¡å¼â€èƒ½å¦è¢«ä¸–äººå…¬è®¤å¹¶æµä¼ ä¸‹æ¥ï¼Œè¿˜æœ‰å¾…æ—¶é—´éªŒè¯ã€‚</p><p>èƒŒæ™¯ä»‹ç»æ‘˜è‡ªæ–‡ç«  <a href="https://blog.csdn.net/hf872914334/article/details/88899326">å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸è§‚å¯Ÿè€…æ¨¡å¼</a> æœ‰ä»‹ç»è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«</p></blockquote></li></ol><p>æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸€ç§æ€æƒ³ï¼šä¼˜åŒ–ä»£ç ä¹Ÿä¸šåŠ¡é€»è¾‘çš„ </p><span id="more"></span><blockquote><p><strong>[å‘å¸ƒè®¢é˜…è®¾è®¡æ¨¡å¼ &#x3D;&gt; è§‚å¯Ÿè€…æ¨¡å¼çš„å‡çº§ç‰ˆ]</strong></p></blockquote><p>æƒ…æ™¯å†ç°ï¼šå½“æŸä¸€ä¸ªæ—¶é—´ç‚¹æˆ–è€…æŸä¸ªæ¡ä»¶åˆ°è¾¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯å¼‚æ­¥è·å–ï¼‰ï¼Œéœ€è¦åç»­å¤„ç†å¾ˆå¤šçš„äº‹æƒ…</p><ol start="2"><li><p><strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰</strong></p><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ï¼Œè¡Œä¸ºå‹æ¨¡å¼å…³æ³¨çš„æ˜¯å¯¹è±¡ä¹‹é—´çš„é€šè®¯ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´çš„é€šè®¯ã€‚</p><p>è§‚å¯Ÿè€…æ¨¡å¼æœ‰ä¸€ä¸ªåˆ«åå«â€œå‘å¸ƒ-è®¢é˜…æ¨¡å¼â€ï¼Œæˆ–è€…è¯´æ˜¯â€œè®¢é˜…-å‘å¸ƒæ¨¡å¼â€ï¼Œè®¢é˜…è€…å’Œè®¢é˜…ç›®æ ‡æ˜¯è”ç³»åœ¨ä¸€èµ·çš„ï¼Œå½“è®¢é˜…ç›®æ ‡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€ä¸ªé€šçŸ¥è®¢é˜…è€…ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æŠ¥çº¸æœŸåˆŠçš„è®¢é˜…æ¥å½¢è±¡çš„è¯´æ˜ï¼Œå½“ä½ è®¢é˜…äº†ä¸€ä»½æŠ¥çº¸ï¼Œæ¯å¤©éƒ½ä¼šæœ‰ä¸€ä»½æœ€æ–°çš„æŠ¥çº¸é€åˆ°ä½ æ‰‹ä¸Šï¼Œæœ‰å¤šå°‘äººè®¢é˜…æŠ¥çº¸ï¼ŒæŠ¥ç¤¾å°±ä¼šå‘å¤šå°‘ä»½æŠ¥çº¸ï¼ŒæŠ¥ç¤¾å’Œè®¢æŠ¥çº¸çš„å®¢æˆ·å°±æ˜¯ä¸Šé¢æ–‡ç« å¼€å¤´æ‰€è¯´çš„â€œä¸€å¯¹å¤šâ€çš„ä¾èµ–å…³ç³»</p></blockquote></li><li><p><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPub-Sub Patternï¼‰</strong></p><blockquote><p>å…¶å®24ç§åŸºæœ¬çš„è®¾è®¡æ¨¡å¼ä¸­å¹¶æ²¡æœ‰å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œä¸Šé¢ä¹Ÿè¯´äº†ï¼Œä»–åªæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ä¸ªåˆ«ç§°æˆ–è€…è¯´æ˜¯å‡çº§ç‰ˆã€‚</p><p>ä½†æ˜¯ç»è¿‡æ—¶é—´çš„æ²‰æ·€ï¼Œä¼¼ä¹ä»–å·²ç»å¼ºå¤§äº†èµ·æ¥ï¼Œå·²ç»ç‹¬ç«‹äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆä¸ºå¦å¤–ä¸€ç§ä¸åŒçš„è®¾è®¡æ¨¡å¼ã€‚</p><p>åœ¨ç°åœ¨çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œç§°ä¸ºå‘å¸ƒè€…çš„æ¶ˆæ¯å‘é€è€…ä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™è®¢é˜…è€…ï¼Œè¿™æ„å‘³ç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚åœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å­˜åœ¨ç¬¬ä¸‰ä¸ªç»„ä»¶ï¼Œç§°ä¸ºæ¶ˆæ¯ä»£ç†æˆ–è°ƒåº¦ä¸­å¿ƒæˆ–ä¸­é—´ä»¶ï¼Œå®ƒç»´æŒç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„è”ç³»ï¼Œè¿‡æ»¤æ‰€æœ‰å‘å¸ƒè€…ä¼ å…¥çš„æ¶ˆæ¯å¹¶ç›¸åº”åœ°åˆ†å‘å®ƒä»¬ç»™è®¢é˜…è€…ã€‚</p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä½ åœ¨å¾®åšä¸Šå…³æ³¨äº†Aï¼ŒåŒæ—¶å…¶ä»–å¾ˆå¤šäººä¹Ÿå…³æ³¨äº†Aï¼Œé‚£ä¹ˆå½“Aå‘å¸ƒåŠ¨æ€çš„æ—¶å€™ï¼Œå¾®åšå°±ä¼šä¸ºä½ ä»¬æ¨é€è¿™æ¡åŠ¨æ€ã€‚Aå°±æ˜¯å‘å¸ƒè€…ï¼Œä½ æ˜¯è®¢é˜…è€…ï¼Œå¾®åšå°±æ˜¯è°ƒåº¦ä¸­å¿ƒï¼Œä½ å’ŒAæ˜¯æ²¡æœ‰ç›´æ¥çš„æ¶ˆæ¯å¾€æ¥çš„ï¼Œå…¨æ˜¯é€šè¿‡å¾®åšæ¥åè°ƒçš„ï¼ˆä½ çš„å…³æ³¨ï¼ŒAçš„å‘å¸ƒåŠ¨æ€ï¼‰ã€‚</p></blockquote></li></ol><h3 id="å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°"><a href="#å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°" class="headerlink" title="å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å°è£…å‘å¸ƒè®¢é˜…åº“ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">(<span class="keyword">function</span> <span class="title function_">anonymous</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub</span> &#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªäº‹ä»¶æ± ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°å®ä¾‹ä¸Š</span></span><br><span class="line">pond = &#123;&#125;;</span><br><span class="line"><span class="comment">// å‘äº‹ä»¶æ± ä¸­è¿½åŠ æ–¹æ³•</span></span><br><span class="line"><span class="title function_">on</span>(<span class="params">flag, func</span>) &#123;</span><br><span class="line"><span class="comment">// é¦–å…ˆæ ¡éªŒæ–°å¢çš„æ ‡è¯†æ˜¯å¦å­˜åœ¨äº‹ä»¶æ± ä¸­ï¼ˆä¸å­˜åœ¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„æ ‡è¯†ï¼Œå¹¶ä¸”åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨åç»­å¢åŠ çš„æ–¹æ³•ï¼›å¦‚æœå­˜åœ¨å°±æ‹¿åˆ°ç°æœ‰çš„æ•°ç»„ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> pond = <span class="variable language_">this</span>.<span class="property">pond</span>;</span><br><span class="line"><span class="keyword">if</span> (!pond.<span class="title function_">hasOwnProperty</span>(flag)) &#123;</span><br><span class="line">pond[flag] = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = pond[flag];</span><br><span class="line"><span class="comment">//æ¯æ¬¡å¢åŠ ä¹‹å‰åšä¸€ä¸ªå»é‡</span></span><br><span class="line"><span class="keyword">if</span> (!arr.<span class="title function_">includes</span>(func)) &#123;</span><br><span class="line">arr.<span class="title function_">push</span>(func);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»äº‹ä»¶æ± ä¸­ç§»é™¤æ–¹æ³•</span></span><br><span class="line"><span class="title function_">off</span>(<span class="params">flag, func</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> pond = <span class="variable language_">this</span>.<span class="property">pond</span>;</span><br><span class="line"><span class="keyword">let</span> arr = pond[flag];</span><br><span class="line"><span class="comment">// å¦‚æœç§»é™¤çš„æ ‡è¯†ä¸åœ¨äº‹ä»¶æ± ä¸­ï¼Œè¯´æ˜ä¹‹å‰ä»æ²¡æœ‰è®¾ç½®è¿‡è¿™ä¸ªæ ‡è¯†çš„æ–¹æ³•ï¼Œä¹Ÿå°±ä¸éœ€è¦å†ç§»é™¤äº†</span></span><br><span class="line"><span class="keyword">if</span> (!arr) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line"><span class="comment">// å¢åŠ çš„æ—¶å€™æ˜¯å»é‡çš„ï¼Œæ‰€ä»¥ç§»é™¤çš„æ—¶å€™ï¼Œåªéœ€è¦ç§»é™¤ä¸€ä¸ªå°±å¤Ÿäº†</span></span><br><span class="line"><span class="keyword">if</span> (arr[i] === func) &#123;</span><br><span class="line"><span class="comment">// ä¸ºäº†é˜²æ­¢æ•°æ®å¡Œé™·ï¼Œæˆ‘ä»¬åˆ é™¤çš„æ—¶å€™ï¼Œä¸å»æ”¹å˜åŸç”Ÿæ•°ç»„çš„ç´¢å¼•ï¼Œæˆ‘ä»¬æŠŠå½“å‰é¡¹å…ˆèµ‹å€¼ä¸ºnullå³å¯</span></span><br><span class="line"><span class="comment">// arr.splice(i, 1);</span></span><br><span class="line">arr[i] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€šçŸ¥äº‹ä»¶æ± ä¸­çš„æ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">fire</span>(<span class="params">flag, ...params</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="variable language_">this</span>.<span class="property">pond</span>[flag];</span><br><span class="line"><span class="keyword">if</span> (!arr) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line"><span class="keyword">let</span> item = arr[i];</span><br><span class="line"><span class="comment">// æŠŠå½“å‰é¡¹ä¸æ˜¯å‡½æ•°çš„ï¼Œä»æ•°ç»„ä¸­ç§»é™¤æ‰å³å¯</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> item !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">arr.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">i--;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">item.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...params);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¾åˆ°å…¨å±€</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">subscribe</span> = <span class="keyword">function</span> <span class="title function_">subscribe</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br><span class="line">&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•æ•ˆæœ"><a href="#æµ‹è¯•æ•ˆæœ" class="headerlink" title="æµ‹è¯•æ•ˆæœ"></a><strong>æµ‹è¯•æ•ˆæœ</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;js/subscribe.js&quot;</span>&gt;&lt;/script&gt; </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// ç¬¬ä¸€æ¬¡é€šçŸ¥MARRYæ‰§è¡Œï¼Œæ‰§è¡Œåˆ°FN2çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»äº‹ä»¶æ± ä¸­ç§»é™¤ FN1/FN2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">off</span>(<span class="string">&#x27;marry&#x27;</span>, fn1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">off</span>(<span class="string">&#x27;marry&#x27;</span>, fn2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">fn3</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">fn4</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> sub = <span class="title function_">subscribe</span>();   <span class="comment">// =&gt; å¾—åˆ°å®ä¾‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;marry&#x27;</span>, fn1);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;marry&#x27;</span>, fn2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;marry&#x27;</span>, fn3);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;marry&#x27;</span>, fn4);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;divorce&#x27;</span>, fn2);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">on</span>(<span class="string">&#x27;divorce&#x27;</span>, fn3);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// =&gt; è®¢é˜…å®Œæˆ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> i = <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">i++;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span> (i &gt; <span class="number">2</span>) &#123;    <span class="comment">// =&gt; </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="built_in">clearInterval</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// å‘å¸ƒæ‰§è¡Œ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">sub.<span class="title function_">fire</span>(<span class="string">&#x27;marry&#x27;</span>, <span class="number">10</span>, <span class="number">20</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// =&gt; æ¯éš”ä¸¤ç§’å‘å¸ƒä¸€æ¬¡ &#x27;marry&#x27;äº‹ä»¶æ± é‡Œçš„å‡½æ•°ï¼Œè¿™é‡Œä¸€å…±æ‰§è¡Œäº†ä¸¤æ¬¡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// =&gt; ç¬¬ä¸€æ¬¡æ§åˆ¶å°ç­‰å¾…ä¸¤ç§’åè¾“å‡º 1 2 3 4  ï¼Œ åœ¨fn2æ‰§è¡Œæ—¶ç§»é™¤äº† &#x27;marry&#x27;äº‹ä»¶æ± ä¸­çš„ fn1 å’Œ fn2</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// =&gt; å†ä¸¤ç§’åç¬¬äºŒè½®å‘å¸ƒæ§åˆ¶å°è¾“å‡º  3  4   </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;, <span class="number">2000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>~~å›°äº†ã€‚ç¡è§‰</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;äº†è§£è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#äº†è§£è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;äº†è§£è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;äº†è§£è®¾è®¡æ¨¡å¼&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èƒŒæ™¯&lt;/strong&gt;&lt;blockquote&gt;
&lt;p&gt;è®¾è®¡æ¨¡å¼å¹¶éæ˜¯è½¯ä»¶å¼€å‘çš„ä¸“ä¸šæœ¯è¯­ï¼Œå®é™…ä¸Šï¼Œâ€œæ¨¡å¼â€æœ€æ—©è¯ç”Ÿäºå»ºç­‘å­¦ã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡æ¨¡å¼çš„å®šä¹‰æ˜¯ï¼šåœ¨é¢å‘å¯¹è±¡è½¯ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ç®€æ´è€Œä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼æ˜¯åœ¨æŸç§åœºåˆä¸‹å¯¹æŸä¸ªé—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚å¦‚æœå†é€šä¿—ä¸€ç‚¹è¯´ï¼Œè®¾è®¡æ¨¡å¼å°±æ˜¯ç»™é¢å‘å¯¹è±¡è½¯ä»¶å¼€å‘ä¸­çš„ä¸€äº›å¥½çš„è®¾è®¡å–ä¸ªåå­—ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›â€œå¥½çš„è®¾è®¡â€å¹¶ä¸æ˜¯è°å‘æ˜çš„ï¼Œè€Œæ˜¯æ—©å·²å­˜åœ¨äºè½¯ä»¶å¼€å‘ä¸­ã€‚ä¸€ä¸ªç¨æœ‰ç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿè®¸åœ¨ä¸çŸ¥ä¸è§‰ä¸­æ•°æ¬¡ä½¿ç”¨è¿‡è¿™äº›è®¾è®¡æ¨¡å¼ã€‚GoFï¼ˆGang of Fourâ€“å››äººç»„ï¼Œã€Šè®¾è®¡æ¨¡å¼ã€‹å‡ ä½ä½œè€…ï¼‰æœ€å¤§çš„åŠŸç»©æ˜¯æŠŠè¿™äº›â€œå¥½çš„è®¾è®¡â€ä»æµ©ç€šçš„é¢å‘å¯¹è±¡ä¸–ç•Œä¸­æŒ‘é€‰å‡ºæ¥ï¼Œå¹¶ä¸”ç»™äºˆå®ƒä»¬ä¸€ä¸ªå¥½å¬åˆå¥½è®°çš„åå­—ã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡æ¨¡å¼å¹¶ä¸ç›´æ¥ç”¨æ¥å®Œæˆä»£ç çš„ç¼–å†™ï¼Œè€Œæ˜¯æè¿°åœ¨å„ç§ä¸åŒæƒ…å†µä¸‹ï¼Œè¦æ€ä¹ˆè§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ¡ˆï¼Œä»–ä¸æ˜¯ä¸€ä¸ªæ­»çš„æœºåˆ¶ï¼Œä»–æ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ç§å†™ä»£ç çš„å½¢å¼ã€‚æ¯ç§è¯­è¨€å¯¹äºå„ç§è®¾è®¡æ¨¡å¼éƒ½æœ‰ä»–ä»¬è‡ªå·±çš„å®ç°æ–¹å¼ï¼Œå¯¹äºæŸäº›è®¾è®¡æ¨¡å¼æ¥è¯´ï¼Œå¯èƒ½åœ¨æŸäº›è¯­è¨€ä¸‹å¹¶ä¸é€‚ç”¨ï¼Œæ¯”å¦‚å·¥å‚æ–¹æ³•æ¨¡å¼å¯¹äºjavascriptã€‚æ¨¡å¼åº”è¯¥ç”¨åœ¨æ­£ç¡®çš„åœ°æ–¹ã€‚è€Œå“ªäº›æ‰ç®—æ­£ç¡®çš„åœ°æ–¹ï¼Œåªæœ‰åœ¨æˆ‘ä»¬æ·±åˆ»ç†è§£äº†æ¨¡å¼çš„æ„å›¾ä¹‹åï¼Œå†ç»“åˆé¡¹ç›®çš„å®é™…åœºæ™¯æ‰ä¼šçŸ¥é“ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡å¼çš„ç¤¾åŒºä¸€ç›´åœ¨å‘å±•ã€‚GoFåœ¨1995å¹´æå‡ºäº†23ç§è®¾è®¡æ¨¡å¼ï¼Œä½†æ¨¡å¼ä¸ä»…ä»…å±€é™äºè¿™23ç§ï¼Œåé¢å¢åŠ åˆ°äº†24ç§ã€‚åœ¨è¿™20å¤šå¹´çš„æ—¶é—´é‡Œï¼Œä¹Ÿè®¸æœ‰æ›´å¤šçš„æ¨¡å¼å·²ç»è¢«äººå‘ç°å¹¶æ€»ç»“äº†å‡ºæ¥ï¼Œæ¯”å¦‚ä¸€äº›JavaScript å›¾ä¹¦ä¸­ä¼šæåˆ°æ¨¡å—æ¨¡å¼ã€æ²™ç®±æ¨¡å¼ç­‰ã€‚è¿™äº›â€œæ¨¡å¼â€èƒ½å¦è¢«ä¸–äººå…¬è®¤å¹¶æµä¼ ä¸‹æ¥ï¼Œè¿˜æœ‰å¾…æ—¶é—´éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;èƒŒæ™¯ä»‹ç»æ‘˜è‡ªæ–‡ç«  &lt;a href=&quot;https://blog.csdn.net/hf872914334/article/details/88899326&quot;&gt;å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸è§‚å¯Ÿè€…æ¨¡å¼&lt;/a&gt; æœ‰ä»‹ç»è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€æœ‰çš„è®¾è®¡æ¨¡å¼éƒ½æ˜¯ä¸€ç§æ€æƒ³ï¼šä¼˜åŒ–ä»£ç ä¹Ÿä¸šåŠ¡é€»è¾‘çš„ &lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-å‡½æ•°é˜²æŠ–(debounce)å’ŒèŠ‚æµ(throttling)</title>
    <link href="https://zhangone.site/posts/fd252af5/"/>
    <id>https://zhangone.site/posts/fd252af5/</id>
    <published>2019-09-06T13:26:55.000Z</published>
    <updated>2020-01-02T15:12:23.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ-èŠ‚æµï¼ˆthrottlingï¼‰"><a href="#é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ-èŠ‚æµï¼ˆthrottlingï¼‰" class="headerlink" title="é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ èŠ‚æµï¼ˆthrottlingï¼‰"></a>é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ èŠ‚æµï¼ˆthrottlingï¼‰</h3><ol><li><p><strong>é˜²æŠ–å’ŒèŠ‚æµå‡ºç°çš„åŸå› </strong><br> é˜²æŠ–å’ŒèŠ‚æµæ˜¯é’ˆå¯¹å“åº”è·Ÿä¸ä¸Šè§¦å‘é¢‘ç‡è¿™ç±»é—®é¢˜çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚</p><ul><li>åœ¨ç»™<code>DOM</code>ç»‘å®šäº‹ä»¶æ—¶ï¼Œæœ‰äº›äº‹ä»¶æˆ‘ä»¬æ˜¯æ— æ³•æ§åˆ¶è§¦å‘é¢‘ç‡çš„ã€‚ å¦‚é¼ æ ‡ç§»åŠ¨äº‹ä»¶<code>onmousemove</code>, æ»šåŠ¨æ»šåŠ¨æ¡äº‹ä»¶<code>onscroll</code>ï¼Œçª—å£å¤§å°æ”¹å˜äº‹ä»¶<code>onresize</code>ï¼Œç¬é—´çš„æ“ä½œéƒ½ä¼šå¯¼è‡´è¿™äº›äº‹ä»¶ä¼šè¢«é«˜é¢‘è§¦å‘ã€‚ å¦‚æœäº‹ä»¶çš„å›è°ƒå‡½æ•°è¾ƒä¸ºå¤æ‚ï¼Œå°±ä¼šå¯¼è‡´å“åº”è·Ÿä¸ä¸Šè§¦å‘ï¼Œå‡ºç°é¡µé¢å¡é¡¿ï¼Œå‡æ­»ç°è±¡ã€‚</li><li>åœ¨å®æ—¶æ£€æŸ¥è¾“å…¥æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç»‘å®š<code>onkeyup</code>äº‹ä»¶å‘è¯·æ±‚å»æœåŠ¡ç«¯æ£€æŸ¥ï¼Œç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œäº‹ä»¶çš„è§¦å‘é¢‘ç‡ä¹Ÿä¼šå¾ˆé«˜ï¼Œä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚å‘å‡ºï¼Œå“åº”é€Ÿåº¦ä¼šå¤§å¤§è·Ÿä¸ä¸Šè§¦å‘ã€‚</li><li>â€¦. <span id="more"></span></li></ul></li><li><p><strong>å®ç°é˜²æŠ–</strong></p><p> é˜²æŠ–å’ŒèŠ‚æµçš„ä½œç”¨éƒ½æ˜¯é˜²æ­¢å‡½æ•°å¤šæ¬¡è°ƒç”¨ã€‚åŒºåˆ«åœ¨äºï¼Œå‡è®¾ä¸€ä¸ªç”¨æˆ·ä¸€ç›´è§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä¸”æ¯æ¬¡è§¦å‘å‡½æ•°çš„é—´éš”å°äºwaitï¼Œé˜²æŠ–çš„æƒ…å†µä¸‹åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè€ŒèŠ‚æµçš„ æƒ…å†µä¼šæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆå‚æ•°waitï¼‰è°ƒç”¨å‡½æ•°ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * debounce:å‡½æ•°é˜²æŠ–</span></span><br><span class="line"><span class="comment"> *   @params</span></span><br><span class="line"><span class="comment"> *      func:è¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> *      wait:é—´éš”ç­‰å¾…æ—¶é—´</span></span><br><span class="line"><span class="comment"> *      immediate:åœ¨å¼€å§‹è¾¹ç•Œè¿˜æ˜¯ç»“æŸè¾¹ç•Œè§¦å‘æ‰§è¡Œ(true =&gt; åœ¨å¼€å§‹è¾¹ç•Œ)</span></span><br><span class="line"><span class="comment"> *   @return</span></span><br><span class="line"><span class="comment"> *      å¯è¢«è°ƒç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> result = <span class="literal">null</span>,</span><br><span class="line">timeout = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> context = <span class="variable language_">this</span>,</span><br><span class="line">now = immediate &amp;&amp; !timeout;</span><br><span class="line"><span class="built_in">clearTimeout</span>(timeout); <span class="comment">// é‡è¦ï¼šåœ¨è®¾ç½®æ–°çš„å®šæ—¶å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æŠŠä¹‹å‰è®¾ç½®çš„å®šæ—¶å™¨éƒ½å¹²æ‰ï¼Œå› ä¸ºé˜²æŠ–çš„ç›®çš„æ˜¯ç­‰å¾…æ—¶é—´å†…ï¼Œåªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">timeout = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (!immediate) result = func.<span class="title function_">call</span>(context, ...args);</span><br><span class="line">&#125;, wait);</span><br><span class="line"><span class="keyword">if</span> (now) result = func.<span class="title function_">call</span>(context, ...args);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®ç°èŠ‚æµ</p><p> é˜²æŠ–åŠ¨å’ŒèŠ‚æµæœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ã€‚é˜²æŠ–åŠ¨æ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œï¼ŒèŠ‚æµæ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜æˆæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * throttleï¼šå‡½æ•°èŠ‚æµæ˜¯ä¸ºäº†ç¼©å‡æ‰§è¡Œé¢‘ç‡ï¼Œå½“è¾¾åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”å°±ä¼šæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="comment"> *   @params</span></span><br><span class="line"><span class="comment"> *      func:éœ€è¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> *      wait:è®¾ç½®çš„é—´éš”æ—¶é—´</span></span><br><span class="line"><span class="comment"> *   @return</span></span><br><span class="line"><span class="comment"> *      è¿”å›å¯è¢«è°ƒç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> throttle = <span class="keyword">function</span> (<span class="params">func, wait</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> timeout = <span class="literal">null</span>,</span><br><span class="line">result = <span class="literal">null</span>,</span><br><span class="line">previous = <span class="number">0</span>; <span class="comment">// ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ç‚¹</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>,</span><br><span class="line">context = <span class="variable language_">this</span>;</span><br><span class="line"><span class="comment">// remainingå°äºç­‰äº0ï¼Œè¡¨ç¤ºä¸Šæ¬¡æ‰§è¡Œè‡³æ­¤æ‰€é—´éš”æ—¶é—´å·²ç»è¶…è¿‡ä¸€ä¸ªæ—¶é—´é—´éš”</span></span><br><span class="line"><span class="keyword">let</span> remaining = wait - (now - previous);</span><br><span class="line"><span class="keyword">if</span> (remaining &lt;= <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">previous = now;</span><br><span class="line">timeout = <span class="literal">null</span>;</span><br><span class="line">result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">previous = <span class="keyword">new</span> <span class="title class_">Date</span>;</span><br><span class="line">timeout = <span class="literal">null</span>;</span><br><span class="line">result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">&#125;, remaining);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ-èŠ‚æµï¼ˆthrottlingï¼‰&quot;&gt;&lt;a href=&quot;#é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ-èŠ‚æµï¼ˆthrottlingï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ èŠ‚æµï¼ˆthrottlingï¼‰&quot;&gt;&lt;/a&gt;é˜²æŠ–ï¼ˆdebounceï¼‰å’Œ èŠ‚æµï¼ˆthrottlingï¼‰&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;é˜²æŠ–å’ŒèŠ‚æµå‡ºç°çš„åŸå› &lt;/strong&gt;&lt;br&gt; é˜²æŠ–å’ŒèŠ‚æµæ˜¯é’ˆå¯¹å“åº”è·Ÿä¸ä¸Šè§¦å‘é¢‘ç‡è¿™ç±»é—®é¢˜çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç»™&lt;code&gt;DOM&lt;/code&gt;ç»‘å®šäº‹ä»¶æ—¶ï¼Œæœ‰äº›äº‹ä»¶æˆ‘ä»¬æ˜¯æ— æ³•æ§åˆ¶è§¦å‘é¢‘ç‡çš„ã€‚ å¦‚é¼ æ ‡ç§»åŠ¨äº‹ä»¶&lt;code&gt;onmousemove&lt;/code&gt;, æ»šåŠ¨æ»šåŠ¨æ¡äº‹ä»¶&lt;code&gt;onscroll&lt;/code&gt;ï¼Œçª—å£å¤§å°æ”¹å˜äº‹ä»¶&lt;code&gt;onresize&lt;/code&gt;ï¼Œç¬é—´çš„æ“ä½œéƒ½ä¼šå¯¼è‡´è¿™äº›äº‹ä»¶ä¼šè¢«é«˜é¢‘è§¦å‘ã€‚ å¦‚æœäº‹ä»¶çš„å›è°ƒå‡½æ•°è¾ƒä¸ºå¤æ‚ï¼Œå°±ä¼šå¯¼è‡´å“åº”è·Ÿä¸ä¸Šè§¦å‘ï¼Œå‡ºç°é¡µé¢å¡é¡¿ï¼Œå‡æ­»ç°è±¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å®æ—¶æ£€æŸ¥è¾“å…¥æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç»‘å®š&lt;code&gt;onkeyup&lt;/code&gt;äº‹ä»¶å‘è¯·æ±‚å»æœåŠ¡ç«¯æ£€æŸ¥ï¼Œç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­ï¼Œäº‹ä»¶çš„è§¦å‘é¢‘ç‡ä¹Ÿä¼šå¾ˆé«˜ï¼Œä¼šå¯¼è‡´å¤§é‡çš„è¯·æ±‚å‘å‡ºï¼Œå“åº”é€Ÿåº¦ä¼šå¤§å¤§è·Ÿä¸ä¸Šè§¦å‘ã€‚&lt;/li&gt;
&lt;li&gt;â€¦.</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ·±æµ…æ‹·è´</title>
    <link href="https://zhangone.site/posts/474f02db/"/>
    <id>https://zhangone.site/posts/474f02db/</id>
    <published>2019-07-31T16:32:43.000Z</published>
    <updated>2019-08-13T17:22:49.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»"><a href="#JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»" class="headerlink" title="JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»"></a>JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»</h2><p>åœ¨JSä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ä¸¤ç§ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œå®ƒçš„å€¼ç›´æ¥å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œå®ƒåœ¨æ ˆå†…å­˜ä¸­ä»…ä»…å­˜å‚¨äº†ä¸€ä¸ªå¼•ç”¨ï¼Œè€ŒçœŸæ­£çš„æ•°æ®å­˜å‚¨åœ¨å †å†…å­˜ä¸­</p><span id="more"></span><p>å½“æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä¸¤ç§æƒ…å†µ</p><ol><li><p><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> b = a;</span><br><span class="line">b = <span class="number">5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);  <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p> å¯ä»¥ç›´è§‚çš„çœ‹åˆ°å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œå˜é‡ <strong>a</strong> å’Œå˜é‡ <strong>b</strong> å„è‡ªä¸ºå€¼ï¼Œå˜é‡ <strong>b</strong> çš„å€¼æ”¹å˜ä¸ä¼šå½±å“å˜é‡ <strong>a</strong> çš„å€¼ã€‚</p></li><li><p><strong>å¼•ç”¨æ•°æ®ç±»å‹</strong> :</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">a</span>:  <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>:  <span class="number">2</span>,</span><br><span class="line">    <span class="attr">c</span>:  <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line">obj2.<span class="property">a</span> = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>);  <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">a</span>);  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p> å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å€¼å…¨éƒ¨è¢«ä¿®æ”¹äº†<br> å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œæˆ‘ä»¬å°† <code>obj1</code> èµ‹äºˆ <code>obj2</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®ä»…ä»…åªæ˜¯å°† <code>obj1</code> å­˜å‚¨åœ¨æ ˆå †ä¸­çš„çš„å¼•ç”¨èµ‹äºˆäº† <code>obj2</code> ï¼Œè€Œä¸¤ä¸ªå¯¹è±¡æ­¤æ—¶æŒ‡å‘çš„æ˜¯åœ¨å †å†…å­˜ä¸­çš„åŒä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¿®æ”¹ä»»æ„ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œä¿®æ”¹çš„éƒ½æ˜¯å †å†…å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥åªè¦ä¿®æ”¹äº†ï¼ŒåŒæ ·å¼•ç”¨çš„å¯¹è±¡çš„å€¼ä¹Ÿè‡ªç„¶è€Œç„¶çš„å‘ç”Ÿäº†æ”¹å˜</p></li></ol><p> <strong>ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­åªæ˜¯æ­£å¸¸çš„èµ‹å€¼æ“ä½œ</strong></p><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><ul><li><p>ä»…ä»…æ˜¯å¤åˆ¶äº†å¯¹è±¡ä¸­æœ€å¤–å±‚é”®å€¼å¯¹ï¼Œå¯¹äºæ·±å±‚æ¬¡çš„å±æ€§ï¼Œå¦‚æœå­˜å‚¨çš„å€¼æ˜¯ä¹Ÿæ˜¯å¼•ç”¨ç±»å‹çš„, å½¼æ­¤ä¹‹é—´ä¿®æ”¹çš„æ“ä½œä¼šäº’ç›¸å½±å“</p></li><li><p>å®ç°æµ…æ‹·è´çš„æ–¹æ³•æœ‰å¤šç§ï¼Œä¾‹å¦‚ï¼š</p><ul><li>æ•°ç»„çš„æµ…æ‹·è´ï¼šArray.slice  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> log = <span class="variable language_">console</span>.<span class="property">log</span>;</span><br><span class="line"><span class="keyword">let</span> ary = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>]]];</span><br><span class="line"><span class="keyword">let</span> newAry = ary.<span class="title function_">slice</span>();</span><br><span class="line"></span><br><span class="line">newAry[<span class="number">0</span>] = <span class="string">&quot;A&quot;</span>;        <span class="comment">// æ›´æ”¹ç¬¬ä¸€å±‚çš„æ•°ç»„æˆå‘˜</span></span><br><span class="line">newAry[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">&quot;B&quot;</span>;     <span class="comment">// æ›´æ”¹ç¬¬äºŒå±‚çš„æˆå‘˜</span></span><br><span class="line"><span class="title function_">log</span>(ary);               <span class="comment">// [1,[&quot;B&quot;,[3]]]</span></span><br><span class="line"><span class="title function_">log</span>(newAry);            <span class="comment">// [&quot;A&quot;,[&quot;B&quot;,[3]]]</span></span><br></pre></td></tr></table></figure></li><li>å¯¹è±¡çš„æµ…æ‹·è´ï¼šObject.assign</li></ul>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;AA&quot;</span>,<span class="attr">child</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;BB&quot;</span>,<span class="attr">child</span>:&#123;<span class="attr">name</span>: <span class="string">&quot;CC&quot;</span>&#125;&#125;&#125;;</span><br><span class="line"><span class="keyword">let</span> newObj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj);</span><br><span class="line">newObj.<span class="property">name</span> = <span class="string">&quot;DD&quot;</span>;</span><br><span class="line">newObj.<span class="property">child</span>.<span class="property">name</span> = <span class="string">&quot;EE&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">log</span>(obj);       <span class="comment">// &#123;name:&quot;AA&quot;,child:&#123;name:&quot;EE&quot;,child:&#123;name:&quot;CC&quot;&#125;&#125;&#125;</span></span><br><span class="line"><span class="title function_">log</span>(newObj);    <span class="comment">// &#123;name:&quot;DD&quot;,child:&#123;name:&quot;EE&quot;,child:&#123;name:&quot;CC&quot;&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œè‚¯å®šä¸èƒ½è®©æ¯ä¸ªå¯¹è±¡çš„å€¼éƒ½æŒ‡å‘åŒä¸€ä¸ªå †å†…å­˜ï¼Œè¿™æ ·çš„è¯ä¸ä¾¿äºæˆ‘ä»¬åšæ“ä½œï¼Œæ‰€ä»¥è‡ªç„¶è€Œç„¶çš„è¯ç”Ÿäº†æ·±æ‹·è´</p><p><strong>æ·±æ‹·è´ä½œç”¨åœ¨å¼•ç”¨ç±»å‹ä¸Šï¼ä¾‹å¦‚ï¼šObjectï¼ŒArray</strong><br><strong>æ·±æ‹·è´ä¸ä¼šæ‹·è´å¼•ç”¨ç±»å‹çš„å¼•ç”¨ï¼Œè€Œæ˜¯å°†å¼•ç”¨ç±»å‹çš„å€¼å…¨éƒ¨æ‹·è´ä¸€ä»½ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å¼•ç”¨ç±»å‹ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿå¼•ç”¨é”™ä¹±çš„é—®é¢˜ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¤šæ¬¡ä½¿ç”¨åŒæ ·çš„æ•°æ®ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ•°æ®ä¹‹é—´ä¼šèµ·å†²çª</strong></p><ol><li><p><strong>å…ˆçœ‹ä¸€ä¸‹åˆ©ç”¨<code>JSON</code>å¯¹è±¡ä¸­çš„æ–¹æ³•æ¥å®ç°çš„æ·±æ‹·è´</strong>ï¼š <em><code>JSON.stringify()</code>ä»¥åŠ<code>JSON.parse()</code></em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;AA&quot;</span>,<span class="attr">child</span>:&#123;<span class="attr">name</span>:<span class="string">&quot;BB&quot;</span>,<span class="attr">child</span>:&#123;<span class="attr">name</span>: <span class="string">&quot;CC&quot;</span>&#125;&#125;&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> deepObj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj));</span><br><span class="line">   deepObj.<span class="property">name</span> = <span class="string">&quot;DD&quot;</span>;</span><br><span class="line">   deepObj.<span class="property">child</span>.<span class="property">child</span>.<span class="property">name</span> = <span class="string">&quot;XX&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="title function_">log</span>(obj);           <span class="comment">// &#123;name:&quot;AA&quot;,child:&#123;name:&quot;BB&quot;,child:&#123;name:&quot;CC&quot;&#125;&#125;&#125;</span></span><br><span class="line">   <span class="title function_">log</span>(deepObj);       <span class="comment">// &#123;name:&quot;DD&quot;,child:&#123;name:&quot;BB&quot;,child:&#123;name:&quot;XX&quot;&#125;&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰å‘ç”Ÿå¼•ç”¨é—®é¢˜ï¼Œä¿®æ”¹<code>deepObj</code>çš„æ•°æ®ï¼Œå¹¶ä¸ä¼šå¯¹<code>obj</code>é€ æˆä»»ä½•å½±å“<br>ä½†æ˜¯ä½¿ç”¨<code>JSON.stringify()</code>ä»¥åŠ<code>JSON.parse()</code>å®ƒæ˜¯ä¸å¯ä»¥æ‹·è´ <code>undefined</code>ã€<code> function</code>ã€<code>RegExp</code>ç­‰ç­‰ç±»å‹çš„ï¼›ä¸”å¯¹äº<code>Dateå®ä¾‹</code>åœ¨æ‹·è´åçš„æ–°å¯¹è±¡ä¸­è‡ªåŠ¨æŠŠå®ä¾‹å¯¹è±¡è½¬æˆäº†å­—ç¬¦ä¸²</p></li><li><p><strong>å†™ä¸€ä¸ªæ·±æ‹·è´çš„æ–¹æ³•ï¼Œåˆ©ç”¨å‡½æ•°é€’å½’æ¥è§£å†³æ·±æ‹·è´</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = [</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;AA&quot;</span>, <span class="attr">age</span>: <span class="literal">undefined</span>, <span class="attr">arr</span>: [&#123;<span class="attr">reg</span>: <span class="regexp">/^\d+$/g</span>&#125;]&#125;,</span><br><span class="line">  &#123;<span class="attr">name</span>: <span class="string">&quot;BB&quot;</span>, <span class="attr">age</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;, <span class="attr">arr</span>: [&#123;<span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()&#125;]&#125;,</span><br><span class="line">  &#123;<span class="attr">count</span>: <span class="number">666</span>&#125;,</span><br><span class="line">  <span class="number">1</span>,</span><br><span class="line">  <span class="number">2</span>,</span><br><span class="line">  <span class="number">3</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">target</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> result;</span><br><span class="line"><span class="keyword">let</span> targetType = &#123;&#125;.<span class="property">toString</span>.<span class="title function_">call</span>(target);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (targetType === <span class="string">&quot;[object Object]&quot;</span> || targetType === <span class="string">&quot;[object Array]&quot;</span>) &#123;</span><br><span class="line">targetType = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(target);</span><br><span class="line">result = targetType ? [] : &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">targetType ? result.<span class="title function_">push</span>(<span class="title function_">deepClone</span>(target[key])) : (result[key] = <span class="title function_">deepClone</span>(target[key]));</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">result = target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deepObj = <span class="title function_">deepClone</span>(obj);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;------------------------&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(deepObj);</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°çœ‹ä¸‹æ•ˆæœï¼š<br><img src="https://cdn.zhangone.site/PhotoBed/img/blog/JS/deepClone/JS-deepClone.png"></p><p>ä¿®æ”¹ä¸‹æ•°æ®è¯•ä¸€è¯•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deepObj[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&quot;CC&quot;</span>;</span><br><span class="line">deepObj[<span class="number">1</span>].<span class="property">age</span> = <span class="literal">null</span>;</span><br><span class="line">deepObj[<span class="number">2</span>].<span class="property">count</span> = <span class="number">888</span>;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/JS/deepClone/JS-deepClone-change.png"></p></li></ol><p><strong>æ„Ÿè§‰è¿˜è¡Œï¼Œå¯ä»¥çœ‹åˆ°æœ€ç»ˆæ‹·è´çš„ç»“æœæ˜¯<code>null</code>ã€<code>undefinde</code>ã€<code>function</code>ã€<code>RegExp</code>ç­‰ç‰¹æ®Šçš„å€¼ä¹Ÿå…¨éƒ¨æ‹·è´æˆåŠŸäº†ï¼Œè€Œä¸”ä¿®æ”¹é‡Œè¾¹çš„å€¼ä¹Ÿä¸ä¼šæœ‰ä»»ä½•é—®é¢˜çš„</strong></p><p><strong>åˆ°è¿™é‡Œå°±å®ç°äº†ä¸€ä¸ªç®€å•çš„æ·±æ‹·è´ï¼Œå½“ç„¶ï¼Œæˆ‘ä¹Ÿåªæ˜¯ç®€å•å®ç°ä¸€ä¸‹ï¼Œè¿˜æœ‰å¾ˆå¤šé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œåªæ˜¯ä¸€ä¸ªæ€è·¯</strong></p><p>å—~</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»&quot;&gt;&lt;a href=&quot;#JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»&quot;&gt;&lt;/a&gt;JSä¸­æ•°æ®ç±»å‹çš„ç®€å•ä»‹ç»&lt;/h2&gt;&lt;p&gt;åœ¨JSä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ä¸¤ç§ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼Œå®ƒçš„å€¼ç›´æ¥å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ï¼Œè€Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œå®ƒåœ¨æ ˆå†…å­˜ä¸­ä»…ä»…å­˜å‚¨äº†ä¸€ä¸ªå¼•ç”¨ï¼Œè€ŒçœŸæ­£çš„æ•°æ®å­˜å‚¨åœ¨å †å†…å­˜ä¸­&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-ES3-ES5-ç»å…¸ä¸‰ç§è®¾è®¡æ¨¡å¼</title>
    <link href="https://zhangone.site/posts/baa6c12d/"/>
    <id>https://zhangone.site/posts/baa6c12d/</id>
    <published>2019-07-06T09:15:36.000Z</published>
    <updated>2019-07-06T09:15:36.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼"><a href="#JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼" class="headerlink" title="JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼"></a>JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼</h3><span id="more"></span><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æ²¡æœ‰å¯¹è±¡å’Œå‡½æ•°ç­‰å¼•ç”¨æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½åŸºäºåˆ›å»ºå˜é‡çš„æ–¹å¼æ¥æè¿°æŸä¸€ä»¶äº‹åŠ¡ï¼ŒæŸä¸€ä¸ªä¸ªä½“çš„ç›¸å…³ä¿¡æ¯  </span></span><br><span class="line"><span class="comment">// è¿™æ ·ä¼šå¤§é‡åˆ›å»ºå…¨å±€å˜é‡ï¼Œæœ€åå¯¼è‡´å…¨å±€å˜é‡çš„å†²çªï¼ˆå…¨å±€å˜é‡æ±¡æŸ“ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;å¼ ä¸‰&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">var</span> height = <span class="string">&quot;180cm&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;æå››&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">28</span>;</span><br><span class="line"><span class="keyword">var</span> height = <span class="string">&quot;175cm&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬æœŸæœ›èƒ½å¤ŸæŠŠæè¿°ä¸€ä¸ªäº‹åŠ¡çš„ç›¸å…³ä¿¡æ¯èƒ½å¤Ÿåˆ†ç»„ï¼ˆæˆ–åˆ†ç±»ï¼‰æ¥ç®¡ç†ï¼Œæ­¤æ—¶å¯¹è±¡æ•°æ®ç±»å‹å°±èµ·åˆ°äº†å¾ˆå¤§çš„ä½œç”¨</span></span><br><span class="line"><span class="comment">// åˆ†ç»„ä¹‹åï¼Œæ¯ä¸€ç»„ä¸­çš„é”®å€¼å¯¹éƒ½æ˜¯ç§æœ‰çš„ï¼Œå³ä½¿ä¸¤ç»„ä¹‹é—´æœ‰ç›¸åŒåå­—çš„å±æ€§ï¼Œä¹Ÿä¸ä¼šå†²çªï¼Œå¤§å¤§è§£å†³äº†å…¨å±€å˜é‡æ±¡æŸ“çš„é—®é¢˜  =&gt; â€œè¿™ç§åˆ†ç»„ç®¡ç†çš„æ¦‚å¿µï¼Œå°±æ˜¯JSä¸­æœ€æ—©çš„å•ä¾‹è®¾è®¡æ¨¡å¼æ€æƒ³â€</span></span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">25</span>,</span><br><span class="line">...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;æå››&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">28</span>,</span><br><span class="line">...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * åŸºäºå¯¹è±¡æ•°æ®ç±»å‹ï¼ŒæŠŠæè¿°å½“å‰äº‹åŠ¡çš„å±æ€§å’Œæ–¹æ³•ç»Ÿä¸€æ”¾åœ¨ä¸€èµ·åˆ†ç»„ç®¡ç†ï¼Œèƒ½å¤Ÿå‡å°‘å…¨å±€å˜é‡æ±¡æŸ“ï¼Œè¿™ç§JSè®¾è®¡æ¨¡å¼å°±æ˜¯â€œå•ä¾‹è®¾è®¡æ¨¡å¼â€</span></span><br><span class="line"><span class="comment"> *  1. æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„å®ä¾‹ï¼ˆå•ç‹¬çš„å †å†…å­˜ï¼‰ï¼Œå­˜å‚¨çš„é”®å€¼å¯¹éƒ½æ˜¯å †ä¸­ç§æœ‰çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸¤ä¸ªå®ä¾‹ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•çš„å†²çª</span></span><br><span class="line"><span class="comment"> *  2. åœ¨å•ä¾‹è®¾è®¡æ¨¡å¼ä¸­ï¼Œæœ‰ä¸€äº›æ–°çš„æ¦‚å¿µï¼Œåœ¨ä¸‹è¿°æ¡ˆä¾‹ä¸­ï¼šobjä¸ä»…ä»…æ˜¯ä¸€ä¸ªå˜é‡å­˜å‚¨å¯¹è±¡ï¼ˆå¯¹è±¡åï¼‰ï¼Œä¹Ÿè¢«æˆä¸ºâ€œå‘½åç©ºé—´â€ï¼ˆå…¶å®å°±æ˜¯ç»™å¯¹è±¡çš„å †å†…å­˜è®¾ç½®ä¸€ä¸ªobjçš„åå­—ï¼Œå †å†…å­˜æ˜¯ç©ºé—´ï¼Œobjæ˜¯åå­—ï¼‰ï¼ŒæŠŠæè¿°å½“å‰äº‹åŠ¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæ”¾åˆ°ç©ºé—´ä¸­è¿›è¡Œåˆ†ç»„ç®¡ç†</span></span><br><span class="line"><span class="comment"> *     var obj = &#123; xxx:xxx , ...&#125;;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * åœ¨å…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè®¤ä¸ºåªæœ‰åŸºäºæ„é€ å‡½æ•°æ„é€ å‡ºæ¥çš„å®ä¾‹æ‰èƒ½è¢«ç§°ä¸ºâ€œå•ä¾‹è®¾è®¡æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ var xxx = new xxx; ä½†æ˜¯åœ¨JSä¸­ï¼Œvar obj=&#123;...&#125;; æœ¬èº«å°±æ˜¯åŸºäº new Object() æ„å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥æ˜¯æ ‡å‡†çš„å•ä¾‹è®¾è®¡æ¨¡å¼ï¼›</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// + å•ä¾‹è®¾è®¡æ¨¡å¼ä¹Ÿæ˜¯æœ€åŸºç¡€çš„æ¨¡å—åŒ–æ€æƒ³</span></span><br><span class="line"><span class="comment">// + AMD/CMDï¼ˆrequireJSå’ŒseaJSï¼‰</span></span><br><span class="line"><span class="comment">// + UMD</span></span><br><span class="line"><span class="comment">// + CommonJS</span></span><br><span class="line"><span class="comment">// + ES6Module</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºäºå•ä¾‹è®¾è®¡æ¨¡å¼æ€æƒ³ + é—­åŒ…æ€æƒ³ + æ¨¡å—ç®¡ç†æ€æƒ³ (é«˜çº§å•ä¾‹æ¨¡å¼)</span></span><br><span class="line"><span class="keyword">var</span> utils = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">queryElement</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deleteElement</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¼å‡ºå½“å‰ç‰ˆå—ä¸­éœ€è¦ä¾›åˆ«äººè°ƒå–çš„å±æ€§æ–¹æ³•ï¼ˆä¹Ÿç›¸å½“äºæŠŠè¿™äº›å±æ€§æ–¹æ³•æ”¾åˆ°utilså‘½åç©ºé—´ä¸‹è¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œé¿å…å’Œåˆ«äººçš„å†²çªï¼‰</span></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">queryElement</span>:queryElement,</span><br><span class="line"><span class="attr">deleteElement</span>:deleteElement</span><br><span class="line">&#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> searchModule = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">queryData</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bindHTML</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//=&gt;éœ€è¦è°ƒå–utilsæ¨¡å—ï¼ˆå‘½åç©ºé—´ä¸­çš„æ–¹æ³•ï¼‰</span></span><br><span class="line">utils.<span class="title function_">queryElement</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">init</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h3 id="å·¥å‚è®¾è®¡æ¨¡å¼"><a href="#å·¥å‚è®¾è®¡æ¨¡å¼" class="headerlink" title="å·¥å‚è®¾è®¡æ¨¡å¼"></a>å·¥å‚è®¾è®¡æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºäº â€œå•ä¾‹è®¾è®¡æ¨¡å¼â€ è®°å½•äººå‘˜ä¿¡æ¯ï¼šåˆ›å»ºå•ç‹¬çš„å®ä¾‹æˆ–è€…å‘½åç©ºé—´ï¼ŒæŠŠæè¿°æ¯ä¸ªäººçš„ä¿¡æ¯åˆ†ç»„ç®¡ç†å³å¯å®ç°</span></span><br><span class="line"><span class="comment">// ç¼ºé™·ï¼šæ¯å½“æè¿°ä¸€ä¸ªäº‹åŠ¡çš„ä¿¡æ¯ï¼Œéœ€è¦æŠŠå¯¹åº”çš„é”®å€¼å¯¹éƒ½å»ç¼–å†™ä¸€ä¸‹ï¼Œå¦‚æœé‡å¤æè¿°ç›¸ä¼¼äº‹åŠ¡çš„ä¿¡æ¯ï¼Œä¸ä»…éœ€è¦é‡å¤åšå¾ˆå¤šäº‹æƒ…ï¼Œè€Œä¸”è¿˜ä¼šå¯¼è‡´ä»£ç çš„å†—ä½™.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">92</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;ç”·&#x27;</span>,</span><br><span class="line"><span class="attr">score</span>:<span class="number">90</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;æå››&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">62</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;ç”·&#x27;</span>,</span><br><span class="line"><span class="attr">score</span>:<span class="number">85</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person3 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;ç‹äºŒ&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;å¥³&#x27;</span>,</span><br><span class="line"><span class="attr">score</span>:<span class="number">100</span>ï¼Œ</span><br><span class="line"><span class="attr">qunzi</span>:<span class="string">&#x27;red&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€è°“å·¥å‚è®¾è®¡æ¨¡å¼ï¼Œæ˜¯åœ¨éœ€è¦åˆ›å»ºå¾ˆå¤šâ€œç›¸ä¼¼å®ä¾‹â€çš„æƒ…å¢ƒä¸‹ï¼Œè®©æˆ‘ä»¬å‘Šåˆ«æ‰‹åŠ¨åˆ›å»ºï¼Œè€Œå®ç°å·¥ä¸šåŒ–æ‰¹é‡ç”Ÿäº§ï¼ˆæé«˜å¼€å‘æ•ˆç‡ã€å‡å°‘äº†é¡µé¢ä¸­çš„å†—ä½™ä»£ç  =&gt; â€œä½è€¦åˆé«˜å†…èšâ€ =&gt; å‡½æ•°å°è£…ï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name, age, sex, score, qunzi</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line">person.<span class="property">name</span> = name;</span><br><span class="line">person.<span class="property">age</span> = age;</span><br><span class="line">person.<span class="property">sex</span> = sex;</span><br><span class="line">person.<span class="property">score</span> = score;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> qunzi !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line"><span class="comment">// ä¼ é€’äº†qunzi å½¢å‚å¯¹åº”çš„å®å‚å€¼</span></span><br><span class="line">person.<span class="property">qunzi</span> = qunzi;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="title function_">createPerson</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="number">92</span>,<span class="string">&#x27;ç”·&#x27;</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="title function_">createPerson</span>(<span class="string">&#x27;æå››&#x27;</span>,<span class="number">62</span>,<span class="string">&#x27;ç”·&#x27;</span>,<span class="number">85</span>);</span><br><span class="line"><span class="keyword">var</span> person3 = <span class="title function_">createPerson</span>(<span class="string">&#x27;ç‹äºŒ&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;å¥³&#x27;</span>,<span class="number">100</span>,<span class="string">&#x27;red&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h3><blockquote><p>ç¼–ç¨‹è¯­è¨€ï¼š</p><ul><li>OOPï¼ˆObject Oriented Programmingï¼‰é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡<ul><li>JAVA</li><li>PHP</li><li>PYTHON &#x2F; GO &#x2F; RUBY</li><li>JAVASCRIPT &#x2F; NODE.JS</li><li>â€¦</li></ul></li><li>POPï¼ˆProcedure Orientedï¼‰ é¢å‘è¿‡ç¨‹ç¨‹åºè®¾è®¡<ul><li>Cè¯­è¨€</li></ul></li></ul></blockquote><p>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ä¸‰å¤§æ¦‚å¿µï¼š</p><ul><li>å¯¹è±¡ï¼šæ³›æŒ‡ï¼ŒJSä¸­æˆ‘ä»¬æ“ä½œå’Œç ”ç©¶çš„äº‹åŠ¡éƒ½æ˜¯å¯¹è±¡</li><li>ç±»ï¼šæŠŠæŠ½è±¡çš„å¯¹è±¡ï¼ŒæŒ‰ç…§åŠŸèƒ½ç‰¹ç‚¹ï¼Œè¿›è¡Œçš„è¯¦ç»†åˆ’åˆ†ï¼Œåˆ’åˆ†æˆä¸ºå¾ˆå¤šçš„ç±»åˆ«</li><li>å®ä¾‹ï¼šæ¯ä¸€ç§ç±»åˆ«ä¸­å…·ä½“çš„äº‹åŠ¡</li></ul><h4 id="JSä¸­å†…ç½®ç±»"><a href="#JSä¸­å†…ç½®ç±»" class="headerlink" title="JSä¸­å†…ç½®ç±»"></a>JSä¸­å†…ç½®ç±»</h4><blockquote><p>æ ¹æ®JSä¸­äº‹åŠ¡çš„ç‰¹å¾ï¼Œè¿›è¡Œç±»åˆ«åˆ’åˆ†ï¼Œè€Œé»˜è®¤åˆ’åˆ†å¥½çš„ç±»åˆ«ï¼Œå°±æ˜¯å†…ç½®ç±»</p></blockquote><ul><li><p>æ•°æ®ç±»å‹ä¸­çš„å†…ç½®ç±»</p><ul><li><code>Number</code>ç±»ï¼šæ¯ä¸€ä¸ªæ•°å­—éƒ½æ˜¯è¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹</li><li><code>String</code> ç±»</li><li><code>Boolean</code> ç±»</li><li><code>Null</code> ç±» &#x2F; <code>Undefined</code> ç±»ï¼ˆæµè§ˆå™¨ä¸­è¿›åˆ¶æˆ‘ä»¬è‡ªå·±è®¿é—®è¿™ä¸¤ä¸ªç±»ï¼‰</li><li><code>Symbol</code> ç±»</li><li><code>Object</code>  å¯¹è±¡æ•°æ®ç±»å‹ç±»ï¼šæ‰€æœ‰çš„å¯¹è±¡æ•°æ®ç±»å‹éƒ½æ˜¯è¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹<ul><li><code>Object &#123;&#125;</code>æ™®é€šå¯¹è±¡å°±æ˜¯å®ƒçš„å®ä¾‹ </li><li><code>Array</code> æ•°ç»„ç±»  æ¯ä¸€ä¸ªæ•°ç»„æ˜¯<code>Array</code>ç±»çš„å®ä¾‹ä¹Ÿæ˜¯<code>Object</code>ç±»çš„å®ä¾‹</li><li><code>RegExp</code>æ­£åˆ™ç±»</li><li><code>Date</code>æ—¥æœŸç±»</li><li>â€¦</li></ul></li><li><code>Function</code>ç±»ï¼šæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹</li><li>â€¦ å…¶å®ƒ</li></ul></li><li><p><strong>DOM</strong>å…ƒç´ å¯¹è±¡æˆ–è€…<strong>DOM</strong>å…ƒç´ é›†åˆä¹Ÿéƒ½æœ‰è‡ªå·±çš„å†…ç½®ç±»<br>  â€¦</p><ul><li><p><code>Node</code> èŠ‚ç‚¹ç±»</p><ul><li><code>Element</code> å…ƒç´ æ ‡ç­¾ç±»<ul><li><code>HTMLElement</code> HTMLå…ƒç´ æ ‡ç­¾ç±»<ul><li><code>HTMLDivElement</code> æ¯ä¸€ä¸ªDIVå…ƒç´ å¯¹è±¡æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹</li><li><code>HTMLAnchorElement</code> æ¯ä¸ªAå…ƒç´ å¯¹è±¡æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹</li><li>æ¯ä¸€ä¸ªå…ƒç´ æ ‡ç­¾å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè‡ªå·±å¯¹åº”çš„å†…ç½®ç±»</li></ul></li><li><code>XMLElement</code></li><li>â€¦</li></ul></li><li><code>Text</code> æ–‡æœ¬èŠ‚ç‚¹ç±»</li><li><code>Document</code> æ–‡æ¡£èŠ‚ç‚¹ç±»<ul><li><code>HTMLDocument</code> æ¯ä¸€ä¸ªdocumentéƒ½æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹</li></ul></li><li>â€¦</li></ul></li><li><p><code>HTMLCollection</code> å…ƒç´ é›†åˆç±»ï¼šåŸºäº<code>getElementsByTagName</code>ç­‰æ–¹æ³•è·å–åˆ°çš„å…ƒç´ é›†åˆéƒ½æ˜¯å®ƒçš„ä¸€ä¸ªå®ä¾‹</p></li><li><p><code>NodeList</code> èŠ‚ç‚¹é›†åˆç±»</p></li></ul></li><li><p>â€¦</p></li></ul><p>JSæœ¬èº«å°±æ˜¯æŒ‰ç…§â€œé¢å‘å¯¹è±¡æ€æƒ³ï¼ˆç±»å’Œå®ä¾‹ï¼‰â€è®¾è®¡å‡ºæ¥çš„è¯­è¨€ï¼Œæ‰€ä»¥ä¸è®ºæ˜¯ç ”ç©¶æˆ–æ˜¯å­¦ä¹ JSï¼Œè¿˜æ˜¯åœ¨å·¥ä½œä¸­è¿›è¡Œå¼€å‘ï¼Œä¹Ÿéƒ½åº”è¯¥æŒ‰ç…§é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥å­¦ä¹ å’Œå¼€å‘ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* æˆ‘æƒ³ç ”ç©¶æ•°ç»„ */</span></span><br><span class="line"><span class="comment">// 1.æ¯ä¸€ä¸ªæ•°ç»„éƒ½æ˜¯Arrayè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æ˜¯å•ç‹¬çš„ä¸€ä¸ªä¸ªä½“ï¼ˆäº’ç›¸æ˜¯ä¸å†²çªçš„ï¼Œç±»ä¼¼äºæ²¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„ä¸¤ä¸ªäººï¼Œåœ¨JSä¸­ä¹ŸåŸºæœ¬ä¸Šæ²¡æœ‰å®Œå…¨ä¸€æ ·çš„ä¸¤ä¸ªå®ä¾‹[ä¼šæœ‰ç‰¹æ®Šæƒ…å†µ]ï¼‰</span></span><br><span class="line"><span class="comment">// 2.æˆ‘ä»¬æ‹¿å‡ºæŸä¸€ä¸ªå®ä¾‹å»åˆ†æå…¶ç‰¹ç‚¹å’Œç»“æ„ï¼Œé‚£ä¹ˆArrayçš„å…¶å®ƒå®ä¾‹ä¹Ÿå…·å¤‡ç›¸åŒçš„ç‰¹ç‚¹å’Œç»“æ„</span></span><br><span class="line"><span class="comment">// 3.æ•°ç»„ä¸­æœ‰å¾ˆå¤šæµè§ˆå™¨å†…ç½®çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½æ˜¯ç±»æä¾›ç»™å®ä¾‹çš„ï¼Œæ¯ä¸€ä¸ªå®ä¾‹éƒ½èƒ½å…·å¤‡å’Œä½¿ç”¨è¿™äº›æ–¹æ³•ï¼ˆå‰ææ˜¯å½“å‰ç±»çš„å®ä¾‹æ‰èƒ½ä½¿ç”¨ï¼Œå¦‚æœä¸æ˜¯å®ƒçš„å®ä¾‹ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">12</span>,<span class="number">23</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">12</span>,<span class="number">23</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1 === arr2); <span class="comment">// false ä¸åŒçš„å †å†…å­˜åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// push æ˜¯ Array è¿™ä¸ªç±»æä¾›çš„æ–¹æ³•ï¼Œåªè¦æ˜¯ Array ç±»çš„å®ä¾‹ï¼ˆæ•°ç»„æ˜¯å®ƒçš„å®ä¾‹ï¼‰éƒ½å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">20</span>];</span><br><span class="line">arr.<span class="title function_">push</span>(<span class="number">30</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">//=&gt;[10,20,30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments ä¸æ˜¯ Array çš„å®ä¾‹ï¼Œä¸èƒ½è°ƒå®ƒæä¾›çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// arguments å®å‚é›†åˆä¸­å­˜å‚¨äº†ä¼ é€’çš„å®å‚ä¿¡æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„ï¼ˆç±»ä¼¼äºæ•°ç»„çš„ç»“æ„ï¼Œä½†æ˜¯å®ƒä¸æ˜¯æ•°ç»„ï¼Œä¸æ˜¯Arrayç±»çš„å®ä¾‹ï¼‰</span></span><br><span class="line"><span class="variable language_">arguments</span>.<span class="title function_">push</span>(<span class="number">30</span>); <span class="comment">// Uncaught TypeError: arguments.push is not a function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">func</span>(<span class="number">10</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°æ¨¡å¼ï¼šåŸºäºæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç±»å’Œåˆ›å»ºç±»çš„ç›¸å…³å®ä¾‹"><a href="#æ„é€ å‡½æ•°æ¨¡å¼ï¼šåŸºäºæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç±»å’Œåˆ›å»ºç±»çš„ç›¸å…³å®ä¾‹" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼ï¼šåŸºäºæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç±»å’Œåˆ›å»ºç±»çš„ç›¸å…³å®ä¾‹"></a>æ„é€ å‡½æ•°æ¨¡å¼ï¼šåŸºäºæ„é€ å‡½æ•°ï¼Œåˆ›å»ºè‡ªå®šä¹‰ç±»å’Œåˆ›å»ºç±»çš„ç›¸å…³å®ä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¦å®šè§„èŒƒï¼šç±»åçš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸€èˆ¬éƒ½æ˜¯å¤§å†™çš„</span></span><br><span class="line"><span class="comment">// 1.æ„é€ å‡½æ•°æ‰§è¡Œï¼Œç”±äºå…·å¤‡æ™®é€šå‡½æ•°ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨ç§æœ‰ä¸Šä¸‹æ–‡ä¸­å¯èƒ½ä¼šå‡ºç°ä¸€äº›ç§æœ‰å˜é‡ï¼Œä½†æ˜¯è¿™äº›ç§æœ‰å˜é‡å’Œå®ä¾‹æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œç§æœ‰ä¸Šä¸‹æ–‡ä¸­çš„ this æ‰æ˜¯å®ä¾‹ï¼Œæ‰€ä»¥åªæœ‰å†™ this.xxx = xxx çš„æ“ä½œï¼Œæ‰æ˜¯ç»™å®ä¾‹è®¾ç½®ç§æœ‰å±æ€§ï¼›  å®ä¾‹çš„ç§æœ‰å±æ€§å’Œä¸Šä¸‹æ–‡ä¸­çš„ç§æœ‰å˜é‡ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿</span></span><br><span class="line"><span class="comment">// 2. å½“å‰ç±»çš„æ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯å•ç‹¬çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ä¾‹å’Œå®ä¾‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„</span></span><br><span class="line"><span class="comment">// 3. åœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­ï¼ŒåŸºäº this.xxx = xxx ç»™å®ä¾‹è®¾ç½®çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯è‡ªå·±ç§æœ‰çš„ï¼Œå’Œå…¶å®ƒå®ä¾‹ä¸­çš„å±æ€§å’Œæ–¹æ³•ä¸å†²çª</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Fn</span>(<span class="params">x</span>) &#123;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">total</span> = x + y;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">say</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;x&#125;</span> + <span class="subst">$&#123;y&#125;</span> = <span class="subst">$&#123;<span class="variable language_">this</span>.total&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f1 = <span class="title class_">Fn</span>(<span class="number">10</span>); <span class="comment">// f1=undefined</span></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="keyword">new</span> <span class="title class_">Fn</span>(<span class="number">10</span>); <span class="comment">// f2å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> f3 = <span class="keyword">new</span> <span class="title class_">Fn</span>(<span class="number">20</span>); <span class="comment">// f3å®ä¾‹å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="property">total</span>); <span class="comment">// 30</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="property">x</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f3.<span class="property">y</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1 === f2); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f2 === f3); <span class="comment">// false</span></span><br><span class="line">f2.<span class="title function_">say</span>(); <span class="comment">// &quot;10+20=30&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f2.<span class="property">say</span> === f3.<span class="property">say</span>); <span class="comment">// false  éƒ½æ˜¯å½“å‰å®ä¾‹çš„ç§æœ‰å±æ€§å’Œæ–¹æ³•ï¼ˆæ‰€æœ‰å‡ºç°åœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­çš„ this.xxx = xxx æ“ä½œï¼Œéƒ½æ˜¯è®¾ç½®ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(f1.<span class="property">total</span>); <span class="comment">// Uncaught TypeError: Cannot read property &#x27;total&#x27; of undefined  f1ä¸æ˜¯å¯¹è±¡ï¼Œåªæœ‰å¯¹è±¡æ‰èƒ½æ“ä½œé”®å€¼å¯¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">total</span>); <span class="comment">// 30</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">say</span>(); <span class="comment">// &quot;10 + 20 = 30&quot; </span></span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªå‡½æ•°éƒ½å†…ç½®å…·å¤‡ä¸€ä¸ªå±æ€§ï¼š<code>prototype</code>ï¼ˆåŸå‹ï¼‰ï¼Œ<code>prototype</code>çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šç»™å…¶ä¸€ä¸ªå †å†…å­˜ï¼‰ &#x3D;&gt; â€œåŸå‹å¯¹è±¡ä¸Šæ‰€å­˜å‚¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±æ˜¯ä¾›å½“å‰ç±»å®ä¾‹æ‰€è°ƒç”¨çš„å…¬æœ‰çš„å±æ€§å’Œæ–¹æ³•â€</p><ul><li>æ™®é€šå‡½æ•°</li><li>ç±»ä¹Ÿæ˜¯å‡½æ•°ç±»å‹çš„å€¼</li></ul><p>åœ¨ç±»çš„<code>prototype</code>åŸå‹å¯¹è±¡ä¸­ï¼Œé»˜è®¤å­˜åœ¨ä¸€ä¸ªå†…ç½®çš„å±æ€§ï¼š<code>constructor</code>ï¼ˆæ„é€ å‡½æ•°ï¼‰ï¼Œå±æ€§å€¼å°±æ˜¯å½“å‰ç±»(å‡½æ•°)æœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹ŸæŠŠç±»ç§°ä¸ºæ„é€ å‡½æ•°</p><p>æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¤©ç”Ÿå…·å¤‡ä¸€ä¸ªå±æ€§ï¼š<code>__proto__</code>ï¼ˆåŸå‹é“¾æŒ‡å‘ï¼‰ï¼Œå±æ€§å€¼æ˜¯å½“å‰å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰æ‰€å±ç±»çš„<code>prototype</code>åŸå‹</p><ul><li>å¯¹è±¡æ•°æ®ç±»å‹å€¼<ul><li>æ™®é€šå¯¹è±¡</li><li>æ•°ç»„å¯¹è±¡</li><li>æ­£åˆ™å¯¹è±¡</li><li>â€¦</li></ul></li><li>å®ä¾‹ä¹Ÿæ˜¯å¯¹è±¡ç±»å‹å€¼ï¼ˆé™¤åŸºæœ¬å€¼å¤–ï¼‰</li><li>ç±»çš„<code>prototype</code>åŸå‹å±æ€§å€¼ä¹Ÿæ˜¯å¯¹è±¡</li><li>å‡½æ•°ä¹Ÿå…·å¤‡å¯¹è±¡çš„ç‰¹å¾ï¼ˆå®ƒæœ‰ä¸€é‡èº«ä»½å°±æ˜¯å¯¹è±¡ç±»å‹ï¼‰</li><li>â€¦</li></ul><p>æ‰€æœ‰çš„å¯¹è±¡æ•°æ®ç±»å‹å€¼ï¼Œéƒ½æ˜¯å†…ç½®ç±»Objectçš„ä¸€ä¸ªå®ä¾‹</p><p>äº†è§£ES6-Class &#x3D;&#x3D;&gt; <a href="https://es6.ruanyifeng.com/#docs/class">é˜®ä¸€å³°ES6æ•™ç¨‹â€“å…³äº Classå®šä¹‰ç±»</a></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;JSä¸­çš„å•ä¾‹è®¾è®¡æ¨¡å¼&lt;/h3&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="JavaScript" scheme="https://zhangone.site/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>CSS3-flexå¸ƒå±€</title>
    <link href="https://zhangone.site/posts/ca7f6989/"/>
    <id>https://zhangone.site/posts/ca7f6989/</id>
    <published>2019-06-06T04:04:06.000Z</published>
    <updated>2019-06-06T04:04:06.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="1ã€-flex-å¸ƒå±€çš„å‡ºç°"><a href="#1ã€-flex-å¸ƒå±€çš„å‡ºç°" class="headerlink" title="1ã€ flex å¸ƒå±€çš„å‡ºç°"></a>1ã€ <code>flex</code> å¸ƒå±€çš„å‡ºç°</h4><blockquote><p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– display å±æ€§ + position å±æ€§ + float å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚<br>2009å¹´ï¼ŒW3Cæå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flexå¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚</p></blockquote><span id="more"></span><h4 id="2ã€flexå¸ƒå±€çš„å…¼å®¹æ€§é—®é¢˜"><a href="#2ã€flexå¸ƒå±€çš„å…¼å®¹æ€§é—®é¢˜" class="headerlink" title="2ã€flexå¸ƒå±€çš„å…¼å®¹æ€§é—®é¢˜"></a>2ã€flexå¸ƒå±€çš„å…¼å®¹æ€§é—®é¢˜</h4><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-compatibility.png"><br><br />æ³¨æ„ï¼šè®¾ä¸º<code>Flex</code>å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„<code>float</code>ã€<code>clear</code>å’Œ<code>vertical-align</code>å±æ€§å°†å¤±æ•ˆã€‚<br><a name="QWDNs"></a></p><h4 id="3ã€flex-å¸ƒå±€çš„å®šä¹‰"><a href="#3ã€flex-å¸ƒå±€çš„å®šä¹‰" class="headerlink" title="3ã€flex å¸ƒå±€çš„å®šä¹‰"></a>3ã€flex å¸ƒå±€çš„å®šä¹‰</h4><p><code>Flex</code>æ˜¯<code>Flexible Box</code>çš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚<br />ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚flex å¸ƒå±€æœ‰ä¸¤ä¸ªå€¼ï¼š</p><ul><li><code>display: flex</code>; ä»£è¡¨çš„æ˜¯å—çº§<br /></li><li><code>display: inline-flex</code>; ä»£è¡¨çš„æ˜¯è¡Œå†…å—<br /><blockquote><p>ä¸‹é¢çš„ä¾‹å­è¯æ˜ï¼Œ<code>display:flex;</code> çš„æ—¶å€™ï¼Œä¸¤ä¸ªdivæ˜¯ä¸Šä¸‹æ’åˆ—çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯<code>displayï¼šinline-flex;</code> çš„æ—¶å€™æ˜¯å·¦å³æ’åˆ—çš„</p></blockquote></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">      flex å¸ƒå±€æœ‰ä¸¤ä¸ªå€¼ï¼š</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      display:flex;ä»£è¡¨çš„æ˜¯å—çº§</span></span></span><br><span class="line"><span class="comment"><span class="language-css">      display:inline-flex;ä»£è¡¨çš„æ˜¯è¡Œå†…å—</span></span></span><br><span class="line"><span class="comment"><span class="language-css">    */</span></span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>:green;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>:inline-flex;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background</span>:pink;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>:inline-flex;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>box1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>box2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4ã€flex-å¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ"><a href="#4ã€flex-å¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4ã€flex å¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ"></a>4ã€flex å¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ</h4><p>é‡‡ç”¨<code>Flex</code>å¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸º<code>Flexå®¹å™¨ï¼ˆflex containerï¼‰</code>ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º<code>Flexé¡¹ç›®ï¼ˆflex itemï¼‰</code>ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚<br /><br><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-1.png"><br><br /></p><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹)å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åš<code>main end</code>ï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚</p><h4 id="5ã€å®¹å™¨çš„å±æ€§"><a href="#5ã€å®¹å™¨çš„å±æ€§" class="headerlink" title="5ã€å®¹å™¨çš„å±æ€§"></a>5ã€å®¹å™¨çš„å±æ€§</h4><ul><li><code>flex-direction</code><br /></li><li><code>flex-wrap</code><br /></li><li><code>flex-flow</code><br /></li><li><code>justify-content</code><br /></li><li><code>align-items</code><br /></li><li><code>align-content</code><br /></li></ul><h5 id="5-1-flex-directionå±æ€§"><a href="#5-1-flex-directionå±æ€§" class="headerlink" title="5.1 flex-directionå±æ€§:"></a>5.1 <code>flex-direction</code>å±æ€§:</h5><p>è®¾ç½®ä¸»è½´çš„æ–¹å‘</p><ul><li><code>row</code>ï¼šä¸»è½´çš„æ–¹å‘æ˜¯æ°´å¹³ï¼Œä»ä»å·¦åˆ°å³<br /></li><li><code>column</code>ï¼šä¸»è½´çš„æ–¹å‘æ˜¯å‚ç›´çš„ï¼Œä»ä¸Šåˆ°ä¸‹<br /></li><li><code>row-reverse</code>ï¼šä¸»è½´çš„æ–¹å‘æ˜¯æ°´å¹³ï¼Œä»å³åˆ°å·¦<br /></li><li><code>column-reverse</code>ï¼šä¸»è½´çš„æ–¹å‘æ˜¯å‚ç›´çš„ï¼Œä»ä¸‹åˆ°ä¸Š<br /></li></ul><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-2.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>:flex;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* flex-direction: row; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* flex-direction: column; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* flex-direction: row-reverse; */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-direction</span>: column-reverse;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:green;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-left</span>:<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="5-2-flex-wrap"><a href="#5-2-flex-wrap" class="headerlink" title="5.2 flex-wrap:"></a>5.2 <code>flex-wrap</code>:</h5><ul><li><code>wrap</code>: æ¢è¡Œ<br /></li><li><code>nowrap</code>: ä¸æ¢è¡Œï¼ˆé»˜è®¤ï¼‰<br /></li><li><code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œä¸è¿‡ç¬¬ä¸€è¡Œåœ¨æœ€ä¸‹é¢<br /></li></ul><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-3.png"> </p><h5 id="5-3-flex-flow"><a href="#5-3-flex-flow" class="headerlink" title="5.3 flex-flow"></a>5.3<code> flex-flow</code></h5><p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code>ã€‚</p><blockquote><p>flex-flow: row wrap; å†™äº†è¿™ä¸ªä¹‹åï¼Œä¸‹é¢çš„æ¡ˆä¾‹æ•ˆæœè·Ÿä¸Šä¸€ä¸ªä¸€æ ·</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>flex-flow<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>:<span class="number">0</span>; <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">      flex-flow æ˜¯flex-direction å’Œflex-wrap çš„ç®€å†™</span></span></span><br><span class="line"><span class="comment"><span class="language-css">     */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>,<span class="selector-tag">ol</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">flex-flow</span>: row wrap</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: green;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="5-4-justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚"><a href="#5-4-justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚" class="headerlink" title="5.4 justify-contentå±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚"></a>5.4 <code>justify-content</code>å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</h5><p><code>justify-content</code>:<code> flex-start</code> | <code>flex-end</code> | <code>center</code> | <code>space-between</code> | <code>space-around</code>| <code>space-evenly</code> ;<br /></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-4.png"></p><p>â€‹<img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-5.png"> </p><p><code>space-evenly</code><br>    <img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-6.png"></p><h5 id="5-5-align-itemså±æ€§ï¼š"><a href="#5-5-align-itemså±æ€§ï¼š" class="headerlink" title="5.5 align-itemså±æ€§ï¼š"></a>5.5 <code>align-items</code>å±æ€§ï¼š</h5><p><code>align-items</code>å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚ </p><p><code>align-items</code>: <code> flex-start</code> | <code>flex-end</code> | <code>center</code> | <code>baseline</code> | <code>stretch</code>;<br><br /><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸º<code>auto</code>ï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚<br /><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-7.png"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-8.png"></p><h5 id="5-6-align-contentå±æ€§"><a href="#5-6-align-contentå±æ€§" class="headerlink" title="5.6 align-contentå±æ€§"></a>5.6 <code>align-content</code>å±æ€§</h5><p><code>align-content</code>å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´å¾—æœ‰é¡¹ç›®æ¢è¡Œï¼‰<br /><br><code>align-content: flex-start | flex-end | center | space-between | space-around | stretch</code>; <img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-9.png"></p><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-10.png"></p><h4 id="6ã€é¡¹ç›®çš„å±æ€§"><a href="#6ã€é¡¹ç›®çš„å±æ€§" class="headerlink" title="6ã€é¡¹ç›®çš„å±æ€§"></a>6ã€é¡¹ç›®çš„å±æ€§</h4><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚</p><ul><li><code>order</code><br /></li><li><code>flex-grow</code><br /></li><li><code>flex-shrink</code><br /></li><li><code>flex-basis</code><br /></li><li><code>flex</code><br /></li><li><code>align-self</code><br /></li></ul><h5 id="6-1-orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚"><a href="#6-1-orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚" class="headerlink" title="6.1 orderå±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚"></a>6.1 <code>order</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</h5><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-10.png"></p><h5 id="6-2-flex-growå±æ€§"><a href="#6-2-flex-growå±æ€§" class="headerlink" title="6.2 flex-growå±æ€§"></a>6.2 <code>flex-grow</code>å±æ€§</h5><p><code>flex-grow</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚ <br />å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯)ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-12.png"></p><h5 id="6-3-flex-shrinkå±æ€§"><a href="#6-3-flex-shrinkå±æ€§" class="headerlink" title="6.3 flex-shrinkå±æ€§"></a>6.3 <code>flex-shrink</code>å±æ€§</h5><p><code>flex-shrink</code>å±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-13.png"></p><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚<br />è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p><br /><h5 id="6-4-flex-basiså±æ€§"><a href="#6-4-flex-basiså±æ€§" class="headerlink" title="6.4 flex-basiså±æ€§"></a>6.4 <code>flex-basis</code>å±æ€§</h5><p><code>flex-basis</code>å±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚å®ƒå¯ä»¥è®¾ä¸ºè·Ÿ<code>width</code>æˆ–<code>height</code>å±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6-5-flexå±æ€§"><a href="#6-5-flexå±æ€§" class="headerlink" title="6.5 flexå±æ€§"></a>6.5 <code>flexå±æ€§</code></h5><p>flexå±æ€§æ˜¯<code>flex-grow</code>, <code>flex-shrink</code> å’Œ<code> flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">flex</span>: none | [ &lt;<span class="string">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class="string">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class="string">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>flexï¼š0 1 auto</code>ï¼›é»˜è®¤å€¼<br><code>flexï¼šnone</code>ï¼› ä»£è¡¨çš„æ„æ€ç­‰åŒäº flexï¼š0 0 autoï¼›<br><code>flexï¼šauto</code>ï¼›ä»£è¡¨çš„æ„æ€æ˜¯flexï¼š1 1 autoï¼›<br><code>flexï¼šnumber</code>ï¼›å½“flexå–å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•°å­—ï¼Œåˆ™è¯¥æ•°å­—ä¸º<code>flex-grow</code>çš„å€¼ï¼Œ<code>flex-shrink</code>çš„å€¼ä¸º1ï¼Œ<code>flex-basis</code>çš„å€¼ä¸º0%ï¼›</p><h5 id="6-6-align-selfå±æ€§"><a href="#6-6-align-selfå±æ€§" class="headerlink" title="6.6 align-selfå±æ€§"></a>6.6 <code>align-self</code>å±æ€§</h5><p><code>align-self</code>å±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„<code>align-items</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº<code>stretch</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line"><span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/flex-14.png"></p>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;1ã€-flex-å¸ƒå±€çš„å‡ºç°&quot;&gt;&lt;a href=&quot;#1ã€-flex-å¸ƒå±€çš„å‡ºç°&quot; class=&quot;headerlink&quot; title=&quot;1ã€ flex å¸ƒå±€çš„å‡ºç°&quot;&gt;&lt;/a&gt;1ã€ &lt;code&gt;flex&lt;/code&gt; å¸ƒå±€çš„å‡ºç°&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– display å±æ€§ + position å±æ€§ + float å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚&lt;br&gt;2009å¹´ï¼ŒW3Cæå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flexå¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="CSS3" scheme="https://zhangone.site/tags/CSS3/"/>
    
  </entry>
  
  <entry>
    <title>CSS-åª’ä½“æŸ¥è¯¢</title>
    <link href="https://zhangone.site/posts/762ab198/"/>
    <id>https://zhangone.site/posts/762ab198/</id>
    <published>2019-04-27T02:27:42.000Z</published>
    <updated>2019-04-27T02:27:42.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="è§†å£ï¼ˆviewportï¼‰"><a href="#è§†å£ï¼ˆviewportï¼‰" class="headerlink" title="è§†å£ï¼ˆviewportï¼‰"></a>è§†å£ï¼ˆviewportï¼‰</h4><p>å½“æˆ‘ä»¬ä¸åŠ è§†å£çš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿç§»åŠ¨ç«¯ï¼Œbodyçš„å®½åº¦é»˜è®¤æ˜¯980px,å¹¶ä¸æ˜¯æ‰‹æœºå±å¹•çš„å®½åº¦ï¼Œå¦‚æœæƒ³è¦æŠŠé¡µé¢åœ¨æ‰‹æœºå±å¹•ä¸­æ˜¾ç¤ºå®Œå…¨ï¼Œå°±ä¼šè¿›è¡Œç¼©æ”¾ï¼Œè¿™æ ·çš„è¯ï¼Œé‡Œé¢çš„æ–‡å­—ç­‰å°±ä¼šçœ‹ä¸æ¸…æ¥šï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œé€šå¸¸éƒ½ä¼šåŠ è§†å£ï¼Œè®©é¡µé¢çš„å®½åº¦ç­‰äºæ‰‹æœºå±å¹•çš„å®½åº¦ã€‚</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.zhangone.site/PhotoBed/img/blog/CSS3/media1.png"></p><h4 id="åª’ä½“æŸ¥è¯¢"><a href="#åª’ä½“æŸ¥è¯¢" class="headerlink" title="åª’ä½“æŸ¥è¯¢"></a>åª’ä½“æŸ¥è¯¢</h4><p>@media é’ˆå¯¹ä¸åŒåª’ä½“ç±»å‹å¯ä»¥å®šåˆ¶ä¸åŒçš„æ ·å¼è§„åˆ™ã€‚ ä¾‹å¦‚ï¼šä½ å¯ä»¥é’ˆå¯¹ä¸åŒçš„åª’ä½“ç±»å‹(åŒ…æ‹¬æ˜¾ç¤ºå™¨ã€ä¾¿æºè®¾å¤‡ã€ç”µè§†æœºï¼Œç­‰ç­‰)è®¾ç½®ä¸åŒçš„æ ·å¼è§„åˆ™ã€‚ ä½†æ˜¯è¿™äº›å¤šåª’ä½“ç±»å‹åœ¨å¾ˆå¤šè®¾å¤‡ä¸Šæ”¯æŒè¿˜ä¸å¤Ÿå‹å¥½ã€‚</p><blockquote><p>@media not|only mediatype and (expressions) { CSS ä»£ç â€¦; }</p></blockquote><ul><li>åª’ä½“ç±»å‹<ul><li><code>all</code>ç”¨äºæ‰€æœ‰è®¾å¤‡</li><li><code>print</code>ç”¨äºæ‰“å°æœºå’Œæ‰“å°é¢„è§ˆ</li><li><code>screen</code>ç”¨äºç”µè„‘å±å¹•ï¼Œå¹³æ¿ç”µè„‘ï¼Œæ™ºèƒ½æ‰‹æœºç­‰ã€‚</li><li><code>speech</code>åº”ç”¨äºå±å¹•é˜…è¯»å™¨ç­‰å‘å£°è®¾å¤‡</li><li>è¿˜æœ‰ä¸€äº›å·²ç»åºŸå¼ƒçš„ç±»å‹å°±ä¸å†åˆ—ä¸¾äº†  <br/></li></ul></li><li>åª’ä½“åŠŸèƒ½<ul><li><code>aspect-ratio</code>   å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ä¸é«˜åº¦çš„æ¯”ç‡</li><li><code>color</code>å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„ä¸ªæ•°ã€‚å¦‚æœä¸æ˜¯å½©è‰²è®¾å¤‡ï¼Œåˆ™å€¼ç­‰äº0</li><li><code>color-index</code>å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æ¡ç›®æ•°ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨å½©è‰²æŸ¥è¯¢è¡¨ï¼Œåˆ™å€¼ç­‰äº0</li><li><code>device-aspect-ratio</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æ¯”ç‡ã€‚</li><li><code>device-height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§é«˜åº¦ã€‚</li><li><code>device-width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ã€‚</li><li><code>grid</code>ç”¨æ¥æŸ¥è¯¢è¾“å‡ºè®¾å¤‡æ˜¯å¦ä½¿ç”¨æ …æ ¼æˆ–ç‚¹é˜µã€‚</li><li><code>height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸé«˜åº¦ã€‚</li><li><code>max-aspect-ratio</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å¤§æ¯”ç‡ã€‚</li><li><code>max-color</code>å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„æœ€å¤§ä¸ªæ•°ã€‚</li><li><code>max-color-index</code>å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æœ€å¤§æ¡ç›®æ•°ã€‚</li><li><code>max-device-aspect-ratio</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å¤§æ¯”ç‡ã€‚</li><li><code>max-device-height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§çš„æœ€å¤§é«˜åº¦ã€‚</li><li><code>max-device-width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•æœ€å¤§å¯è§å®½åº¦ã€‚</li><li><code>max-height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å¤§å¯è§åŒºåŸŸé«˜åº¦ã€‚</li><li><code>max-monochrome</code>å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„æœ€å¤§å•è‰²åŸä»¶ä¸ªæ•°ã€‚</li><li><code>max-resolution</code>å®šä¹‰è®¾å¤‡çš„æœ€å¤§åˆ†è¾¨ç‡ã€‚</li><li><code>max-width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å¤§å¯è§åŒºåŸŸå®½åº¦ã€‚</li><li><code>min-aspect-ratio</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ä¸é«˜åº¦çš„æœ€å°æ¯”ç‡ã€‚</li><li><code>min-color</code>   å®šä¹‰è¾“å‡ºè®¾å¤‡æ¯ä¸€ç»„å½©è‰²åŸä»¶çš„æœ€å°ä¸ªæ•°ã€‚</li><li><code>min-color-index</code>å®šä¹‰åœ¨è¾“å‡ºè®¾å¤‡çš„å½©è‰²æŸ¥è¯¢è¡¨ä¸­çš„æœ€å°æ¡ç›®æ•°ã€‚</li><li><code>min-device-aspect-ratio</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•å¯è§å®½åº¦ä¸é«˜åº¦çš„æœ€å°æ¯”ç‡ã€‚</li><li><code>min-device-width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•æœ€å°å¯è§å®½åº¦ã€‚</li><li><code>min-device-height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡çš„å±å¹•çš„æœ€å°å¯è§é«˜åº¦ã€‚</li><li><code>min-height</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å°å¯è§åŒºåŸŸé«˜åº¦ã€‚</li><li><code>min-monochrome</code>å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„æœ€å°å•è‰²åŸä»¶ä¸ªæ•°</li><li><code>min-resolution</code>å®šä¹‰è®¾å¤‡çš„æœ€å°åˆ†è¾¨ç‡ã€‚</li><li><code>min-width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢æœ€å°å¯è§åŒºåŸŸå®½åº¦ã€‚</li><li><code>monochrome</code>å®šä¹‰åœ¨ä¸€ä¸ªå•è‰²æ¡†æ¶ç¼“å†²åŒºä¸­æ¯åƒç´ åŒ…å«çš„å•è‰²åŸä»¶ä¸ªæ•°ã€‚å¦‚æœä¸æ˜¯å•è‰²è®¾å¤‡ï¼Œåˆ™å€¼ç­‰äº0</li><li><code>orientation</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸé«˜åº¦æ˜¯å¦å¤§äºæˆ–ç­‰äºå®½åº¦ã€‚</li><li><code>resolution</code>å®šä¹‰è®¾å¤‡çš„åˆ†è¾¨ç‡ã€‚å¦‚ï¼š96dpi, 300dpi, 118dpcm</li><li><code>scan</code> å®šä¹‰ç”µè§†ç±»è®¾å¤‡çš„æ‰«æå·¥åºã€‚</li><li><code>width</code>å®šä¹‰è¾“å‡ºè®¾å¤‡ä¸­çš„é¡µé¢å¯è§åŒºåŸŸå®½åº¦ã€‚</li></ul></li></ul><p>ç›´æ¥ä¸Šä»£ç </p><p><strong>åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹1</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:green;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-css">       å½“å±å¹•çš„å®½åº¦å°äº600pxçš„æ—¶å€™ï¼Œæˆ‘å°±è®©.box è¿™ä¸ªç›’å­èƒŒæ™¯é¢œè‰²pink</span></span></span><br><span class="line"><span class="comment"><span class="language-css"></span></span></span><br><span class="line"><span class="comment"><span class="language-css">     */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">     <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">600px</span>)&#123;</span></span><br><span class="line"><span class="language-css">         <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">background</span>:pink;</span></span><br><span class="line"><span class="language-css">         &#125;</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css">     <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">700px</span>)&#123;</span></span><br><span class="line"><span class="language-css">         <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">background</span>:gold;</span></span><br><span class="line"><span class="language-css">         &#125;</span></span><br><span class="line"><span class="language-css">     &#125;</span></span><br><span class="line"><span class="language-css">     <span class="comment">/* å¤§äºç­‰300 å°äºç­‰äº800 */</span></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">300px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">800</span>)&#123;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* éœ€æ±‚ï¼šå°äº768pxçš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰²</span></span></span><br><span class="line"><span class="comment"><span class="language-css">             å¤§äº768åˆ°1200 æ˜¾ç¤ºä¸€ä¸ªé¢œè‰²</span></span></span><br><span class="line"><span class="comment"><span class="language-css">             å¤§äº1200çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² </span></span></span><br><span class="line"><span class="comment"><span class="language-css">            */</span></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹2</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:green;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">768px</span>)&#123;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background</span>:pink;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">769px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">1200px</span>)&#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background</span>:gold;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">1201px</span>)&#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background</span>:darkseagreen;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         /* éœ€æ±‚ï¼šå°äº768pxçš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰²</span></span><br><span class="line"><span class="comment">             å¤§äº768åˆ°1200 æ˜¾ç¤ºä¸€ä¸ªé¢œè‰²</span></span><br><span class="line"><span class="comment">             å¤§äº1200çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªé¢œè‰² </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>åª’ä½“æŸ¥è¯¢æ¡ˆä¾‹3</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.box</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">width</span>:<span class="number">12.5%</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">height</span>:<span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">line-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">border</span>:<span class="number">1px</span> solid lightgreen;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">box-sizing</span>:border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* å¤§äºç­‰äº1200 çš„æ—¶å€™æ˜¾ç¤º8ä¸ª</span></span></span><br><span class="line"><span class="comment"><span class="language-css">           å¤§äºç­‰äº900 å°äº1200çš„æ—¶å€™æ˜¾ç¤º4ä¸ª</span></span></span><br><span class="line"><span class="comment"><span class="language-css">           å¤§äºç­‰äº768px å°äº900çš„æ—¶å€™æ˜¾ç¤º2ä¸ª</span></span></span><br><span class="line"><span class="comment"><span class="language-css">           å°äº768px çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ª</span></span></span><br><span class="line"><span class="comment"><span class="language-css"></span></span></span><br><span class="line"><span class="comment"><span class="language-css">         */</span></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">1200px</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.box</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">12.5%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">900px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">1199px</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.box</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">25%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>:<span class="number">768px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">899px</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.box</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">767px</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.box</span>&gt;<span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>:<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h4 id=&quot;è§†å£ï¼ˆviewportï¼‰&quot;&gt;&lt;a href=&quot;#è§†å£ï¼ˆviewportï¼‰&quot; class=&quot;headerlink&quot; title=&quot;è§†å£ï¼ˆviewportï¼‰&quot;&gt;&lt;/a&gt;è§†å£ï¼ˆviewportï¼‰&lt;/h4&gt;&lt;p&gt;å½“æˆ‘ä»¬ä¸åŠ è§†å£çš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿç§»åŠ¨ç«¯ï¼Œbodyçš„å®½åº¦é»˜è®¤æ˜¯980px,å¹¶ä¸æ˜¯æ‰‹æœºå±å¹•çš„å®½åº¦ï¼Œå¦‚æœæƒ³è¦æŠŠé¡µé¢åœ¨æ‰‹æœºå±å¹•ä¸­æ˜¾ç¤ºå®Œå…¨ï¼Œå°±ä¼šè¿›è¡Œç¼©æ”¾ï¼Œè¿™æ ·çš„è¯ï¼Œé‡Œé¢çš„æ–‡å­—ç­‰å°±ä¼šçœ‹ä¸æ¸…æ¥šï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œé€šå¸¸éƒ½ä¼šåŠ è§†å£ï¼Œè®©é¡µé¢çš„å®½åº¦ç­‰äºæ‰‹æœºå±å¹•çš„å®½åº¦ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="CSS3" scheme="https://zhangone.site/tags/CSS3/"/>
    
  </entry>
  
  <entry>
    <title>CSSä¸¤ç§ç»å…¸å¸ƒå±€</title>
    <link href="https://zhangone.site/posts/a3150240/"/>
    <id>https://zhangone.site/posts/a3150240/</id>
    <published>2019-04-19T10:03:58.000Z</published>
    <updated>2019-04-19T10:03:58.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½"><a href="#ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½" class="headerlink" title="ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½"></a>ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½</h3><h3 id="1-å®šä½ï¼šposition"><a href="#1-å®šä½ï¼šposition" class="headerlink" title="1. å®šä½ï¼šposition"></a>1. å®šä½ï¼š<code>position</code></h3><ul><li><code>static</code> é™æ€å®šä½</li><li><code>relative</code> ç›¸å¯¹å®šä½</li><li><code>absolute</code> ç»å¯¹å®šä½</li><li><code>fixed</code> å›ºå®šå®šä½<span id="more"></span></li></ul><h4 id="1-1-ç›¸å¯¹å®šä½"><a href="#1-1-ç›¸å¯¹å®šä½" class="headerlink" title="1.1 ç›¸å¯¹å®šä½"></a>1.1 ç›¸å¯¹å®šä½</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">+</span> æ²¡æœ‰è„±ç¦»æ–‡æ¡£æµï¼Œä½ç½®è¿˜åœ¨</span><br><span class="line"><span class="bullet">+</span> å±‚çº§é«˜äºæ™®é€šæ–‡æ¡£æµ</span><br><span class="line"><span class="bullet">+</span> ç»™ç»å¯¹å®šä½çš„å…ƒç´ åšå‚ç…§ç‰©</span><br><span class="line"><span class="bullet">+</span> ç›¸å¯¹è‡ªèº«</span><br></pre></td></tr></table></figure><h4 id="1-2-ç»å¯¹å®šä½"><a href="#1-2-ç»å¯¹å®šä½" class="headerlink" title="1.2 ç»å¯¹å®šä½"></a>1.2 ç»å¯¹å®šä½</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">+</span> è„±ç¦»æ–‡æ¡£æµ</span><br><span class="line"><span class="bullet">+</span> å±‚çº§é«˜äºæ™®é€šæ–‡æ¡£æµçš„å±‚çº§</span><br><span class="line"><span class="bullet">+</span> ç»å¯¹å®šä½çš„å…ƒç´ åœ¨è®¾ç½®å‚ç…§ç‰©çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯åŒ…å«å…³ç³»çš„ä¸Šçº§å…ƒç´ </span><br><span class="line"><span class="bullet">+</span> æµè§ˆå™¨åœ¨å¯»æ‰¾å‚ç…§ç‰©çš„æ—¶å€™æ˜¯æŒ‰ç…§å°±è¿‘åŸåˆ™è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœéƒ½æ²¡æœ‰è®¾ç½®ï¼Œé‚£å®ƒçš„å‚ç…§ç‰©å°±æ˜¯body</span><br><span class="line"><span class="bullet">+</span> åŸæœ¬å®½åº¦å¯ä»¥ç»§æ‰¿ï¼Œä½†æ˜¯å®šä½çš„å…ƒç´ ï¼Œå®½åº¦ä¸å†ç»§æ‰¿äº†ï¼Œæ˜¯ç”±è‡ªèº«å†…å®¹å†³å®šçš„ã€‚å¦‚æœæ˜¯è¡Œå†…å…ƒç´ ï¼Œå®šä½ä¹‹åï¼Œå®½ã€é«˜ä¹Ÿå¯ä»¥èµ·ä½œç”¨ã€‚</span><br><span class="line"><span class="bullet">+</span> å¦‚æœç»™ç»å¯¹å®šä½å…ƒç´ çš„å®½åº¦è®¾ç½®ç™¾åˆ†æ¯”çš„æ—¶å€™ï¼Œé‚£å®ƒæ˜¯ç›¸å¯¹ä½ å‚ç…§ç‰©æ¥è¯´çš„ï¼Œå¹¶ä¸æ˜¯çˆ¶çº§ã€‚</span><br><span class="line"></span><br><span class="line">ç»å¯¹å®šä½çš„å‚ç…§ç‰©ï¼špositionï¼šrelativeæˆ–è€…position:absoluteã€position:fixed ,åªè¦æ˜¯ä¸‰è€…ä¹‹ä¸€å³å¯ã€‚</span><br></pre></td></tr></table></figure><h4 id="1-3-å›ºå®šå®šä½"><a href="#1-3-å›ºå®šå®šä½" class="headerlink" title="1.3 å›ºå®šå®šä½"></a>1.3 å›ºå®šå®šä½</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">+</span> å›ºå®šå®šä½æ˜¯ç›¸å¯¹äºæ•´ä¸ªé¡µé¢çª—å£çš„</span><br><span class="line"><span class="bullet">+</span> CSS3ä¸­å¯ä½¿ç”¨transfromæ”¹å˜å›ºå®šå®šä½çš„å‚ç…§å…ƒç´ </span><br></pre></td></tr></table></figure><h3 id="2-å¦‚ä½•åˆ©ç”¨å®šä½positionè®©ä¸€ä¸ªå…ƒç´ åœ¨æ•´ä¸ªå±å¹•æˆ–è€…æ˜¯ä¸€ä¸ªç›’å­ä¸­æ°´å¹³å‚ç›´å±…ä¸­"><a href="#2-å¦‚ä½•åˆ©ç”¨å®šä½positionè®©ä¸€ä¸ªå…ƒç´ åœ¨æ•´ä¸ªå±å¹•æˆ–è€…æ˜¯ä¸€ä¸ªç›’å­ä¸­æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="2. å¦‚ä½•åˆ©ç”¨å®šä½positionè®©ä¸€ä¸ªå…ƒç´ åœ¨æ•´ä¸ªå±å¹•æˆ–è€…æ˜¯ä¸€ä¸ªç›’å­ä¸­æ°´å¹³å‚ç›´å±…ä¸­"></a>2. å¦‚ä½•åˆ©ç”¨å®šä½<code>position</code>è®©ä¸€ä¸ªå…ƒç´ åœ¨æ•´ä¸ªå±å¹•æˆ–è€…æ˜¯ä¸€ä¸ªç›’å­ä¸­æ°´å¹³å‚ç›´å±…ä¸­</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">è®©è¿™ä¸ªå…ƒç´  positionï¼šabsoluteï¼›</span><br><span class="line"><span class="bullet">+</span> leftï¼š50%ï¼›      topï¼š50%ï¼›</span><br><span class="line"><span class="bullet">+</span> margin-left:    è´Ÿçš„ç›’å­å®½çš„ä¸€åŠï¼›</span><br><span class="line"><span class="bullet">+</span> margin-top:     è´Ÿçš„ç›’å­é«˜åº¦çš„ä¸€åŠ</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="code">    .box&#123;</span></span><br><span class="line"><span class="code">        width:200px;</span></span><br><span class="line"><span class="code">        height:200px;</span></span><br><span class="line"><span class="code">        background:green;</span></span><br><span class="line"><span class="code">        position: absolute;</span></span><br><span class="line"><span class="code">        left:50%;</span></span><br><span class="line"><span class="code">        top:50%;</span></span><br><span class="line"><span class="code">        margin-left:-100px;</span></span><br><span class="line"><span class="code">        margin-top:-100px;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">&lt;/style&gt;</span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure><h3 id="3-ä¸¤ç§ç»å…¸å¸ƒå±€ï¼š"><a href="#3-ä¸¤ç§ç»å…¸å¸ƒå±€ï¼š" class="headerlink" title="3. ä¸¤ç§ç»å…¸å¸ƒå±€ï¼š"></a>3. ä¸¤ç§ç»å…¸å¸ƒå±€ï¼š</h3><h4 id="3-1-åœ£æ¯å¸ƒå±€ï¼š"><a href="#3-1-åœ£æ¯å¸ƒå±€ï¼š" class="headerlink" title="3.1 åœ£æ¯å¸ƒå±€ï¼š"></a>3.1 åœ£æ¯å¸ƒå±€ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        *&#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">min-width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrap</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrap</span>&gt;<span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: darkgreen;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: darkkhaki;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: -<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: lightsalmon;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>ä¸»ä½“<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>å·¦<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>å³<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2-åŒé£ç¿¼å¸ƒå±€"><a href="#3-2-åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="3.2 åŒé£ç¿¼å¸ƒå±€:"></a>3.2 åŒé£ç¿¼å¸ƒå±€:</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123; <span class="attribute">margin</span>: <span class="number">0</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">min-width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrap</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrap</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.wrap</span>&gt;<span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: darkkhaki;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span>&gt;<span class="selector-class">.inner</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: darkseagreen;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: saddlebrown;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: darkorange;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span>inner<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><!--end-->]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½&quot;&gt;&lt;a href=&quot;#ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½&quot; class=&quot;headerlink&quot; title=&quot;ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½&quot;&gt;&lt;/a&gt;ç®€å•äº†è§£ä¸€ä¸‹CSSå®šä½&lt;/h3&gt;&lt;h3 id=&quot;1-å®šä½ï¼šposition&quot;&gt;&lt;a href=&quot;#1-å®šä½ï¼šposition&quot; class=&quot;headerlink&quot; title=&quot;1. å®šä½ï¼šposition&quot;&gt;&lt;/a&gt;1. å®šä½ï¼š&lt;code&gt;position&lt;/code&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt; é™æ€å®šä½&lt;/li&gt;
&lt;li&gt;&lt;code&gt;relative&lt;/code&gt; ç›¸å¯¹å®šä½&lt;/li&gt;
&lt;li&gt;&lt;code&gt;absolute&lt;/code&gt; ç»å¯¹å®šä½&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fixed&lt;/code&gt; å›ºå®šå®šä½</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://zhangone.site/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="CSS3" scheme="https://zhangone.site/tags/CSS3/"/>
    
  </entry>
  
</feed>
